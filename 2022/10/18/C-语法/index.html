<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>C# è¯­æ³• | å è½æ˜Ÿç©ºğŸ’¤</title><meta name="author" content="å è½æ˜Ÿç©ºğŸ’¤"><meta name="copyright" content="å è½æ˜Ÿç©ºğŸ’¤"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="C#1. å†å² Visual J++ è¢«æ”¾å¼ƒï¼Œå®‰å¾·æ–¯Â·æµ·å°”æ–¯ä¼¯æ ¼å¸¦é¢†å›¢é˜Ÿä» 2000 å¹´å·¦å³å¼€å§‹å¼€å‘äº† C#ï¼Œåˆ° 2002 å¹´çš„çš„æ—¶å€™ï¼Œå¼€å§‹æäº¤ç»™ ECMA æˆä¸ºäº†æ ‡å‡† å› ä¸ºå®‰å¾·æ–¯ä»–çš„ä¸ªäººç»å†ï¼Œæ‰€ä»¥ C# æ·±å— Pascal&#x2F;C++&#x2F;Java çš„å½±å“ åˆ°ç°åœ¨ï¼ŒC# å·²ç»æˆä¸ºäº†ä¸€ç§å¤šèŒƒå¼çš„è¯­è¨€ã€‚é¦–å…ˆå®ƒæ˜¯ä¸€é—¨çº¯ç²¹çš„é¢å‘å¯¹è±¡çš„è¯­è¨€ (å°è£…ã€ç»§æ‰¿ã€å¤šæ€)ï¼Œæä¾›äº†é¢å‘ç»„ä»¶ç¼–ç¨‹çš„ä¸€äº›æ”¹è¿›">
<meta property="og:type" content="article">
<meta property="og:title" content="C# è¯­æ³•">
<meta property="og:url" content="http://mobai278.github.io.git/2022/10/18/C-%E8%AF%AD%E6%B3%95/index.html">
<meta property="og:site_name" content="å è½æ˜Ÿç©ºğŸ’¤">
<meta property="og:description" content="C#1. å†å² Visual J++ è¢«æ”¾å¼ƒï¼Œå®‰å¾·æ–¯Â·æµ·å°”æ–¯ä¼¯æ ¼å¸¦é¢†å›¢é˜Ÿä» 2000 å¹´å·¦å³å¼€å§‹å¼€å‘äº† C#ï¼Œåˆ° 2002 å¹´çš„çš„æ—¶å€™ï¼Œå¼€å§‹æäº¤ç»™ ECMA æˆä¸ºäº†æ ‡å‡† å› ä¸ºå®‰å¾·æ–¯ä»–çš„ä¸ªäººç»å†ï¼Œæ‰€ä»¥ C# æ·±å— Pascal&#x2F;C++&#x2F;Java çš„å½±å“ åˆ°ç°åœ¨ï¼ŒC# å·²ç»æˆä¸ºäº†ä¸€ç§å¤šèŒƒå¼çš„è¯­è¨€ã€‚é¦–å…ˆå®ƒæ˜¯ä¸€é—¨çº¯ç²¹çš„é¢å‘å¯¹è±¡çš„è¯­è¨€ (å°è£…ã€ç»§æ‰¿ã€å¤šæ€)ï¼Œæä¾›äº†é¢å‘ç»„ä»¶ç¼–ç¨‹çš„ä¸€äº›æ”¹è¿›">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://mobai278.github.io.git/img/favicon2.jpg">
<meta property="article:published_time" content="2022-10-18T03:43:08.000Z">
<meta property="article:modified_time" content="2022-10-31T01:39:00.094Z">
<meta property="article:author" content="å è½æ˜Ÿç©ºğŸ’¤">
<meta property="article:tag" content="C#è¯­æ³•">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://mobai278.github.io.git/img/favicon2.jpg"><link rel="shortcut icon" href="/img/favicon2.jpg"><link rel="canonical" href="http://mobai278.github.io.git/2022/10/18/C-%E8%AF%AD%E6%B3%95/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'C# è¯­æ³•',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-10-31 09:39:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="å è½æ˜Ÿç©ºğŸ’¤" type="application/atom+xml">
</head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/favicon2.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">5</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-bars"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> é“¾æ¥</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="å è½æ˜Ÿç©ºğŸ’¤"><span class="site-name">å è½æ˜Ÿç©ºğŸ’¤</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-bars"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> é“¾æ¥</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">C# è¯­æ³•</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-10-18T03:43:08.000Z" title="å‘è¡¨äº 2022-10-18 11:43:08">2022-10-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-10-31T01:39:00.094Z" title="æ›´æ–°äº 2022-10-31 09:39:00">2022-10-31</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%99%E7%A8%8B/">æ•™ç¨‹</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="C# è¯­æ³•"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><h1 id="C"><a href="#C" class="headerlink" title="C#"></a>C#</h1><h2 id="1-å†å²"><a href="#1-å†å²" class="headerlink" title="1. å†å²"></a>1. å†å²</h2><ul>
<li>Visual J++ è¢«æ”¾å¼ƒï¼Œ<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%AE%89%E5%BE%B7%E6%96%AF%C2%B7%E6%B5%B7%E5%B0%94%E6%96%AF%E4%BC%AF%E6%A0%BC">å®‰å¾·æ–¯Â·æµ·å°”æ–¯ä¼¯æ ¼</a>å¸¦é¢†å›¢é˜Ÿä» 2000 å¹´å·¦å³å¼€å§‹å¼€å‘äº† C#ï¼Œåˆ° 2002 å¹´çš„çš„æ—¶å€™ï¼Œå¼€å§‹æäº¤ç»™ ECMA æˆä¸ºäº†æ ‡å‡†</li>
<li>å› ä¸ºå®‰å¾·æ–¯ä»–çš„ä¸ªäººç»å†ï¼Œæ‰€ä»¥ C# æ·±å— Pascal&#x2F;C++&#x2F;Java çš„å½±å“</li>
<li>åˆ°ç°åœ¨ï¼ŒC# å·²ç»æˆä¸ºäº†ä¸€ç§å¤šèŒƒå¼çš„è¯­è¨€ã€‚é¦–å…ˆå®ƒæ˜¯ä¸€é—¨çº¯ç²¹çš„é¢å‘å¯¹è±¡çš„è¯­è¨€ (å°è£…ã€ç»§æ‰¿ã€å¤šæ€)ï¼Œæä¾›äº†é¢å‘ç»„ä»¶ç¼–ç¨‹çš„ä¸€äº›æ”¹è¿› (å±æ€§ã€å§”æ‰˜ã€äº‹ä»¶)</li>
</ul>
<p>C# ç‰ˆæœ¬æ¼”åŒ–:</p>
<ul>
<li>1.0 çº¯ç²¹çš„é¢å‘å¯¹è±¡ (2002)</li>
<li>2.0 å¢åŠ äº†æ³›å‹çš„æ¦‚å¿µ (2005)</li>
<li>3.0 å¢åŠ äº† LINQ åŠŸèƒ½ (2008)</li>
<li>4.0 å¢åŠ äº†å‘½åå‚æ•°å’Œå¯é€‰å‚æ•°çš„åŠŸèƒ½ï¼Œå¹¶æ·»åŠ äº†åŠ¨æ€ç¼–ç¨‹çš„æ”¯æŒ (2010)</li>
<li>5.0 å¢åŠ äº† async&#x2F;await çš„å¼‚æ­¥ç¼–ç¨‹èŒƒå¼ (2012)</li>
<li>6.0 æ¨è¿›äº†è·Ÿ .NET Core çš„è¯­è¨€å…±äº« (2015)</li>
<li>7.0 æ·»åŠ äº†å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€äº›ç‰¹æ€§ï¼Œå¦‚æœæ¨¡å¼åŒ¹é…ã€å…ƒç»„ç­‰ç­‰ï¼ŒåŒ…æ‹¬å…¶ä»–ä¸€äº›ä¼˜åŒ– (2017)</li>
<li>8.0 å¼€å§‹æ”¯æŒé»˜è®¤æ¥å£æ–¹æ³•ï¼Œå¯ç©ºå¼•ç”¨ç±»å‹ï¼Œswitch è¡¨è¾¾å¼ç­‰ (2019)</li>
<li>9.0 å¢åŠ äº† Record ç±»å‹ï¼Œç»§ç»­å¯¹ switch è¡¨è¾¾å¼ç­‰è¿›è¡Œç®€åŒ–è·Ÿä¼˜åŒ– (2021)</li>
</ul>
<h2 id="2-è¯­è¨€ä¸ç±»å‹"><a href="#2-è¯­è¨€ä¸ç±»å‹" class="headerlink" title="2. [è¯­è¨€ä¸ç±»å‹]"></a>2. [è¯­è¨€ä¸ç±»å‹]</h2><p>åœ¨ C# ç­‰é¢å‘å¯¹è±¡çš„è¯­è¨€ä¸­ï¼Œ<em>ç±»å‹ (Type)</em> æ˜¯ç¬¬ä¸€ä½çš„</p>
<ul>
<li>åœ¨ C# ä¸­ï¼Œä¸å¤–ä¹åšä¸¤ä»¶äº‹ï¼Œç¬¬ä¸€ä»¶æ˜¯å¼•å…¥åˆ«äººçš„ç±»å‹ï¼Œç¬¬äºŒä»¶æ˜¯å£°æ˜è‡ªå·±çš„ç±»å‹</li>
<li>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•´ä¸ª C# é¡¹ç›®ï¼Œæ˜¯ç”±ä¸åŒçš„ <strong>ç±»å‹å£°æ˜</strong> ç»„æˆçš„</li>
<li>åœ¨æ•´ä¸ª C# é¡¹ç›®ä¸­ï¼Œéœ€è¦ <strong>æœ‰ä¸”åªæœ‰ä¸€ä¸ª</strong> ç‰¹æ®Šçš„æ–¹æ³•ï¼Œå°±æ˜¯ Main æ–¹æ³•ã€‚å®ƒæ˜¯ç¨‹åºæ‰§è¡Œçš„èµ·ç‚¹</li>
<li>é€šè¿‡å¼•å…¥ <strong>å‘½åç©ºé—´ (namespace)</strong> çš„æ¦‚å¿µï¼Œç”¨æ¥ç»„ç»‡å„ç§ç±»å‹ï¼Œä»è€Œé¿å…å‘½åå†²çª</li>
</ul>
<p><img src="http://yaoqisan.local:7373/html/dotnet/img/types.png" alt="types.png"></p>
<p><img src="http://yaoqisan.local:7373/html/dotnet/img/types-2.png" alt="types-2.png"></p>
<h3 id="2-1-Main"><a href="#2-1-Main" class="headerlink" title="2.1. Main"></a>2.1. Main</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Main</span> (<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> å¦‚æœæ­£å¸¸è¿”å›åˆ™æ˜¯ <span class="number">0</span>ï¼Œå¦åˆ™æ˜¯ä¸€ä¸ªæ•´æ•°ä»£è¡¨é”™è¯¯ç¼–å·;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span> (<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœçœŸçš„ä¸å…³å¿ƒè¿”å›çš„é”™è¯¯ç¼–å·çš„è¯ï¼Œå¯ä»¥å°†è¿”å›å€¼è®¾ç½®ä¸º void</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯ä»¥ä½¿ç”¨ args æ¥æ•è·ä»æ§åˆ¶å°è¾“å…¥çš„å‚æ•° (ç”¨ç©ºæ ¼åˆ†éš”çš„å…ƒç´ )</span></span><br><span class="line">    <span class="keyword">if</span> (args.Length &gt; <span class="number">0</span> &amp;&amp; args[<span class="number">0</span>] == <span class="string">&quot;--help&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;ä½¿ç”¨æ–¹å¼: ./Program&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span> ()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä½ çœŸçš„ä¸åœ¨ä¹ä¼ å…¥å‚æ•°çš„è¯ï¼Œé‚£ä¹ˆå°† args çœç•¥æ‰ä¹Ÿå¯ä»¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">async</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">await</span> CCCAync();</span><br><span class="line">    <span class="keyword">await</span> AAA();</span><br><span class="line">    <span class="keyword">await</span> BBB();</span><br><span class="line">    DDD();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>args ä½¿ç”¨çš„å¦ä¸€ä¸ªç¤ºä¾‹:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (args.Length == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (args[<span class="number">0</span>] == <span class="string">&quot;--help&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;ä½¿ç”¨æ–¹æ³•: dotnet run 2223&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">double</span> bill = <span class="built_in">double</span>.Parse(args[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">var</span> calc = <span class="keyword">new</span> TipCalculator(bill);</span><br><span class="line">            calc.PrintToConsole();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;å‚æ•°é”™è¯¯.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-å‘½åç©ºé—´"><a href="#2-2-å‘½åç©ºé—´" class="headerlink" title="2.2. å‘½åç©ºé—´"></a>2.2. å‘½åç©ºé—´</h3><ul>
<li>ç”¨æ¥è§£å†³ç±»å‹åå­—çš„å†²çª</li>
<li>ç”¨æ¥åˆç†ç»„ç»‡ç±»å‹</li>
</ul>
<h4 id="2-2-1-ä½¿ç”¨"><a href="#2-2-1-ä½¿ç”¨" class="headerlink" title="2.2.1. ä½¿ç”¨"></a>2.2.1. ä½¿ç”¨</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// ç±»å‹çš„ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡ namespace.ç±»å‹ æ¥è®¿é—®åˆ° / full name</span><br><span class="line">System.String aaa = System.IO.File.ReadAllText(&quot;e:\\aaa.txt&quot;);</span><br><span class="line">System.Console.WriteLine(aaa);</span><br><span class="line">System.Console.WriteLine(&quot;hello&quot;);</span><br><span class="line"></span><br><span class="line">// å¯ä»¥å€ŸåŠ© using å‘½åç©ºé—´çš„æ–¹å¼ï¼Œç®€åŒ–ç±»å‹çš„ä½¿ç”¨</span><br><span class="line">using System;</span><br><span class="line">using System.IO;</span><br><span class="line">string aaa = File.ReadAllText(&quot;e:\\aaa.txt&quot;);</span><br><span class="line">Console.WriteLine(aaa);</span><br><span class="line">Console.WriteLine(&quot;hello&quot;);</span><br><span class="line"></span><br><span class="line">// å¯ä»¥ä½¿ç”¨ using static çš„è¯­æ³•ç»§ç»­è¿›è¡Œç®€åŒ–</span><br><span class="line">using static System.Console;</span><br><span class="line">using static System.IO.File;</span><br><span class="line">string aaa = ReadAllText(&quot;e:\\aaa.txt&quot;);</span><br><span class="line">WriteLine(aaa);</span><br><span class="line">WriteLine(&quot;hello&quot;);</span><br><span class="line"></span><br><span class="line">// å¯ä»¥ä½¿ç”¨ using = çš„æ–¹å¼ï¼Œä¸ºå‘½åç©ºé—´èµ·ä¸€ä¸ªåˆ«åã€‚è¿™ç§æ–¹å¼ä¸€èˆ¬ç”¨æ¥è§£å†³å†²çª</span><br><span class="line">using SI = System.IO;</span><br><span class="line">using HisSystem;</span><br><span class="line">SI.File.xxx();  // System.IO.File.xxx();</span><br><span class="line">File.xxx();     // HisSystem.FIle.xxx();</span><br></pre></td></tr></table></figure>

<h4 id="2-2-2-å®šä¹‰"><a href="#2-2-2-å®šä¹‰" class="headerlink" title="2.2.2. å®šä¹‰"></a>2.2.2. å®šä¹‰</h4><p>æ”¯æŒåµŒå¥—ï¼Œæ”¯æŒä½¿ç”¨ . çš„å½¢å¼è¿›è¡Œç®€å†™:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">using SI = System.IO; // File</span><br><span class="line"></span><br><span class="line">namespace TaxCalculator</span><br><span class="line">&#123;</span><br><span class="line">    namespace Hi</span><br><span class="line">    &#123;</span><br><span class="line">        namespace Ih // TaxCalculator.Hi.Ih.Boy</span><br><span class="line">        &#123;</span><br><span class="line">            class Boy</span><br><span class="line">            &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        class Girl // TaxCalculator.Hi.Girl</span><br><span class="line">        &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    namespace A.B.C.D.E.F</span><br><span class="line">    &#123;</span><br><span class="line">        namespace G.H.X</span><br><span class="line">        &#123;</span><br><span class="line">            using static System.Console;</span><br><span class="line">            namespace Y</span><br><span class="line">            &#123;</span><br><span class="line">                class Hello</span><br><span class="line">                &#123;</span><br><span class="line">                    void Say()</span><br><span class="line">                    &#123;</span><br><span class="line">                        WriteLine(&quot;hello&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    namespace B</span><br><span class="line">    &#123;</span><br><span class="line">        using System;</span><br><span class="line">        class Program // TaxCalculator.Program</span><br><span class="line">        &#123;</span><br><span class="line">            static void Main()</span><br><span class="line">            &#123;</span><br><span class="line">                string aaa = SI.File.ReadAllText(&quot;e:\\aaa.txt&quot;);</span><br><span class="line">                Console.WriteLine(aaa);</span><br><span class="line">                Console.WriteLine(&quot;hello&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-3-BCL-x2F-System"><a href="#2-2-3-BCL-x2F-System" class="headerlink" title="2.2.3. BCL&#x2F;System"></a>2.2.3. BCL&#x2F;System</h4><p>System å‘½åç©ºé—´:</p>
<ul>
<li>System.IO (Input&#x2F;Output), æ–‡ä»¶çš„å¤„ç†</li>
<li>System.Drawing, ç»˜åˆ¶å›¾ç‰‡</li>
<li>System.Collectionsï¼Œé›†åˆç±»å‹</li>
<li>System.Netï¼Œç½‘ç»œè®¿é—®</li>
<li>System.Textï¼Œè·Ÿæ–‡æœ¬ç›¸å…³çš„å†…å®¹ï¼Œæ¯”å¦‚æ­£åˆ™è¡¨è¾¾å¼</li>
<li>System.Threadingï¼Œå¤šçº¿ç¨‹</li>
<li>System.Threading.Tasksï¼Œå¼‚æ­¥ç¼–ç¨‹</li>
</ul>
<h3 id="2-3-æ¨¡æ¿-vs-å®ä¾‹"><a href="#2-3-æ¨¡æ¿-vs-å®ä¾‹" class="headerlink" title="2.3. æ¨¡æ¿ vs å®ä¾‹"></a>2.3. æ¨¡æ¿ vs å®ä¾‹</h3><p>ç±»å‹å°±æ˜¯ç”¨æ¥åˆ›å»ºæ•°æ®ç»“æ„çš„ä¸€ç§ <strong>æ¨¡æ¿</strong>ï¼š</p>
<ul>
<li>ç±»å‹æœ¬èº«å¹¶ä¸æ˜¯çœŸæ­£çš„æ•°æ®ï¼Œå®ƒåªæ˜¯æè¿°äº†æ•°æ®åº”è¯¥æ€ä¹ˆè¢«æ„é€ å‡ºæ¥</li>
<li>ç±»å‹å®ƒéœ€è¦æœ‰åå­—ï¼Œå ç”¨çš„ç©ºé—´ï¼ŒåŒ…æ‹¬ä¸€ç³»åˆ—çš„å±æ€§å’Œè¡Œä¸º</li>
</ul>
<p>é€šè¿‡æŸä¸ªç±»å‹æ¨¡æ¿åˆ›å»ºå®é™…çš„å¯¹è±¡ï¼Œç§°ä½œ <strong>å®ä¾‹åŒ–</strong> è¯¥ç±»å‹:</p>
<ul>
<li>å®ƒå°±æ˜¯çœŸæ­£çš„æ•°æ®ã€‚ç±»å‹çš„å®ä¾‹ï¼Œç±»å‹çš„å¯¹è±¡ã€‚æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯è¦æ ¹æ®ç±»å‹åˆ›å»ºå‡ºæ¥çš„</li>
<li>ç±»å‹çš„è¯ï¼Œè¦ä¹ˆæ˜¯å¹³å°é¢„å®šä¹‰çš„ï¼Œè¦ä¹ˆæ˜¯ BCL&#x2F;FCL ä¸­å®šä¹‰çš„ï¼Œè¦ä¹ˆæ˜¯ä½ è‡ªå·±å£°æ˜çš„</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 å£°æ˜</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">xxx</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> age;</span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">yyy</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> i;</span><br><span class="line">    xxx xxx; <span class="comment">// 2 ä½¿ç”¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> yyy(); <span class="comment">// 2 ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> a = <span class="number">333</span>; <span class="comment">// ä¸éœ€è¦å£°æ˜ï¼Œç›´æ¥å®ä¾‹åŒ–</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-å€¼ç±»å‹-vs-å¼•ç”¨ç±»å‹"><a href="#2-4-å€¼ç±»å‹-vs-å¼•ç”¨ç±»å‹" class="headerlink" title="2.4. å€¼ç±»å‹ vs å¼•ç”¨ç±»å‹"></a>2.4. å€¼ç±»å‹ vs å¼•ç”¨ç±»å‹</h3><p>å†…å­˜åˆ†ä¸ºä¸¤éƒ¨åˆ†:</p>
<ul>
<li>æ ˆ (Stack)ï¼Œé€Ÿåº¦å¿«</li>
<li>å † (Heap)ï¼Œå®¹ç§¯å¤§</li>
</ul>
<p><img src="http://yaoqisan.local:7373/html/dotnet/img/value-type-ref-type.png" alt="value-type-ref-type.png"></p>
<h2 id="3-é¢„å®šä¹‰æ•°å€¼ç±»å‹"><a href="#3-é¢„å®šä¹‰æ•°å€¼ç±»å‹" class="headerlink" title="3. é¢„å®šä¹‰æ•°å€¼ç±»å‹"></a>3. é¢„å®šä¹‰æ•°å€¼ç±»å‹</h2><h3 id="3-1-æ•´æ•°"><a href="#3-1-æ•´æ•°" class="headerlink" title="3.1. æ•´æ•°"></a>3.1. æ•´æ•°</h3><p>ä¸ºäº†è¡¨ç¤ºæ˜¾ç¤ºä¸–ç•Œä¸­çš„è®¡ç®—ï¼Œäººä»¬å‘æ˜äº†æ•°å­—çš„è®°æ³•:</p>
<ul>
<li>é€šç”¨çš„è®¡ç®—æ–¹å¼æ˜¯ <strong>åè¿›åˆ¶</strong> (å› ä¸ºäººè‡ªå¤æ¥æ¥ï¼Œéƒ½æœ‰åæ ¹æ‰‹æŒ‡å¤´)</li>
<li>è®¡ç®—æœºå†…éƒ¨ä½¿ç”¨çš„æ˜¯ <strong>äºŒè¿›åˆ¶</strong> (å› ä¸ºä½¿ç”¨ç”µå­å…ƒä»¶çŠ¶æ€è¡¨è¾¾ 0&#x2F;1 æ˜¯æœ€ç®€å•çš„)</li>
<li>äººä»¬ä¸€èˆ¬ä½¿ç”¨ <strong>åå…­è¿›åˆ¶</strong> æ¥æè¿°è®¡ç®—æœºä¸­çš„äºŒè¿›åˆ¶ (å…¶è¡¨è¾¾èƒ½åŠ›æ›´å¼ºï¼Œä¸”èƒ½è·Ÿå­—èŠ‚ä¸ºå•ä½çš„äºŒè¿›åˆ¶å½¢æˆå¯¹åº”å…³ç³»)</li>
</ul>
<p>ä¸ºäº†èƒ½åœ¨è®¡ç®—æœºä¸­æœ‰æ•ˆå­˜å‚¨æ•´æ•°ï¼ŒC# ä¸­é¢„å®šä¹‰äº†å¦‚ä¸‹ç±»å‹:</p>
<ul>
<li>byte (å­—èŠ‚ï¼Œä½¿ç”¨ 8bit è¡¨ç¤ºï¼Œå®ƒçš„è¡¨ç°èƒ½åŠ›æœ€å·®ï¼Œåªæœ‰ 0 ~ 255)</li>
<li>short (çŸ­æ•´æ•°ï¼Œä½¿ç”¨ 2Byte è¡¨ç¤ºï¼Œèƒ½è¡¨ç¤ºåˆ° 3 ä¸‡å¤§å°)</li>
<li>int (æ•´æ•°ï¼Œ4B é•¿åº¦ï¼Œèƒ½è¡¨è¾¾åˆ° 20 å¤šäº¿)</li>
<li>long (é•¿æ•´æ•°ï¼Œ16B é•¿åº¦ï¼Œèƒ½è¡¨è¾¾åˆ°äº¿äº¿çš„å•ä½)</li>
</ul>
<p>å¦å¤–ï¼Œè€ƒè™‘æ˜¯å¦è®¾ç½®ç¬¦å·ä½ (Sign&#x2F;Unsign)ï¼Œä¸Šé¢çš„ç±»å‹åˆæœ‰å¯¹åº”çš„ç±»å‹:</p>
<ul>
<li>sbyte</li>
<li>ushort</li>
<li>uint</li>
<li>ulong</li>
</ul>
<p>ä¸Šè¿°çš„ç±»å‹éƒ½æ˜¯ç”¨æ¥åˆ›å»ºæ•´æ•°æ•°æ®çš„æ¨¡æ¿ï¼Œå®ƒä»¬çš„åŒºåˆ«åœ¨äºå ç”¨ç©ºé—´å’Œè¡¨è¾¾é‡Œã€‚ é€‰æ‹©ç±»å‹çš„æ ¹æ®æ˜¯:</p>
<ul>
<li>å ç”¨å°çš„ï¼Œè¡¨è¾¾èƒ½åŠ›å·®ï¼›å ç”¨å¤§çš„ï¼Œè¡¨è¾¾èƒ½åŠ›å¼º</li>
<li>åœ¨ä¸šåŠ¡çš„å…è®¸èŒƒå›´å†…ï¼Œå°½é‡é€‰æ‹©å ç”¨ç©ºé—´å°çš„ç±»å‹</li>
<li>å¦‚æœä¸å¥½å†³å®šä½¿ç”¨å£°æ˜ç±»å‹ï¼Œä¼˜å…ˆä½¿ç”¨ int</li>
</ul>
<p>æ•´æ•°:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">byte</span> aa = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">byte</span> az = <span class="number">255</span>;</span><br><span class="line"><span class="built_in">sbyte</span> ba = <span class="number">-128</span>;</span><br><span class="line"><span class="built_in">sbyte</span> bz = <span class="number">127</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">short</span> s1 = <span class="number">-32768</span>;</span><br><span class="line"><span class="built_in">short</span> s2 = <span class="number">32767</span>;</span><br><span class="line"><span class="built_in">ushort</span> s3 = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">ushort</span> s4 = <span class="number">65535</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> i1 = <span class="number">-2147483648</span>;</span><br><span class="line"><span class="built_in">int</span> i2 = <span class="number">21</span>_4748_3647;</span><br><span class="line"><span class="built_in">uint</span> i3 = <span class="number">42</span>_9496_7295;</span><br><span class="line"></span><br><span class="line"><span class="built_in">long</span> l1 = <span class="number">3232323232335555355</span>;</span><br><span class="line"><span class="built_in">ulong</span> l2 = <span class="number">23333333333333333</span>;</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="number">0.1</span> + <span class="number">0.2</span>);</span><br><span class="line">Console.WriteLine(<span class="number">100</span> * <span class="number">0.28</span>);</span><br><span class="line">Console.WriteLine(<span class="number">100</span> * <span class="number">0.27</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">byte</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">short</span> b = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">int</span> c = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">long</span> d = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// C# ç°åœ¨å…è®¸ä½¿ç”¨åˆ†éš”ç¬¦æè¿°æ•°å­—ï¼Œè¿™æ ·å…·å¤‡æ›´å¥½çš„å¯è¯»æ€§</span></span><br><span class="line"><span class="built_in">long</span> xxx = <span class="number">11</span>_1161_1311_4441_2323;</span><br><span class="line"><span class="built_in">int</span> yyy = <span class="number">2323</span>;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶&#x2F;åå…­è¿›åˆ¶çš„æ–¹å¼æè¿°æ•°å­—:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">byte</span> zzz = <span class="number">0b11111111</span>;</span><br><span class="line">Console.WriteLine(zzz);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 16 è¿›åˆ¶ 10 2 </span></span><br><span class="line"><span class="comment">// 0,1,10,11,100,101,110,111</span></span><br><span class="line"><span class="comment">// 1,2,..9,10,11,12..19</span></span><br><span class="line"><span class="comment">// 1, 2,...9, a, b, c, d, e, f / 15, 1111</span></span><br><span class="line"><span class="comment">// 10, 11, 12 .. 1e, 1f     0001_1111</span></span><br><span class="line"><span class="comment">// 20,...............2f</span></span><br><span class="line"><span class="comment">// 30................3f</span></span><br><span class="line"><span class="comment">//                   9f</span></span><br><span class="line"><span class="comment">// a0................af</span></span><br><span class="line"><span class="comment">// b0................bf</span></span><br><span class="line"><span class="comment">// c0................cf</span></span><br><span class="line"><span class="comment">// d0................df</span></span><br><span class="line"><span class="comment">// e0................ef</span></span><br><span class="line"><span class="comment">// f0..............fe.ff 256 1111_1111</span></span><br><span class="line"><span class="comment">// 100 .. 101. .....</span></span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="number">0b11111111</span>_11111110_11111111);</span><br><span class="line">Console.WriteLine(<span class="number">0x1e</span>);</span><br><span class="line">Console.WriteLine(<span class="number">0xff</span>_fe_ab_12);</span><br><span class="line">Console.WriteLine(<span class="number">2222323</span>);</span><br></pre></td></tr></table></figure>

<p><img src="http://yaoqisan.local:7373/html/dotnet/img/integers.png" alt="integers.png"></p>
<h3 id="3-2-æµ®ç‚¹æ•°"><a href="#3-2-æµ®ç‚¹æ•°" class="headerlink" title="3.2. æµ®ç‚¹æ•°"></a>3.2. æµ®ç‚¹æ•°</h3><ul>
<li><p>æ ¹æ®å­˜å‚¨å½¢å¼ï¼Œåˆ†ä¸ºå•ç²¾åº¦ (float) å’ŒåŒç²¾åº¦ (double)</p>
</li>
<li><p><strong>float</strong> ä½¿ç”¨ 32bit æ¥å­˜å‚¨ (1 ä¸ªç¬¦å·ä½ 8 ä¸ªæŒ‡æ•°ä½ 23 ä¸ªå°¾æ•°)</p>
</li>
<li><p><strong>double</strong> ä½¿ç”¨ 64bit æ¥å­˜å‚¨ (1 ä¸ªç¬¦å·ä½ 11 ä¸ªæŒ‡æ•°ä½ 52 ä¸ªå°¾æ•°)</p>
</li>
<li><p>ä¸€ä¸ªå°æ•°ï¼Œè½¬æ¢ä¸ºè®¡ç®—æœºå­˜å‚¨çš„å½¢å¼ï¼Œéš¾å…ä¼šæœ‰ç²¾åº¦çš„æŸå¤±ã€‚å› æ­¤</p>
<ul>
<li>0.1 + 0.2 â‰  0.3</li>
<li>0.6 + 0.7 &#x3D; 1.2999999999999998</li>
<li>0.28 * 100 &#x3D; 28.000000000000004</li>
</ul>
</li>
<li><p>å¯ä»¥ä½¿ç”¨</p>
<p>decimal</p>
<p>ç±»å‹ï¼Œæ¥è¡¨ç¤ºæ›´åŠ ç²¾ç¡®çš„æ•°å€¼è®¡ç®—</p>
<ul>
<li>å®ƒçš„ä¼˜ç‚¹æ˜¯ï¼Œå¯ä»¥è¿›è¡Œç²¾ç¡®çš„è®¡ç®—</li>
<li>å®ƒçš„ç¼ºç‚¹æ˜¯ï¼Œå®ƒéœ€è¦å ç”¨æ›´å¤§çš„å­˜å‚¨ç©ºé—´ (128bit)</li>
</ul>
</li>
</ul>
<p><img src="http://yaoqisan.local:7373/html/dotnet/img/float-type.png" alt="float-type.png"></p>
<h3 id="3-3-Literate-å­—é¢é‡è¡¨è¾¾"><a href="#3-3-Literate-å­—é¢é‡è¡¨è¾¾" class="headerlink" title="3.3. Literate (å­—é¢é‡è¡¨è¾¾)"></a>3.3. Literate (å­—é¢é‡è¡¨è¾¾)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­—é¢é‡</span></span><br><span class="line"><span class="comment">// 1112 int</span></span><br><span class="line"><span class="comment">// 1112L long</span></span><br><span class="line"><span class="comment">// 1112UL Unsigned Long</span></span><br><span class="line"><span class="comment">// 1112F float</span></span><br><span class="line"><span class="comment">// 1112.0 double</span></span><br><span class="line"><span class="comment">// 1112M decimal</span></span><br><span class="line">Console.WriteLine(<span class="number">0.1</span>M + <span class="number">0.2</span>M);</span><br><span class="line"></span><br><span class="line"><span class="built_in">double</span> a = <span class="number">2222</span>;</span><br><span class="line"><span class="built_in">float</span> b1 = <span class="number">33332332323233</span>;</span><br><span class="line"><span class="built_in">float</span> b2 = <span class="number">2323F</span>;</span><br><span class="line"><span class="built_in">decimal</span> c = <span class="number">3.222</span>M;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> x = <span class="number">333</span>;</span><br><span class="line"><span class="built_in">long</span> y1 = <span class="number">54444</span>;</span><br><span class="line"><span class="built_in">long</span> y2 = <span class="number">54444L</span>;</span><br></pre></td></tr></table></figure>

<h2 id="4-é¢„å®šä¹‰-x2F-éæ•°å€¼Â·å€¼ç±»å‹"><a href="#4-é¢„å®šä¹‰-x2F-éæ•°å€¼Â·å€¼ç±»å‹" class="headerlink" title="4. é¢„å®šä¹‰&#x2F;éæ•°å€¼Â·å€¼ç±»å‹"></a>4. é¢„å®šä¹‰&#x2F;éæ•°å€¼Â·å€¼ç±»å‹</h2><h3 id="4-1-å­—ç¬¦ç±»å‹-char"><a href="#4-1-å­—ç¬¦ç±»å‹-char" class="headerlink" title="4.1. å­—ç¬¦ç±»å‹ (char)"></a>4.1. å­—ç¬¦ç±»å‹ (char)</h3><p>å­—ç¬¦é›†&#x2F;ç¼–ç æ ¼å¼:</p>
<ul>
<li>æœ€åŸå§‹çš„è‹±æ–‡ä¸­çš„ <strong>ASCII</strong> ç¼–ç </li>
<li>åæ¥å‡ºç°çš„ï¼Œå„ä¸ªå›½å®¶çš„ï¼Œæ¯”å¦‚ <strong>GBK&#x2F;Big5</strong></li>
<li>ä¸ºäº†æ¶ˆé™¤å­—ç¬¦é›†å†²çªï¼Œå‡ºç°çš„ <strong>Unicode</strong> ç»„ç»‡è·Ÿå­—ç¬¦é›†ã€‚å¹¶æ ¹æ®å­—ç¬¦é›†å‡ºç°äº† <strong>UTF-16&#x2F;UTF-8</strong> ç­‰ç¼–ç æ ¼å¼</li>
</ul>
<p>Q &amp; A:</p>
<ul>
<li>ucs-2 vs UTF-16 ????</li>
<li>UTF8 æ€ä¹ˆçš„æ ¼å¼ ????</li>
</ul>
<p><img src="http://yaoqisan.local:7373/html/dotnet/img/unicode.png" alt="unicode.png"></p>
<p>å› æ­¤ï¼Œåœ¨ C# ä¸­å†…éƒ¨ï¼Œå­—ç¬¦æ˜¯ä½¿ç”¨ UTF-16 æ ¼å¼å­˜å‚¨çš„ã€‚</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">char</span> a = <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">char</span> a = <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line"><span class="built_in">char</span> b = <span class="string">&#x27;ä¸­&#x27;</span>;</span><br><span class="line"><span class="built_in">char</span> c = <span class="string">&#x27;â˜º&#x27;</span>;</span><br><span class="line"><span class="built_in">char</span> d = <span class="string">&#x27;â&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-å¸ƒå°”ç±»å‹-bool"><a href="#4-2-å¸ƒå°”ç±»å‹-bool" class="headerlink" title="4.2. å¸ƒå°”ç±»å‹ (bool)"></a>4.2. å¸ƒå°”ç±»å‹ (bool)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> a = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">bool</span> b = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> c = <span class="number">1</span> &gt; <span class="number">2</span>; <span class="comment">// &gt; &lt; == &gt;= &lt;=</span></span><br><span class="line"><span class="built_in">bool</span> d = <span class="number">1</span> == <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">a = !!!!!a; <span class="comment">// å</span></span><br><span class="line">a || b;     <span class="comment">// æˆ–</span></span><br><span class="line">a &amp;&amp; b;     <span class="comment">// ä¸</span></span><br><span class="line"></span><br><span class="line">a = <span class="literal">true</span>; b = <span class="literal">false</span>; d = <span class="literal">true</span>; e = <span class="literal">false</span>;</span><br><span class="line">f = <span class="literal">true</span>; g = <span class="literal">true</span>; h = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">((a || b) &amp;&amp; (c &amp;&amp; d)) || e &amp;&amp; (f || g) || h;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-1-æ¡ä»¶åˆ†æ”¯-åœ¨æŸç§æ¡ä»¶ä¹‹ä¸‹ï¼ŒåšæŸä»¶äº‹"><a href="#4-2-1-æ¡ä»¶åˆ†æ”¯-åœ¨æŸç§æ¡ä»¶ä¹‹ä¸‹ï¼ŒåšæŸä»¶äº‹" class="headerlink" title="4.2.1. [æ¡ä»¶åˆ†æ”¯] åœ¨æŸç§æ¡ä»¶ä¹‹ä¸‹ï¼ŒåšæŸä»¶äº‹"></a>4.2.1. [æ¡ä»¶åˆ†æ”¯] åœ¨æŸç§æ¡ä»¶ä¹‹ä¸‹ï¼ŒåšæŸä»¶äº‹</h4><ul>
<li>if&#x2F;else if&#x2F;else</li>
<li>switch (statement&#x2F;expression)</li>
</ul>
<p>if:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="keyword">if</span> (aaa)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;æ»¡è¶³åˆ™æ‰§è¡Œï¼Œå¦åˆ™è·³è¿‡&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;æ‚¨è¯´æˆ‘ä»€ä¹ˆæ¡ä»¶ä¼šè¢«æ‰§è¡Œ?&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="built_in">int</span> score = <span class="number">59</span>; <span class="comment">// åˆ†æ•°</span></span><br><span class="line"><span class="keyword">if</span> (score &gt; <span class="number">70</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;ç°åœ¨ä½ çš„æˆç»©æ˜¯: <span class="subst">&#123;score&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;æ‚¨çš„æˆç»©è¿˜å¯ä»¥å•¦ï¼Œè¯·ä¸‹ä¸€æ¬¡æ›´åŠ ä¼˜ç§€å“¦.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="built_in">int</span> score = <span class="number">59</span>;</span><br><span class="line"><span class="keyword">if</span> (score &gt; <span class="number">70</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;ç°åœ¨ä½ çš„æˆç»©æ˜¯: <span class="subst">&#123;score&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (score &lt; <span class="number">30</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æ‚¨å¤ªæ£’äº†ï¼ŒæŠŠæ‚¨çˆ¸çˆ¸å¦ˆå¦ˆè¯·è¿‡æ¥ä¸€èµ·åˆ†äº«è¿™ä»½è£è€€å§.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (score &gt; <span class="number">60</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;æ‚¨çš„æˆç»©è¿˜å¯ä»¥å•¦ï¼Œè¯·ä¸‹ä¸€æ¬¡æ›´åŠ ä¼˜ç§€å“¦.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;æ‚¨çš„æˆç»©è¿˜å¯ä»¥å•¦...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4</span></span><br><span class="line"><span class="keyword">if</span> (score &gt; <span class="number">70</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;ç°åœ¨ä½ çš„æˆç»©æ˜¯: <span class="subst">&#123;score&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (score &gt; <span class="number">60</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;æ‚¨çš„æˆç»©è¿˜å¯ä»¥å•¦ï¼Œè¯·ä¸‹ä¸€æ¬¡æ›´åŠ ä¼˜ç§€å“¦.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (score &gt; <span class="number">30</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;æ‚¨çš„æˆç»©è¿˜å¯ä»¥å•¦...&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;æ‚¨å¤ªæ£’äº†ï¼ŒæŠŠæ‚¨çˆ¸çˆ¸å¦ˆå¦ˆè¯·è¿‡æ¥ä¸€èµ·åˆ†äº«è¿™ä»½è£è€€å§.&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>switch (æ˜¯ else if è¯­æ³•çš„ä¸€ç§ç²¾ç®€ç‰ˆ):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">switch (c)</span><br><span class="line">&#123;</span><br><span class="line">    case &#x27;A&#x27;:</span><br><span class="line">    case &#x27;B&#x27;:</span><br><span class="line">        color = ConsoleColor.Yellow;</span><br><span class="line">        break;</span><br><span class="line">    case &#x27;C&#x27;:</span><br><span class="line">        color = ConsoleColor.Green;</span><br><span class="line">        break;</span><br><span class="line">    case &#x27;D&#x27;:</span><br><span class="line">        color = ConsoleColor.Blue;</span><br><span class="line">        break;</span><br><span class="line">    default:</span><br><span class="line">        color = ConsoleColor.Black;</span><br><span class="line">        break;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>switch statement (è¯­å¥) å’Œ expression (è¡¨è¾¾å¼):</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯­å¥ï¼Œæ¯ä¸ªåˆ†æ”¯å»åšç‚¹å•¥äº‹</span></span><br><span class="line">ConsoleColor color;</span><br><span class="line"><span class="keyword">switch</span> (c)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;A&#x27;</span>:</span><br><span class="line">        color = ConsoleColor.Red;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;B&#x27;</span>:</span><br><span class="line">        color = ConsoleColor.Yellow;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;C&#x27;</span>:</span><br><span class="line">        color = ConsoleColor.Green;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;D&#x27;</span>:</span><br><span class="line">        color = ConsoleColor.Blue;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="literal">default</span>:</span><br><span class="line">        color = ConsoleColor.Black;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¡¨è¾¾å¼ï¼Œè¿”å›å€¼</span></span><br><span class="line">ConsoleColor c1 = c <span class="keyword">switch</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&#x27;A&#x27;</span> =&gt; ConsoleColor.Red,</span><br><span class="line">    <span class="string">&#x27;B&#x27;</span> =&gt; ConsoleColor.Yellow,</span><br><span class="line">    <span class="string">&#x27;C&#x27;</span> =&gt; ConsoleColor.Green,</span><br><span class="line">    <span class="string">&#x27;D&#x27;</span> =&gt; ConsoleColor.Blue,</span><br><span class="line">    _   =&gt; ConsoleColor.Black</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-2-å¾ªç¯è¿­ä»£-é‡å¤åšæŸä»¶äº‹"><a href="#4-2-2-å¾ªç¯è¿­ä»£-é‡å¤åšæŸä»¶äº‹" class="headerlink" title="4.2.2. [å¾ªç¯è¿­ä»£] é‡å¤åšæŸä»¶äº‹"></a>4.2.2. [å¾ªç¯è¿­ä»£] é‡å¤åšæŸä»¶äº‹</h4><ul>
<li>for</li>
<li>while</li>
<li>do while</li>
<li>foreach</li>
</ul>
<p>éå†å­—ç¬¦ä¸²:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> s = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> c <span class="keyword">in</span> s)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; s.Length; i++)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(s[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; s.Length)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(s[i]);</span><br><span class="line">    i++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> j = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(s[j]);</span><br><span class="line">    j++;</span><br><span class="line">&#125; <span class="keyword">while</span> (j &lt; s.Length);</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ä¸åŒçš„æ–¹å¼ï¼Œå®ç°ä» 1 åŠ åˆ° 10000 çš„å’Œ:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘½åä¸è§„èŒƒ</span></span><br><span class="line"><span class="comment">// - æ–¹æ³•åï¼Œéœ€è¦éµå¾ª Pascal è¯­æ³• !!!</span></span><br><span class="line"><span class="comment">// - å˜é‡çš„å‘½åï¼Œè¦è®©ä»£ç å…·å¤‡è‡ªè§£é‡Šæ€§ (æœ›æ–‡ç”Ÿä¹‰)</span></span><br><span class="line"><span class="comment">// - å˜é‡çš„åå­—/å‚æ•°çš„å˜é‡ï¼Œéœ€è¦æ˜¯é©¼å³°å†™æ³•</span></span><br><span class="line"><span class="comment">// ä» 1 åˆ° 10000 &lt;ä¸ç­‰äº&gt; ä» 0 åˆ° 10000ã€‚å¾ªç¯çš„è¿‡ç¨‹ä¸€å®šè¦æ³¨æ„è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line"><span class="comment">// åˆç†è®¾è®¡æ–¹æ³• (è¿”å›å€¼)</span></span><br><span class="line"><span class="comment">// å……åˆ†è€ƒè™‘åˆ°å¯å˜æ€§ï¼Œå°†ä¸€äº›å€¼æŠ½å–ä¸ºå‚æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> i = <span class="number">10000</span>;</span><br><span class="line">    Console.WriteLine(SumWithFor(i) / <span class="number">2</span>);</span><br><span class="line">    Console.WriteLine(SumWithWhile(i));</span><br><span class="line">    Console.WriteLine(SumWithDoWhile(i));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">SumWithFor</span>(<span class="params"><span class="built_in">int</span> top</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt;= top; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        sum += i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">SumWithWhile</span>(<span class="params"><span class="built_in">int</span> top</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= top)</span><br><span class="line">    &#123;</span><br><span class="line">        sum += i;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">SumWithDoWhile</span>(<span class="params"><span class="built_in">int</span> top</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        sum += i;</span><br><span class="line">        i++;</span><br><span class="line">    &#125; <span class="keyword">while</span> (i &lt;= top);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡å¾ªç¯çš„æ–¹å¼ï¼Œå¤„ç†ä¸‹é¢å­—ç¬¦ä¸²:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†å­—ç¬¦ä¸²è¿›è¡Œåè½¬</span></span><br><span class="line"><span class="comment">// å°†æ‰€æœ‰çš„å¤§å†™å­—æ¯éƒ½æåˆ°å‰é¢</span></span><br><span class="line"><span class="built_in">string</span> a = <span class="string">&quot;hekjsdkfSldAfjKksjsjkKFfjHkl&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="built_in">string</span> <span class="title">Fanzhuan</span>(<span class="params"><span class="built_in">string</span> str</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">string</span> result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = str.Length<span class="number">-1</span>; i&gt;=<span class="number">0</span> ; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        result += str[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="built_in">string</span> <span class="title">DaxieTiDaoQianMianWithFor</span>(<span class="params"><span class="built_in">string</span> str</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    StringBuilder xiaoxie = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    StringBuilder daxie = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; str.Length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (str[i] &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; str[i] &lt;= <span class="string">&#x27;z&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            xiaoxie.Append(str[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            daxie.Append(str[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    daxie.Append(xiaoxie);</span><br><span class="line">    <span class="keyword">return</span> daxie.ToString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-3-è¯­å¥-Statement-vs-è¡¨è¾¾å¼-Expression"><a href="#4-2-3-è¯­å¥-Statement-vs-è¡¨è¾¾å¼-Expression" class="headerlink" title="4.2.3. è¯­å¥ (Statement) vs è¡¨è¾¾å¼ (Expression)"></a>4.2.3. è¯­å¥ (Statement) vs è¡¨è¾¾å¼ (Expression)</h4><p>æé—®: è¡¨è¾¾å¼å’Œè¯­å¥æœ‰ç¤¾ä¹ˆåŒºåˆ«?</p>
<p>è¯­å¥ (Statement):</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> r = <span class="keyword">new</span> Random().Next(<span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> i;</span><br><span class="line"><span class="keyword">if</span> (r &gt; <span class="number">50</span>)</span><br><span class="line">    i = <span class="number">111</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    i = <span class="number">222</span>;</span><br><span class="line"></span><br><span class="line">Console.WriteLine(i);</span><br></pre></td></tr></table></figure>

<p>è¡¨è¾¾å¼ (Expression):</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> r = <span class="keyword">new</span> Random().Next(<span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> i = (</span><br><span class="line">    <span class="keyword">if</span> (r &gt; <span class="number">50</span>)</span><br><span class="line">        <span class="number">111</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="number">222</span>;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(i); <span class="comment">// if ä¸èƒ½ä½œä¸ºè¡¨è¾¾å¼ä½¿ç”¨</span></span><br></pre></td></tr></table></figure>

<h2 id="5-é¢„å®šä¹‰-x2F-éæ•°å€¼Â·å¼•ç”¨ç±»å‹"><a href="#5-é¢„å®šä¹‰-x2F-éæ•°å€¼Â·å¼•ç”¨ç±»å‹" class="headerlink" title="5. é¢„å®šä¹‰&#x2F;éæ•°å€¼Â·å¼•ç”¨ç±»å‹"></a>5. é¢„å®šä¹‰&#x2F;éæ•°å€¼Â·å¼•ç”¨ç±»å‹</h2><h3 id="5-1-string"><a href="#5-1-string" class="headerlink" title="5.1. string"></a>5.1. string</h3><p>å­—ç¬¦ä¸²ï¼Œæ˜¯ç”±å­—ç¬¦åºåˆ—ç»„æˆçš„ä¸€ç§æ•°æ®ç»“æ„ã€‚</p>
<h4 id="5-1-1-å­—ç¬¦ä¸²çš„åˆå§‹åŒ–"><a href="#5-1-1-å­—ç¬¦ä¸²çš„åˆå§‹åŒ–" class="headerlink" title="5.1.1. å­—ç¬¦ä¸²çš„åˆå§‹åŒ–"></a>5.1.1. å­—ç¬¦ä¸²çš„åˆå§‹åŒ–</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> g1 = <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line">System.String g2 = <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> g3 = <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> message1;</span><br><span class="line"><span class="built_in">string</span> message2 = <span class="literal">null</span>;</span><br><span class="line"><span class="built_in">string</span> message3 = String.Empty; <span class="comment">// string message3 = &quot;&quot;;</span></span><br><span class="line"><span class="built_in">string</span> oldPath = <span class="string">&quot;Path:\nc:\\Program Files\\Microsoft Visual Studio 8.0&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> newPath = <span class="string">@&quot;Path:</span></span><br><span class="line"><span class="string">c:\Program Files\Microsoft Visual Studio 9.0&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">char</span>[] letters = &#123; <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">string</span> alphabet = <span class="keyword">new</span> <span class="built_in">string</span>(letters);</span><br></pre></td></tr></table></figure>

<h4 id="5-1-2-å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§-Immutable"><a href="#5-1-2-å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§-Immutable" class="headerlink" title="5.1.2. å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§ (Immutable)"></a>5.1.2. å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§ (Immutable)</h4><h5 id="5-1-2-1-what-amp-why"><a href="#5-1-2-1-what-amp-why" class="headerlink" title="5.1.2.1. what &amp; why"></a>5.1.2.1. what &amp; why</h5><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> a;</span><br><span class="line"><span class="built_in">string</span> b;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> i = <span class="number">1</span>; <span class="comment">// int i; i = 1;</span></span><br><span class="line"><span class="built_in">int</span> j = <span class="number">23</span>;</span><br><span class="line">i += j; <span class="comment">// i = i + j; i = 24;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> s = <span class="string">&quot;h&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> t = <span class="string">&quot;w&quot;</span>;</span><br><span class="line">s += t; <span class="comment">// s = s + t;</span></span><br></pre></td></tr></table></figure>

<p><img src="http://yaoqisan.local:7373/html/dotnet/img/string-immute.png" alt="string-immute.png"></p>
<p>å­—ç¬¦ä¸²æ˜¯ä¸å¯æ›´æ”¹çš„:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string s = &quot;hello&quot;;</span><br><span class="line">Console.WriteLine(s[1]); // å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è¯»å–å­—ç¬¦ä¸²çš„æŸä¸ªä½ç½®</span><br><span class="line">s[1] = &#x27;x&#x27;;              // è¿™ä¸€å¥æ˜¯é”™è¯¯çš„</span><br></pre></td></tr></table></figure>

<p>æ€è€ƒ:</p>
<ul>
<li>ä¸ºä»€ä¹ˆè¦ææˆä¸å¯å˜çš„ ?</li>
<li>ä¸å¯å˜èƒ½å¸¦æ¥ä»€ä¹ˆå¥½å¤„ ?</li>
</ul>
<h5 id="5-1-2-2-System-Text-StringBuilder"><a href="#5-1-2-2-System-Text-StringBuilder" class="headerlink" title="5.1.2.2. System.Text.StringBuilder"></a>5.1.2.2. System.Text.StringBuilder</h5><p>è¿™æ˜¯ BCL ä¸­æä¾›çš„ä¸€ä¸ªç±»ï¼Œä¸“é—¨ä½¿ç”¨åœ¨ <strong>å­—ç¬¦ä¸²æ‹¼æ¥</strong> çš„åœºæ™¯ä¸‹ã€‚</p>
<p>å› ä¸ºï¼Œåœ¨é¢„å®šä¹‰çš„å­—ç¬¦ä¸²å®ç°ä¸­ï¼Œå­—ç¬¦ä¸²æ‹¼æ¥ (+&#x3D;) æ˜¯éå¸¸ä½æ•ˆçš„ä¸€ç§è¡Œä¸º (è¦å»ç†è§£ä¸ºä»€ä¹ˆ)ã€‚</p>
<p><img src="http://yaoqisan.local:7373/html/dotnet/img/string-vs-stringbuilder.png" alt="string-vs-stringbuilder.png"></p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£æä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆè¿™æ®µä»£ç ä¼šä¸ºå†…å­˜å¸¦æ¥å¤§é‡çš„åƒåœ¾</span></span><br><span class="line"><span class="built_in">string</span> s = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    s += <span class="string">&quot;.&quot;</span>;</span><br><span class="line">    Console.WriteLine(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦ç†è§£ï¼Œä¸ºä»€ä¹ˆ StringBuilder ä¼šå ç”¨æ›´å°‘çš„ç©ºé—´</span></span><br><span class="line"><span class="comment">// å¦‚ä½•ç†æ€§çœ‹å¾… String vs StringBuilder ä¸¤ç§ç±»å‹</span></span><br><span class="line">StringBuilder sb = <span class="keyword">new</span> StringBuilder(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    sb.Append(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">    Console.WriteLine(sb);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (s == sb.ToString())</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;å“ˆå“ˆï¼Œä¸€æ ·å•Š&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="5-1-2-3-String-Intern-Pool-å­—ç¬¦ä¸²æ± "><a href="#5-1-2-3-String-Intern-Pool-å­—ç¬¦ä¸²æ± " class="headerlink" title="5.1.2.3. String Intern Pool (å­—ç¬¦ä¸²æ± )"></a>5.1.2.3. String Intern Pool (å­—ç¬¦ä¸²æ± )</h5><p>å› ä¸ºå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥åœ¨å­—ç¬¦ä¸²çš„æ“ä½œä¸­ï¼Œä¼šäº§ç”Ÿå¾ˆå¤šä¸´æ—¶å­—ç¬¦ä¸² (åƒåœ¾)ã€‚</p>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæœ‰å¾ˆå¤šå­—ç¬¦ä¸²æˆ‘ä»¬ä¼šåå¤å»ä½¿ç”¨çš„ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…é‡å¤è¿›è¡Œå­—ç¬¦ä¸²çš„åˆ›å»ºï¼Œ ä¼šå¯¹å­—ç¬¦ä¸²æ“ä½œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„å­—ç¬¦ä¸²è¿›è¡Œç¼“å­˜ç®¡ç†ï¼Œå³åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²æ± ç®¡ç†å®ƒä»¬ã€‚</p>
<p>åç»­è¿›è¡Œå­—ç¬¦ä¸²çš„å£°æ˜æ—¶ï¼Œä¼šä¼˜å…ˆåˆ°æ± ä¸­å¯»æ‰¾ï¼Œå¦‚æœå·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨å®ƒã€‚</p>
<p>å­—ç¬¦ä¸²æ± çš„æ ¹æœ¬åŸå› æ˜¯ï¼Œå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ã€‚</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> a = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> b = <span class="string">&quot;hel&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> c = <span class="string">&quot;lo&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> d = b + c;</span><br><span class="line"><span class="built_in">string</span> e = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ == åˆ¤æ–­ï¼Œä¸¤ä¸ªå­—ç¬¦ä¸²çš„å€¼æ˜¯ä¸æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">Console.WriteLine(a == d); <span class="comment">// True</span></span><br><span class="line">Console.WriteLine(a == e); <span class="comment">// True</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ object.ReferenceEquals åˆ¤å®šæ˜¯å¦å ç”¨äº†ç›¸åŒçš„å†…å­˜ç©ºé—´</span></span><br><span class="line">Console.WriteLine(<span class="built_in">object</span>.ReferenceEquals(a, d)); <span class="comment">// False</span></span><br><span class="line">Console.WriteLine(<span class="built_in">object</span>.ReferenceEquals(a, e)); <span class="comment">// True</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼Œç±»æ¯” Java:</span></span><br><span class="line"><span class="comment">// a == b åˆ¤æ–­çš„æ˜¯ a è·Ÿ b æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¼•ç”¨</span></span><br><span class="line"><span class="comment">// a.equals(b) ç”¨æ¥åˆ¤æ–­ a è·Ÿ b çš„å€¼æ˜¯ä¸æ˜¯ä¸€æ ·çš„</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// string a = null;</span></span><br><span class="line"><span class="comment">// string b = &quot;hello&quot;;</span></span><br><span class="line"><span class="comment">// a.equals(b) -&gt; b.equals(a);</span></span><br><span class="line"><span class="comment">// &quot;hello&quot;.equal(a); (1)</span></span><br><span class="line"><span class="comment">// if (a != null) a.equal(&quot;hello&quot;); (2)</span></span><br></pre></td></tr></table></figure>

<h4 id="5-1-3-API-åŸºæœ¬æ“ä½œ"><a href="#5-1-3-API-åŸºæœ¬æ“ä½œ" class="headerlink" title="5.1.3. [API] åŸºæœ¬æ“ä½œ"></a>5.1.3. [API] åŸºæœ¬æ“ä½œ</h4><p>API (Application Programming Interface) åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ã€‚</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> s1 = <span class="string">&quot;aaa&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> s2 = <span class="string">&quot;æ‚¨å¥½aaa&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> s3 = <span class="string">&quot;ğ ˆ“å¥½aaa&quot;</span>;</span><br><span class="line"></span><br><span class="line">Console.WriteLine(s1.Length); <span class="comment">// ç”±å¤šå°‘ä¸ªå­—ç¬¦ç»„æˆ</span></span><br><span class="line">Console.WriteLine(s2.Length);</span><br><span class="line">Console.WriteLine(s3.Length); <span class="comment">// è¿™ä¸ªä¸ºä»€ä¹ˆæ˜¯ 6 ?</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> s4 = <span class="string">&quot;ä¸­å›½ğ ˆ“æ‚¨å¥½ğ ˆ“blahblaahä¸­åğ ˆ“ä½ ä»¬éƒ½æ˜¯å•¥kdjfkdjkdfdkjlahä¸­åğ ˆ“ä½ ä»¬éƒ½æ˜¯å•¥kdjfkdjkdfdkjlahä¸­åğ ˆ“ä½ ä»¬éƒ½æ˜¯å•¥kdjfkdjkdfdkjlahä¸­åğ ˆ“ä½ ä»¬éƒ½æ˜¯å•¥kdjfkdjkdfdkjlahä¸­åğ ˆ“ä½ ä»¬éƒ½æ˜¯å•¥kdjfkdjkdfdkjlahä¸­åğ ˆ“ä½ ä»¬éƒ½æ˜¯å•¥kdjfkdjkdfdkjlahä¸­åğ ˆ“ä½ ä»¬éƒ½æ˜¯å•¥kdjfkdjkdfdkjlahä¸­åğ ˆ“ä½ ä»¬éƒ½æ˜¯å•¥kdjfkdjkdfdkjlahä¸­åğ ˆ“ä½ ä»¬éƒ½æ˜¯å•¥kdjfkdjkdfdkjf&quot;</span>;</span><br><span class="line">Console.WriteLine(s4.Length);</span><br><span class="line">Console.WriteLine(<span class="keyword">new</span> StringInfo(s4).LengthInTextElements);</span><br></pre></td></tr></table></figure>

<h4 id="5-1-4-API-æ‹¼æ¥-æ ¼å¼åŒ–"><a href="#5-1-4-API-æ‹¼æ¥-æ ¼å¼åŒ–" class="headerlink" title="5.1.4. [API] æ‹¼æ¥ + æ ¼å¼åŒ–"></a>5.1.4. [API] æ‹¼æ¥ + æ ¼å¼åŒ–</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> name = <span class="string">&quot;tom&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> friend = <span class="string">&quot;jerry&quot;</span>;</span><br><span class="line"><span class="built_in">int</span> age = <span class="number">30</span>;</span><br><span class="line"><span class="built_in">decimal</span> sal = <span class="number">200.12345</span>M;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> r1 = name + <span class="string">&quot;çš„æœ‹å‹æ˜¯&quot;</span></span><br><span class="line">                 + friend + <span class="string">&quot;ï¼Œå®ƒè™½ç„¶åªæœ‰&quot;</span></span><br><span class="line">                 + age + <span class="string">&quot;å²ï¼Œä½†æ˜¯å®ƒçš„æ”¶å…¥èƒ½åˆ°è¾¾åˆ°&quot;</span></span><br><span class="line">                 + sal + <span class="string">&quot;åˆ€&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> r2 = <span class="keyword">new</span> StringBuilder()</span><br><span class="line">    .Append(name)</span><br><span class="line">    .Append(<span class="string">&quot;çš„æœ‹å‹æ˜¯&quot;</span>)</span><br><span class="line">    .Append(friend)</span><br><span class="line">    .Append(<span class="string">&quot;ï¼Œå®ƒè™½ç„¶åªæœ‰&quot;</span>)</span><br><span class="line">    .Append(age)</span><br><span class="line">    .Append(<span class="string">&quot;å²ï¼Œä½†æ˜¯å®ƒçš„æ”¶å…¥èƒ½åˆ°è¾¾åˆ°&quot;</span>)</span><br><span class="line">    .Append(sal)</span><br><span class="line">    .Append(<span class="string">&quot;åˆ€&quot;</span>)</span><br><span class="line">    .ToString();</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> r3 = <span class="built_in">string</span>.Format(<span class="string">&quot;&#123;0&#125;çš„æœ‹å‹æ˜¯&#123;1&#125;ï¼Œå®ƒè™½ç„¶åªæœ‰&#123;2&#125;å²ï¼Œä½†æ˜¯å®ƒçš„æ”¶å…¥è¾¾åˆ°&#123;3:C&#125;&quot;</span>, name, friend, age, sal);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123;å˜é‡,å¯¹é½å¤šå°‘é•¿åº¦:æ ¼å¼&#125;</span></span><br><span class="line"><span class="comment">// [å¯¹é½] æ­£æ•°è¡¨ç¤ºå³å¯¹é½ï¼Œè´Ÿæ•°è¡¨ç¤ºå·¦å¯¹é½</span></span><br><span class="line"><span class="comment">// [æ ¼å¼] P ç™¾åˆ†æ¯” C è´§å¸ E ç§‘å­¦è®¡æ•°æ³• D è¡¥é½é•¿åº¦ F/N å°æ•°ç‚¹å¤šå°‘ä½ X åå…­è¿›åˆ¶</span></span><br><span class="line"><span class="built_in">string</span> r4 = <span class="string">$&quot;<span class="subst">&#123;name&#125;</span>çš„æœ‹å‹æ˜¯<span class="subst">&#123;friend&#125;</span>ï¼Œå®ƒè™½ç„¶åªæœ‰<span class="subst">&#123;age:d5&#125;</span>å²ï¼Œä½†æ˜¯å®ƒçš„æ”¶å…¥è¾¾åˆ°<span class="subst">&#123;sal:C&#125;</span>!&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯­è¨€-å›½å®¶æˆ–åŒºåŸŸ</span></span><br><span class="line"><span class="comment">// zh-CN</span></span><br><span class="line"><span class="comment">// en-US</span></span><br><span class="line"><span class="comment">// en-EN</span></span><br><span class="line"><span class="built_in">string</span> ss = sal.ToString(<span class="string">&quot;C&quot;</span>, <span class="keyword">new</span> CultureInfo(<span class="string">&quot;en-US&quot;</span>));</span><br><span class="line"><span class="built_in">string</span> r5 = <span class="string">$&quot;<span class="subst">&#123;name&#125;</span>çš„æœ‹å‹æ˜¯<span class="subst">&#123;friend&#125;</span>ï¼Œå®ƒè™½ç„¶åªæœ‰<span class="subst">&#123;age:d5&#125;</span>å²ï¼Œä½†æ˜¯å®ƒçš„æ”¶å…¥è¾¾åˆ°<span class="subst">&#123;ss&#125;</span>!&quot;</span>;</span><br><span class="line"></span><br><span class="line">Console.WriteLine(r5);</span><br></pre></td></tr></table></figure>

<h4 id="5-1-5-API-å­å­—ç¬¦ä¸²"><a href="#5-1-5-API-å­å­—ç¬¦ä¸²" class="headerlink" title="5.1.5. [API] å­å­—ç¬¦ä¸²"></a>5.1.5. [API] å­å­—ç¬¦ä¸²</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> s1 = <span class="string">&quot;000oã€‚OOOoOO0O0Ooo000o&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–</span></span><br><span class="line"><span class="built_in">char</span> c = s1[<span class="number">1</span>]; <span class="comment">// å–å­—ç¬¦</span></span><br><span class="line"><span class="built_in">string</span> s2 = s1.Substring(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// ä½ç½®ï¼Œé•¿åº¦ : el</span></span><br><span class="line"><span class="built_in">string</span> s3 = s1.Substring(<span class="number">2</span>);    <span class="comment">// ä»æŸä¸ªä½ç½®åˆ°æœ€å</span></span><br><span class="line"><span class="built_in">string</span> s4 = s1.Substring(<span class="number">2</span>, <span class="number">0</span>); <span class="comment">// String.Empty &quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤</span></span><br><span class="line"><span class="built_in">bool</span> b1 = s1.Contains(<span class="string">&quot;o0&quot;</span>);    <span class="comment">// æ˜¯å¦åŒ…å«ä¸€ä¸ªå­å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">bool</span> b2 = s1.StartsWith(<span class="string">&quot;o&quot;</span>);   <span class="comment">// æ˜¯ä¸æ˜¯ä»¥ x å¼€å§‹</span></span><br><span class="line"><span class="built_in">bool</span> b3 = s1.EndsWith(<span class="string">&quot;o&quot;</span>);     <span class="comment">// æ˜¯ä¸æ˜¯ä»¥ x ç»“æŸçš„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åº</span></span><br><span class="line"><span class="built_in">int</span> i1 = s1.IndexOf(<span class="string">&quot;O&quot;</span>);</span><br><span class="line"><span class="built_in">int</span> i2 = s1.LastIndexOf(<span class="string">&quot;O&quot;</span>);</span><br><span class="line"><span class="built_in">int</span> i3 = s1.IndexOfAny(<span class="keyword">new</span> []&#123;<span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;O&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“åˆ</span></span><br><span class="line"><span class="built_in">string</span> path = <span class="string">&quot;C:/aaa/work.x/hello.txt&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> drive = path.Substring(<span class="number">0</span>, path.IndexOf(<span class="string">&quot;:&quot;</span>));</span><br><span class="line"><span class="built_in">string</span> dir = path.Substring(<span class="number">0</span>, path.LastIndexOf(<span class="string">&quot;/&quot;</span>) + <span class="number">1</span>);</span><br><span class="line"><span class="built_in">string</span> file = path.Substring(path.LastIndexOf(<span class="string">&quot;/&quot;</span>) + <span class="number">1</span>);</span><br><span class="line"><span class="built_in">string</span> ext = path.Substring(path.LastIndexOf(<span class="string">&quot;.&quot;</span>) + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰ç‰ˆæœ¬çš„ LastIndexOf</span></span><br><span class="line"><span class="built_in">int</span> p = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = path.Length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (path[i] == <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        p = i;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">string</span> dir2 = path.Substring(<span class="number">0</span>, p);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(dir2);</span><br></pre></td></tr></table></figure>

<h4 id="5-1-6-API-å­—ç¬¦ä¸²çš„ä¿®æ”¹"><a href="#5-1-6-API-å­—ç¬¦ä¸²çš„ä¿®æ”¹" class="headerlink" title="5.1.6. [API] å­—ç¬¦ä¸²çš„ä¿®æ”¹"></a>5.1.6. [API] å­—ç¬¦ä¸²çš„ä¿®æ”¹</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è°¨è®°:</span></span><br><span class="line"><span class="comment">// ä¿®æ”¹ä¸ä¼šä½œç”¨åœ¨åŸå…ˆçš„å­—ç¬¦ä¸²ä¸Š</span></span><br><span class="line"><span class="comment">// æ‰€æœ‰çš„ä¿®æ”¹ï¼Œéƒ½æ˜¯è¿”å›äº†ä¸€ä¸ªå®Œå…¨å´­æ–°çš„å­—ç¬¦ä¸²</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> s1 = <span class="string">&quot;  000oã€‚OOOoOO0Oï¼Œ0Ooo000o--&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> s2 = s1.Insert(<span class="number">3</span>, <span class="string">&quot;&gt;&gt;&gt;&quot;</span>);</span><br><span class="line"><span class="built_in">string</span> s3 = s1.Remove(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">string</span> s4 = s1.Replace(<span class="string">&quot;ã€‚&quot;</span>, <span class="string">&quot;.&quot;</span>);</span><br><span class="line"><span class="built_in">string</span> s5 = s1.Replace(<span class="string">&#x27;ï¼Œ&#x27;</span>, <span class="string">&#x27;_&#x27;</span>);</span><br><span class="line"><span class="built_in">string</span> s6 = s1.Replace(<span class="string">&quot;OoO&quot;</span>, <span class="string">&quot;111&quot;</span>);</span><br><span class="line"><span class="built_in">string</span> s7 = s1.Replace(<span class="string">&quot;OoO&quot;</span>, <span class="string">&quot;222&quot;</span>, <span class="literal">true</span>, <span class="keyword">new</span> CultureInfo(<span class="string">&quot;zh-CN&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> s8 = s1.PadLeft(<span class="number">100</span>);</span><br><span class="line"><span class="built_in">string</span> s9 = s1.PadLeft(<span class="number">100</span>, <span class="string">&#x27;-&#x27;</span>);</span><br><span class="line"><span class="built_in">string</span> sa = s1.PadRight(<span class="number">100</span>, <span class="string">&#x27;-&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> sb = s1.Trim();</span><br><span class="line"><span class="built_in">string</span> sc = s1.Trim(<span class="string">&#x27;-&#x27;</span>);</span><br><span class="line"><span class="built_in">string</span> sd = s1.TrimStart();</span><br><span class="line"><span class="built_in">string</span> de = s1.TrimStart().TrimEnd(<span class="string">&#x27;-&#x27;</span>).PadLeft(<span class="number">50</span>, <span class="string">&#x27;:&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> df = s1.ToLower();</span><br><span class="line"><span class="built_in">string</span> dg = s1.ToUpper();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(de);</span><br></pre></td></tr></table></figure>

<h4 id="5-1-7-API-String-è·Ÿ-Array-çš„è½¬æ¢"><a href="#5-1-7-API-String-è·Ÿ-Array-çš„è½¬æ¢" class="headerlink" title="5.1.7. [API] String è·Ÿ Array çš„è½¬æ¢"></a>5.1.7. [API] String è·Ÿ Array çš„è½¬æ¢</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> s1 = <span class="string">&quot;  000oã€‚OOOoOO0Oï¼Œ0Ooo000o--&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­—ç¬¦ä¸²åˆ° [æ•°ç»„] çš„è½¬æ¢</span></span><br><span class="line"><span class="built_in">char</span>[] a1 = s1.ToCharArray();</span><br><span class="line"><span class="built_in">char</span>[] a2 = s1.ToCharArray(<span class="number">2</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// [æ•°ç»„] åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢</span></span><br><span class="line"><span class="built_in">char</span>[] a3 = <span class="keyword">new</span>[] &#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;e&#x27;</span>&#125;;</span><br><span class="line"><span class="built_in">string</span> s2 = <span class="keyword">new</span> <span class="built_in">string</span>(a3);</span><br><span class="line"></span><br><span class="line"><span class="comment">// StringBuild vs String</span></span><br><span class="line"><span class="built_in">string</span> s3 = <span class="keyword">new</span> StringBuilder().Append(<span class="string">&quot;hello&quot;</span>).ToString();</span><br><span class="line">StringBuilder sb = <span class="keyword">new</span> StringBuilder(s1);</span><br></pre></td></tr></table></figure>

<h3 id="5-2-object"><a href="#5-2-object" class="headerlink" title="5.2. object"></a>5.2. object</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> i = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">string</span> s = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">object</span> i1 = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">object</span> s1 = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">object</span> i2;</span><br><span class="line"><span class="built_in">object</span> s2;</span><br><span class="line"></span><br><span class="line">i2 = <span class="number">20</span>;</span><br><span class="line">s2 = <span class="string">&quot;hello&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="5-3-dynamic"><a href="#5-3-dynamic" class="headerlink" title="5.3. dynamic"></a>5.3. dynamic</h3><ul>
<li>é™æ€è¯­è¨€</li>
<li>åŠ¨æ€è¯­è¨€ (åŠ¨æ€ä¸€æ—¶çˆ½ï¼Œé‡æ„hzc)</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> i = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">string</span> s = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">object</span> i1 = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">object</span> s1 = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">object</span> i2;</span><br><span class="line"><span class="built_in">object</span> s2;</span><br><span class="line"></span><br><span class="line">i2 = <span class="number">20</span>;</span><br><span class="line">s2 = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="comment">// åŠ¨æ€è¯­è¨€çš„ææ³•ï¼Œs æ˜¯å•¥ä¸ç¡®å®šï¼Œè¿è¡Œåˆ°å“ªé‡Œå¯ä»¥èƒ½å°±å˜äº†</span></span><br><span class="line"><span class="keyword">var</span> s;</span><br><span class="line">s = <span class="number">2323</span>;     <span class="comment">// æ•´æ•°</span></span><br><span class="line">s = <span class="string">&quot;kdjkfd&quot;</span>; <span class="comment">// å­—ç¬¦ä¸²</span></span><br><span class="line">Console.WriteLine(s.Length);</span><br><span class="line">s = [<span class="number">2</span>, <span class="number">3</span>];   <span class="comment">// æ•°ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é™æ€ç±»å‹ï¼Œs æ˜¯å•¥ï¼Œå‡ºç”Ÿå®šç»ˆèº«</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// C# å¯¹åŠ¨æ€ç±»å‹çš„æ”¯æŒ</span></span><br><span class="line"><span class="built_in">dynamic</span> a = <span class="number">1111</span>;</span><br><span class="line">a = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">a = <span class="keyword">new</span> FileInfo(<span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="6-ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹"><a href="#6-ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹" class="headerlink" title="6. ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹"></a>6. ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹</h2><ol>
<li>å£°æ˜ç±»å‹</li>
<li>å®ä¾‹åŒ–</li>
<li>ä½¿ç”¨</li>
</ol>
<h3 id="6-1-class"><a href="#6-1-class" class="headerlink" title="6.1. class"></a>6.1. class</h3><p>ç±»</p>
<h3 id="6-2-interface"><a href="#6-2-interface" class="headerlink" title="6.2. interface"></a>6.2. interface</h3><p>æ¥å£</p>
<h3 id="6-3-delegate"><a href="#6-3-delegate" class="headerlink" title="6.3. delegate"></a>6.3. delegate</h3><p>å§”æ‰˜</p>
<h3 id="6-4-array"><a href="#6-4-array" class="headerlink" title="6.4. array"></a>6.4. array</h3><p>æ•°ç»„</p>
<h3 id="6-5-struct"><a href="#6-5-struct" class="headerlink" title="6.5. struct"></a>6.5. struct</h3><p>ç»“æ„ä½“</p>
<h3 id="6-6-enum"><a href="#6-6-enum" class="headerlink" title="6.6. enum"></a>6.6. enum</h3><p>æšä¸¾</p>
<h2 id="7-ç±»å‹è½¬æ¢"><a href="#7-ç±»å‹è½¬æ¢" class="headerlink" title="7. ç±»å‹è½¬æ¢"></a>7. ç±»å‹è½¬æ¢</h2><p>åŸºæœ¬ç±»å‹çš„è½¬æ¢:</p>
<ul>
<li><p>å¦‚æœæ¶‰åŠåˆ°è½¬æ¢ä¹‹åä¸ä¼šå­˜åœ¨ä»»ä½•çš„ç²¾åº¦æŸå¤±çš„è¯ï¼Œä¼šè¿›è¡Œéšå¼è½¬æ¢ (implicit)</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> a; <span class="built_in">byte</span> b; a = b;</span><br></pre></td></tr></table></figure></li>
<li><p>å¦‚æœå¯èƒ½å­˜åœ¨ç²¾åº¦æŸå¤±çš„è¯ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¿…é¡»è¿›è¡Œå¼ºåˆ¶è½¬æ¢ (explicit)</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> a; <span class="built_in">byte</span> b; b = (<span class="built_in">int</span>)a;</span><br></pre></td></tr></table></figure></li>
<li><p>å¦‚æœå¼ºåˆ¶è½¬æ¢è¿‡ç¨‹ä¸­ï¼Œå‡ºç°ç²¾åº¦æŸå¤±çš„è¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šæŒ‰ç…§æŸç§è§„åˆ™æˆªæ–­ã€‚æ³¨æ„ï¼Œä¸ä¼šæŠ¥é”™</p>
</li>
<li><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>checked</code> å…³é”®è¯å°†è½¬æ¢çš„è¯­å¥åŒ…å›´ä½ï¼Œç„¶ååœ¨è½¬æ¢ä¸­å‡ºç°ç²¾åº¦æŸå¤±çš„è¯ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> a; <span class="built_in">byte</span> b; b = check((<span class="built_in">int</span>)a);</span><br></pre></td></tr></table></figure></li>
</ul>
<p>å¼•ç”¨ç±»å‹çš„è½¬æ¢:</p>
<ul>
<li><p>å¼•ç”¨ç±»å‹åŒæ ·å­˜åœ¨ implicit&#x2F;explicit æŠ“æ¢</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Person p = <span class="keyword">new</span> Student();</span><br><span class="line">Student s = (Student) p;</span><br></pre></td></tr></table></figure></li>
<li><p>å¼•ç”¨ç±»å‹çš„è½¬æ¢ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ï¼Œé»˜è®¤ä¼šæŠ›å‡ºå¼‚å¸¸</p>
</li>
<li><p>ä½¿ç”¨ <code>is</code> è¯­å¥ï¼Œåˆ¤æ–­æ˜¯å¦å±äºæŸç§ç±»å‹ã€‚ç»å¸¸ä¼šè·Ÿæ˜¾å¼è½¬æ¢é…åˆä½¿ç”¨:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Student s;</span><br><span class="line"><span class="keyword">if</span> (p <span class="keyword">is</span> Student)</span><br><span class="line">&#123;</span><br><span class="line">    s = (Student) p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    s = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(s);</span><br></pre></td></tr></table></figure></li>
<li><p>å¯ä»¥ä½¿ç”¨ <code>as</code> è¯­å¥ï¼Œç®€åŒ–ä¸Šè¿°çš„åˆ¤æ–­è·Ÿè½¬æ¢ã€‚è¿™æ˜¯ä¸€ç§å¾ˆç”œçš„ç³–:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Student s = p <span class="keyword">as</span> Student;</span><br><span class="line"><span class="keyword">if</span> (s == <span class="literal">null</span>) ...</span><br></pre></td></tr></table></figure></li>
</ul>
<p>è£…ç®±&#x2F;æ‹†ç®± (boxing&#x2F;unboxing):</p>
<ul>
<li><strong>è£…ç®±</strong> æ˜¯å°†å€¼ç±»å‹è½¬æ¢ä¸º object ç±»å‹æˆ–ç”±æ­¤å€¼ç±»å‹å®ç°çš„ä»»ä½•æ¥å£ç±»å‹çš„è¿‡ç¨‹</li>
<li>åœ¨ C# ä¸­ï¼ŒåŸºæœ¬ç±»å‹ä¹Ÿæ˜¯ object çš„å®ä¾‹ã€‚ ä½†æ˜¯ä¸ºäº†æ•ˆç‡ï¼ŒåŸºæœ¬ç±»å‹éƒ½è¢«ç›´æ¥å­˜å‚¨åœ¨æ ˆä¸Šï¼Œå­˜å‚¨çš„å½¢å¼ä¸æ˜¯å¯¹è±¡çš„å½¢å¼ã€‚ å› æ­¤ï¼Œå¦‚æœæƒ³å°†åŸºæœ¬ç±»å‹å½“ä½œå¯¹è±¡ï¼Œæ¥è¿›è¡Œæ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œéœ€è¦å°†å…¶è½¬æ¢ä¸ºå¯¹è±¡å­˜å‚¨å½¢å¼ ä¸ºäº†ç®€åŒ–ä¸Šè¿°è¿‡ç¨‹ï¼Œåœ¨å¯¹åŸºæœ¬ç±»å‹è¿›è¡Œæ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼ŒCLR ä¼šè‡ªåŠ¨è¿›è¡Œä¸Šè¿°è½¬æ¢ã€‚ è¿™ç§éšå¼è½¬æ¢çš„æœºåˆ¶ï¼Œå«åšè‡ªåŠ¨è£…ç®± (auto-boxing)</li>
<li>åå‘çš„è¿‡ç¨‹å«æ‹†ç®±</li>
</ul>
<h3 id="7-1-éšå¼è½¬æ¢-x2F-å¼ºåˆ¶è½¬æ¢"><a href="#7-1-éšå¼è½¬æ¢-x2F-å¼ºåˆ¶è½¬æ¢" class="headerlink" title="7.1. éšå¼è½¬æ¢&#x2F;å¼ºåˆ¶è½¬æ¢"></a>7.1. éšå¼è½¬æ¢&#x2F;å¼ºåˆ¶è½¬æ¢</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">char</span> a = <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line"><span class="built_in">byte</span> ab = (<span class="built_in">byte</span>)a;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> s1 = ab + <span class="number">13</span>; <span class="comment">// byte + int</span></span><br><span class="line">ab = (<span class="built_in">byte</span>) (((<span class="built_in">int</span>) ab) + <span class="number">13</span>); <span class="comment">// int + int = int</span></span><br><span class="line">ab = (<span class="built_in">byte</span>) (ab + <span class="number">13</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span>//</span></span><br><span class="line"><span class="built_in">char</span> a = <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line"><span class="built_in">byte</span> a1 = (<span class="built_in">byte</span>) a;</span><br><span class="line"><span class="built_in">char</span> a2 = (<span class="built_in">char</span>) (a1 + <span class="number">13</span>);</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;a&#125;</span> -&gt; <span class="subst">&#123;a1&#125;</span> -&gt; <span class="subst">&#123;a2&#125;</span>&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ checked æ¥é‡Šæ”¾å±é™©:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">byte</span> b = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">byte</span> c = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">byte</span> d = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ½œåœ¨çš„å±é™©</span></span><br><span class="line">b = (<span class="built_in">byte</span>) a;</span><br><span class="line">c = (<span class="built_in">byte</span>) a;</span><br><span class="line">d = (<span class="built_in">byte</span>) a;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸»åŠ¨é‡Šæ”¾å±é™©</span></span><br><span class="line">b = checked((<span class="built_in">byte</span>) a);</span><br><span class="line">c = checked((<span class="built_in">byte</span>) a);</span><br><span class="line">d = checked((<span class="built_in">byte</span>) a);</span><br><span class="line">Console.WriteLine(b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‡å®šå±é™©åŒºåŸŸ</span></span><br><span class="line">checked</span><br><span class="line">&#123;</span><br><span class="line">    b = (<span class="built_in">byte</span>)a;</span><br><span class="line">    c = (<span class="built_in">byte</span>)a;</span><br><span class="line">    d = (<span class="built_in">byte</span>)a;</span><br><span class="line">    Console.WriteLine(b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-2-å¼•ç”¨ç±»å‹çš„éšå¼å’Œå¼ºåˆ¶è½¬æ¢"><a href="#7-2-å¼•ç”¨ç±»å‹çš„éšå¼å’Œå¼ºåˆ¶è½¬æ¢" class="headerlink" title="7.2. å¼•ç”¨ç±»å‹çš„éšå¼å’Œå¼ºåˆ¶è½¬æ¢"></a>7.2. å¼•ç”¨ç±»å‹çš„éšå¼å’Œå¼ºåˆ¶è½¬æ¢</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Person</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">Student</span> : <span class="title">Person</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">Person p = <span class="keyword">new</span> Person();</span><br><span class="line">Student s = <span class="keyword">new</span> Student();</span><br><span class="line"></span><br><span class="line">Person p1 = <span class="keyword">new</span> Student();</span><br><span class="line"></span><br><span class="line"><span class="built_in">object</span> a = <span class="keyword">new</span> Student();</span><br><span class="line">a = <span class="number">2122</span>;</span><br><span class="line"><span class="comment">// a: object</span></span><br><span class="line">Student s2 = (Student)a;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-è£…ç®±-x2F-æ‹†ç®±-auto-boxing"><a href="#7-3-è£…ç®±-x2F-æ‹†ç®±-auto-boxing" class="headerlink" title="7.3. è£…ç®±&#x2F;æ‹†ç®± (auto-boxing)"></a>7.3. è£…ç®±&#x2F;æ‹†ç®± (auto-boxing)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªåŠ¨è£…ç®±</span></span><br><span class="line"><span class="built_in">int</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">object</span> o = <span class="literal">null</span>;</span><br><span class="line">o = i;</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">$&quot;i: <span class="subst">&#123;i&#125;</span>, o: <span class="subst">&#123;o&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è£…ç®±ä½¿ç”¨çš„æ˜¯æ•°æ®çš„å‰¯æœ¬</span></span><br><span class="line">i = <span class="number">5</span>;</span><br><span class="line">o = <span class="number">6</span>;</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;i: <span class="subst">&#123;i&#125;</span>, o: <span class="subst">&#123;o&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‹†ç®±</span></span><br><span class="line">i = (<span class="built_in">int</span>)o;</span><br></pre></td></tr></table></figure>

<h3 id="7-4-è‡ªå®šä¹‰è½¬æ¢è§„åˆ™"><a href="#7-4-è‡ªå®šä¹‰è½¬æ¢è§„åˆ™" class="headerlink" title="7.4. è‡ªå®šä¹‰è½¬æ¢è§„åˆ™"></a>7.4. è‡ªå®šä¹‰è½¬æ¢è§„åˆ™</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        Person p = <span class="keyword">new</span> Person();</span><br><span class="line">        Student s = <span class="keyword">new</span> Student();</span><br><span class="line"></span><br><span class="line">        Person p1 = <span class="keyword">new</span> Student();</span><br><span class="line"></span><br><span class="line">        <span class="built_in">object</span> a = <span class="keyword">new</span> Student();</span><br><span class="line">        Student s2 = (Student)a;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åœ¨ C# ä¸­ï¼Œç±»å‹è½¬æ¢çš„è§„åˆ™ï¼Œæ˜¯å¯ä»¥è‡ªå®šä¹‰çš„</span></span><br><span class="line">        Student ss = <span class="keyword">new</span> Student();</span><br><span class="line">        ss.id = <span class="number">222</span>;</span><br><span class="line">        <span class="built_in">int</span> i = ss;</span><br><span class="line">        Console.WriteLine(i);</span><br><span class="line"></span><br><span class="line">        Student st = (Student)<span class="number">333</span>;</span><br><span class="line">        Console.WriteLine(st);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Person</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Student</span> : <span class="title">Person</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> id;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">implicit</span> <span class="keyword">operator</span> <span class="title">int</span> (<span class="params">Student s</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> s.id;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">explicit</span> <span class="keyword">operator</span> <span class="title">Student</span>(<span class="params"><span class="built_in">int</span> si</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> s = <span class="keyword">new</span> Student();</span><br><span class="line">            s.id = si;</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å­¦å· - å­¦ç”Ÿï¼Œè½¬æ¢çš„ç¤ºä¾‹:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ™®é€šä½¿ç”¨</span></span><br><span class="line"><span class="built_in">int</span> id = <span class="number">2323232323</span>;</span><br><span class="line">s = <span class="keyword">new</span> Student();</span><br><span class="line">s.id = id;</span><br><span class="line">s.xxx = ksdfj;</span><br><span class="line">s.yyy = kjskdfj;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ½å‡ºä¸ºæ–¹æ³•</span></span><br><span class="line"><span class="function">Student <span class="title">MakeStudent</span>(<span class="params"><span class="built_in">int</span> id</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    s = <span class="keyword">new</span> Student();</span><br><span class="line">    s.id = i;</span><br><span class="line">    s.xxx = ksdfj;</span><br><span class="line">    s.yyy = kjskdfj;</span><br><span class="line">&#125;</span><br><span class="line">S = MakeStudent(id);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ½å‡ºä¸ºç±»å‹è½¬æ¢</span></span><br><span class="line">Student s = (Student) id;</span><br></pre></td></tr></table></figure>

<h3 id="7-5-åŸºäº-å­—ç¬¦ä¸²-ä¹‹é—´çš„äº’ç›¸è½¬æ¢"><a href="#7-5-åŸºäº-å­—ç¬¦ä¸²-ä¹‹é—´çš„äº’ç›¸è½¬æ¢" class="headerlink" title="7.5. åŸºäº å­—ç¬¦ä¸² ä¹‹é—´çš„äº’ç›¸è½¬æ¢"></a>7.5. åŸºäº <strong>å­—ç¬¦ä¸²</strong> ä¹‹é—´çš„äº’ç›¸è½¬æ¢</h3><ul>
<li>æ ¸å¿ƒä¸¤ç§æ–¹æ³•: <code>string.Format</code> ç”¨æ¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œ<del>type.Parse</del> ç”¨æ¥ä»å­—ç¬¦ä¸²è½¬åŒ–</li>
<li>å¯ä»¥ä½¿ç”¨ <code>ToString/TryParse</code> å¯¹ä¸Šé¢çš„ä¸¤ä¸ªæ–¹æ³•è¿›è¡Œè¡¥å……</li>
</ul>
<p>ç®€è€Œè¨€ä¹‹:</p>
<ul>
<li>å°†å…¶ä»–ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²: <code>string.Format/ToString</code></li>
<li>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå…¶ä»–ç±»å‹: <code>xxx.Parse/TryParse</code></li>
<li>BCL ä¸­æä¾›äº†ä¸€ä¸ªå« <code>Convert</code> çš„ç±»ï¼Œå¯ä»¥å®ç°æ›´å¤šæ›´å¤æ‚çš„è½¬æ¢</li>
</ul>
<h4 id="7-5-1-string-Format"><a href="#7-5-1-string-Format" class="headerlink" title="7.5.1. string.Format"></a>7.5.1. string.Format</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> r3 = <span class="built_in">string</span>.Format(<span class="string">&quot;&#123;0&#125;çš„æœ‹å‹æ˜¯&#123;1&#125;ï¼Œå®ƒè™½ç„¶åªæœ‰&#123;2&#125;å²ï¼Œä½†æ˜¯å®ƒçš„æ”¶å…¥è¾¾åˆ°&#123;3:C&#125;&quot;</span>, name, friend, age, sal);</span><br></pre></td></tr></table></figure>

<h4 id="7-5-2-type-ToString"><a href="#7-5-2-type-ToString" class="headerlink" title="7.5.2. type.ToString"></a>7.5.2. type.ToString</h4><p>å› ä¸ºï¼Œstring ç±»å‹æ˜¯å¦‚æ­¤é‡è¦ï¼Œæ‰€ä»¥åœ¨ <strong>æ‰€æœ‰ç±»çš„åŸºç±»ï¼Œå³ object ä¸­</strong>, åŒ…å«äº†ä¸€ä¸ªé»˜è®¤çš„ ToString æ–¹æ³•ã€‚</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> sal = <span class="number">1000000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Hahaha</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;hdskfjksjfksjdfkke&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person p = <span class="keyword">new</span> Person();</span><br><span class="line">Console.WriteLine(p.ToString()); <span class="comment">// Program+Person</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> sal = <span class="number">1000000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Hahaha</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;hdskfjksjfksjdfkke&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">string</span> <span class="title">ToString</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æˆ‘å°±æ˜¯æˆ‘ï¼Œä¸ä¸€æ ·çš„çƒŸç«.æˆ‘çš„å·¥èµ„: &quot;</span> + <span class="keyword">this</span>.sal;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person p = <span class="keyword">new</span> Person();</span><br><span class="line">Console.WriteLine(p);</span><br><span class="line"><span class="comment">// int</span></span><br><span class="line"><span class="built_in">int</span> i = <span class="number">112323</span>;</span><br><span class="line"><span class="built_in">string</span> s1 = i.ToString(<span class="string">&quot;X&quot;</span>);</span><br><span class="line">Console.WriteLine(s1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// datetime</span></span><br><span class="line">DateTime now = DateTime.Now;</span><br><span class="line"><span class="built_in">string</span> s2 = now.ToString();</span><br><span class="line">Console.WriteLine(s2);</span><br><span class="line"><span class="built_in">string</span> s3 = now.ToString(<span class="string">&quot;ç°åœ¨æ—¶é—´: yyyyå¹´MMæœˆddæ—¥ï¼Œä¸å‘Šè¯‰ä½ å‡ ç‚¹&quot;</span>);</span><br><span class="line">Console.WriteLine(s3);</span><br><span class="line">CultureInfo ci = <span class="keyword">new</span> CultureInfo(<span class="string">&quot;zh-CN&quot;</span>);</span><br><span class="line"><span class="built_in">string</span> s4 = now.ToString(<span class="string">&quot;ç°åœ¨æ—¶é—´: yyyyå¹´MMM dddï¼Œä¸å‘Šè¯‰ä½ å‡ ç‚¹&quot;</span>, ci);</span><br><span class="line">Console.WriteLine(s4);</span><br></pre></td></tr></table></figure>

<h4 id="7-5-3-type-Parse-x2F-TryParse"><a href="#7-5-3-type-Parse-x2F-TryParse" class="headerlink" title="7.5.3. type.Parse&#x2F;TryParse"></a>7.5.3. type.Parse&#x2F;TryParse</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// int</span></span><br><span class="line"><span class="built_in">string</span> s1 = <span class="string">&quot;1234343&quot;</span>;</span><br><span class="line"><span class="built_in">int</span> i = <span class="built_in">int</span>.Parse(s1) + <span class="number">1</span>;</span><br><span class="line">Console.WriteLine(i);</span><br><span class="line"></span><br><span class="line"><span class="comment">// double</span></span><br><span class="line"><span class="built_in">string</span> s2 = <span class="string">&quot;2322222&quot;</span>;</span><br><span class="line"><span class="built_in">double</span> d = <span class="built_in">double</span>.Parse(s2);</span><br><span class="line">Console.WriteLine(d);</span><br><span class="line"></span><br><span class="line"><span class="comment">// DateTime</span></span><br><span class="line"><span class="built_in">string</span> s3 = <span class="string">&quot;1999-02-13&quot;</span>;</span><br><span class="line">DateTime dt = DateTime.Parse(s3);</span><br><span class="line">Console.WriteLine(dt.Year);</span><br></pre></td></tr></table></figure>

<p>è½¬æ¢å¤±è´¥ï¼Œä¼šæŠ›å¼‚å¸¸:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> s4 = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="built_in">int</span> i2 = <span class="built_in">int</span>.Parse(s4);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">string</span> s4 = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    <span class="built_in">int</span> i2 = <span class="built_in">int</span>.Parse(s4);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (e)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// è½¬æ¢ä¸äº†æ€ä¹ˆåŠ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä½¿ç”¨ TryParse è¿›è¡Œè½¬åŒ–ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ï¼Œä¼šè¿”å› False:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> s4 = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">int</span>.TryParse(s4, <span class="keyword">out</span> <span class="built_in">int</span> result))</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">bool</span> <span class="title">TryMyParse</span>(<span class="params"><span class="built_in">string</span> s, <span class="keyword">out</span> <span class="built_in">int</span> result</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        result = <span class="built_in">int</span>.Parse(s4);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span></span><br><span class="line">    &#123;</span><br><span class="line">        result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-5-4-Convert"><a href="#7-5-4-Convert" class="headerlink" title="7.5.4. Convert"></a>7.5.4. Convert</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> s1 = Convert.ToString(<span class="number">82738283782</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">string</span> s2 = Convert.ToString(<span class="number">82738283782</span>, <span class="number">8</span>);</span><br><span class="line">Console.WriteLine(s2);</span><br><span class="line"></span><br><span class="line">Convert.TryFromBase64String();</span><br></pre></td></tr></table></figure>

<h2 id="8-ç±»-Class"><a href="#8-ç±»-Class" class="headerlink" title="8. ç±» (Class)"></a>8. ç±» (Class)</h2><h3 id="8-1-å­—æ®µ-Field"><a href="#8-1-å­—æ®µ-Field" class="headerlink" title="8.1. å­—æ®µ (Field)"></a>8.1. å­—æ®µ (Field)</h3><ul>
<li><p>ä½œä¸ºä¸€ä¸ªå­—æ®µï¼Œæœ€é‡è¦çš„æ˜¯ (ç±»å‹) (åå­—) &#x3D; (å€¼)</p>
</li>
<li><p>å¯ä»¥</p>
<p>é€‰æ‹©æ€§</p>
<p>ä½¿ç”¨å…¶ä»–ä¿®é¥°ç¬¦ï¼Œä¸ºå­—æ®µå¢åŠ </p>
<p>é¢å¤–</p>
<p>çš„åŠŸèƒ½æˆ–é™åˆ¶:</p>
<ul>
<li>è®¿é—®ä¿®é¥°ç¬¦: private&#x2F;public&#x2F;protected&#x2F;internal ç­‰ï¼Œç”¨æ¥ç»™äºˆå¤–éƒ¨çš„è®¿é—®é™åˆ¶</li>
<li>åªè¯»&#x2F;å¸¸é‡ä¿®é¥°ç¬¦: const&#x2F;readonlyï¼Œç”¨æ¥é˜²æ­¢æ•°æ®è¢«è¯¯ä¿®æ”¹</li>
<li>é™æ€ä¿®é¥°ç¬¦: static çš„ä½œç”¨æ˜¯ï¼Œå°†è¿™ä¸ªå­—æ®µçš„å½’å±æƒç»™äºˆç±»</li>
</ul>
</li>
</ul>
<h3 id="8-2-æ–¹æ³•-Method"><a href="#8-2-æ–¹æ³•-Method" class="headerlink" title="8.2. æ–¹æ³• (Method)"></a>8.2. æ–¹æ³• (Method)</h3><h4 id="8-2-1-Basic"><a href="#8-2-1-Basic" class="headerlink" title="8.2.1. Basic"></a>8.2.1. Basic</h4><p>æ–¹æ³•æ˜¯ä¸€ä¸ªå…·å¤‡åå­—çš„ä»£ç å—:</p>
<ul>
<li>é€šè¿‡ <code>æ–¹æ³•å()</code> çš„æ–¹å¼å®ç°æ–¹æ³•è°ƒç”¨ï¼Œ ä¹Ÿå°±æ˜¯åœ¨è°ƒç”¨çš„åœ°æ–¹å°†æ–¹æ³•åä»£è¡¨çš„ä»£ç å—é‡Œçš„ä»£ç è¿›è¡Œè¿è¡Œ</li>
<li>æ–¹æ³•çš„ä¸‰è¦ç´ :<ol>
<li>ä¸€ä¸ªåå­— (æ–¹æ³•å)</li>
<li>ä¼ å…¥çš„æ•°æ® (ä¼ å…¥å‚æ•°) å…¥å‚å†™åœ¨æ–¹æ³•ååé¢çš„æ‹¬å·é‡Œã€‚å¦‚æœæ²¡æœ‰å…¥å‚ï¼Œæ‹¬å·ä¿æŒä¸ºç©ºå³å¯</li>
<li>ä¼ å‡ºçš„æ•°æ® (è¿”å›å€¼) æ–¹æ³•å†…éƒ¨ï¼Œä½¿ç”¨ return è¡¨ç¤ºè¿”å›çš„æ•°æ®ã€‚åœ¨æ–¹æ³•åå‰é¢ï¼Œæ·»åŠ è¿”å›çš„ç±»å‹ã€‚ å¦‚æœæ–¹æ³•å†…éƒ¨æ²¡æœ‰ä»»ä½• return è¡¨ç¤ºæ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œéœ€è¦åœ¨æ–¹æ³•å‰é¢æ·»åŠ  void è¡¨ç¤ºè¿™ç§æƒ…å†µ</li>
</ol>
</li>
</ul>
<h4 id="8-2-2-æ–¹æ³•çš„é‡è½½-overload"><a href="#8-2-2-æ–¹æ³•çš„é‡è½½-overload" class="headerlink" title="8.2.2. æ–¹æ³•çš„é‡è½½ (overload)"></a>8.2.2. æ–¹æ³•çš„é‡è½½ (overload)</h4><ul>
<li>ä¸€ä¸ªç±»ä¸­ï¼Œå¯ä»¥æœ‰åŒåçš„æ–¹æ³•ã€‚éœ€è¦æœ‰ä¸åŒçš„å‚æ•° (è¿™æ ·æ‰èƒ½åŒºåˆ†è°ƒç”¨)</li>
<li>è¯·å™è¿°ä¸€ä¸‹ overload å’Œ override æœ‰ä»€ä¹ˆåŒºåˆ«</li>
</ul>
<p>æ–¹æ³•çš„ç¤ºä¾‹:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ–¹æ³•çš„å£°æ˜ã€å®šä¹‰</span></span><br><span class="line">    <span class="built_in">int</span> å¢åŠ  (<span class="built_in">int</span> a)  <span class="comment">// æ–¹æ³•åä¸º [å¢åŠ ]ï¼Œå…¥å‚ä¸º [a]</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a + <span class="number">1</span>;  <span class="comment">// è¿”å›å€¼ä¸º [a + 1]</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">double</span> åŠ æ³• (<span class="built_in">double</span> a, <span class="built_in">double</span> b) <span class="comment">// å¯ä»¥æœ‰å¤šä¸ªå…¥å‚</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">double</span> æ²¡æœ‰å…¥å‚ () <span class="comment">// å¯ä»¥æ²¡æœ‰å…¥å‚</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">111.111</span>; <span class="comment">// è¿”å› double ç±»å‹çš„æ•°æ®</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> æ²¡æœ‰è¿”å›æ•°æ® (<span class="built_in">string</span> name) <span class="comment">// æ²¡æœ‰è¿”å›æ•°æ®ä½¿ç”¨ void è¡¨ç¤º</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(name); <span class="comment">// æ–¹æ³•ä½“å†…ï¼Œæ²¡æœ‰ä»»ä½• return è¯­å¥ï¼Œæ‰€ä»¥æ–¹æ³•æ²¡æœ‰è¿”å›ä»»ä½•æ•°æ®</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> æ²¡æœ‰è¿”å›å€¼ä¹Ÿæ²¡æœ‰å…¥å‚ () <span class="comment">// è¿™ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯æ²¡æœ‰è¿”å›å€¼ä¹Ÿæ²¡æœ‰å…¥å‚</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;hello, world&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–¹æ³•çš„è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨æ–¹æ³•çš„åå­—è°ƒç”¨æ–¹æ³•:</span></span><br><span class="line">    <span class="comment">// - å…¥å‚çš„ä¸ªæ•°å’Œé¡ºåºè¦è·Ÿä¸Šè¿°å®šä¹‰çš„ä¸€è‡´</span></span><br><span class="line">    <span class="comment">// - è¿”å›å€¼çš„ç±»å‹è¦è·Ÿä¸Šè¿°å®šä¹‰çš„ä¸€è‡´ï¼Œå¦‚æœ void ç±»å‹çš„å‡½æ•°æ˜¯ä¸èƒ½æ¥å—å…¶è¿”å›å€¼çš„</span></span><br><span class="line">    <span class="comment">// ä¸Šè¿°æ–¹æ³•å®šä¹‰ä¸­çš„å‚æ•°ï¼Œåˆå«å½¢å¼å‚æ•° (å½¢å‚)</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œè°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°ï¼Œåˆå«å®é™…å‚æ•° (å®å‚)</span></span><br><span class="line">    <span class="comment">// ä¹Ÿå°±æ˜¯ï¼Œå®å‚è¦è·Ÿå½¢å‚ç›¸å¯¹åº”!</span></span><br><span class="line">    <span class="built_in">int</span> a = å¢åŠ (<span class="number">11</span>);</span><br><span class="line">    <span class="built_in">double</span> b = åŠ æ³•(<span class="number">11</span>, <span class="number">33</span>);</span><br><span class="line">    <span class="built_in">double</span> c = æ²¡æœ‰å…¥å‚();</span><br><span class="line">    æ²¡æœ‰è¿”å›æ•°æ®(<span class="string">&quot;H&amp;M&quot;</span>);</span><br><span class="line">    æ²¡æœ‰è¿”å›å€¼ä¹Ÿæ²¡æœ‰å…¥å‚();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-2-3-å‚æ•°-å€¼å‚æ•°-x2F-ref-x2F-out"><a href="#8-2-3-å‚æ•°-å€¼å‚æ•°-x2F-ref-x2F-out" class="headerlink" title="8.2.3. å‚æ•° (å€¼å‚æ•°&#x2F;ref&#x2F;out)"></a>8.2.3. å‚æ•° (å€¼å‚æ•°&#x2F;ref&#x2F;out)</h4><p>å€¼å‚æ•° (é»˜è®¤çš„):</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> i = <span class="number">5</span>;</span><br><span class="line">    Person p = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line">    TestZhi(i, p);</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;out: i: <span class="subst">&#123;i&#125;</span>, age: $<span class="subst">&#123;p.Age&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">TestZhi</span>(<span class="params"><span class="built_in">int</span> ii, Person pp</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    ii = ii + <span class="number">1</span>;</span><br><span class="line">    pp.Age = pp.Age + <span class="number">18</span>;</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;in:  i: <span class="subst">&#123;ii&#125;</span>, age: $<span class="subst">&#123;pp.Age&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age = <span class="number">18</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ref:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    int i = 5;</span><br><span class="line">    Person p = new Person();</span><br><span class="line"></span><br><span class="line">    TestZhi(ref i, p);</span><br><span class="line">    Console.WriteLine($&quot;out: i: &#123;i&#125;, age: $&#123;p.Age&#125;&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static void TestZhi(ref int ii, Person pp)</span><br><span class="line">&#123;</span><br><span class="line">    ii = ii + 1;</span><br><span class="line">    pp.Age = pp.Age + 18;</span><br><span class="line">    Console.WriteLine($&quot;in:  i: &#123;ii&#125;, age: $&#123;pp.Age&#125;&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Person</span><br><span class="line">&#123;</span><br><span class="line">    public int Age = 18;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>out:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    int i;</span><br><span class="line">    Person p = new Person();</span><br><span class="line"></span><br><span class="line">    TestZhi(out i, p);</span><br><span class="line">    Console.WriteLine($&quot;out: i: &#123;i&#125;, age: $&#123;p.Age&#125;&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static void TestZhi(out int ii, Person pp)</span><br><span class="line">&#123;</span><br><span class="line">    ii = 999;</span><br><span class="line">    pp.Age = pp.Age + 18;</span><br><span class="line">    Console.WriteLine($&quot;in:  i: &#123;ii&#125;, age: $&#123;pp.Age&#125;&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Person</span><br><span class="line">&#123;</span><br><span class="line">    public int Age = 18;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="http://yaoqisan.local:7373/html/dotnet/img/method-parameter.png" alt="method-parameter.png"></p>
<h4 id="8-2-4-out-å‚æ•°-ç”¨æ¥æ¨¡æ‹Ÿæ–¹æ³•è¿”å›å¤šä¸ªå€¼çš„åœºæ™¯"><a href="#8-2-4-out-å‚æ•°-ç”¨æ¥æ¨¡æ‹Ÿæ–¹æ³•è¿”å›å¤šä¸ªå€¼çš„åœºæ™¯" class="headerlink" title="8.2.4. out å‚æ•°: ç”¨æ¥æ¨¡æ‹Ÿæ–¹æ³•è¿”å›å¤šä¸ªå€¼çš„åœºæ™¯"></a>8.2.4. out å‚æ•°: ç”¨æ¥æ¨¡æ‹Ÿæ–¹æ³•è¿”å›å¤šä¸ªå€¼çš„åœºæ™¯</h4><p>å¦‚æœä¸ç”¨ outï¼Œå¯ä»¥ä½¿ç”¨ Class çš„æ–¹å¼è¿”å›å¤šä¸ªå€¼ï¼Œè¿™ç§æ–¹å¼æ¯”è¾ƒé‡:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    string name;</span><br><span class="line">    int age;</span><br><span class="line">    double sal;</span><br><span class="line"></span><br><span class="line">    Person p = GetYourInformation();</span><br><span class="line">    name = p.Name;</span><br><span class="line">    age = p.Age;</span><br><span class="line">    sal = p.Sal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static Person GetYourInformation()</span><br><span class="line">&#123;</span><br><span class="line">    return new Person</span><br><span class="line">    &#123;</span><br><span class="line">        Name = &quot;Kitty&quot;,</span><br><span class="line">        Age = 19,</span><br><span class="line">        Sal = 2323323</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Person</span><br><span class="line">&#123;</span><br><span class="line">    public string Name;</span><br><span class="line">    public int Age;</span><br><span class="line">    public double Sal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œ out çš„æ–¹æ³•æ¯”è¾ƒè½»é‡çº§:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    string name;</span><br><span class="line">    int age;</span><br><span class="line">    double sal;</span><br><span class="line"></span><br><span class="line">    name = GetYourInformation(out age, out sal);</span><br><span class="line">    Console.WriteLine($&quot;&#123;name&#125; çš„å¹´é¾„ä¸º &#123;age&#125; æ”¶å…¥ä¸º &#123;sal&#125;ï¼Œæ‚¨å¯æ»¡æ„?&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static string GetYourInformation(out int age, out double sal)</span><br><span class="line">&#123;</span><br><span class="line">    age = 19;</span><br><span class="line">    sal = 23232;</span><br><span class="line">    return &quot;Kitty&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”šè‡³å¯ä»¥æ›´ç®€åŒ–:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    string name = GetYourInformation(out int age, out double sal);</span><br><span class="line">    Console.WriteLine($&quot;&#123;name&#125; çš„å¹´é¾„ä¸º &#123;age&#125; æ”¶å…¥ä¸º &#123;sal&#125;ï¼Œæ‚¨å¯æ»¡æ„?&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static string GetYourInformation(out int age, out double sal)</span><br><span class="line">&#123;</span><br><span class="line">    age = 19;</span><br><span class="line">    sal = 23232;</span><br><span class="line">    return &quot;Kitty&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-2-5-æ•°ç»„å‚æ•°-params"><a href="#8-2-5-æ•°ç»„å‚æ•°-params" class="headerlink" title="8.2.5. æ•°ç»„å‚æ•° (params)"></a>8.2.5. æ•°ç»„å‚æ•° (params)</h4><p>å®ç°ç´¯åŠ :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    // åŠ æ³•</span><br><span class="line">    int r1 = MyAdd2(2, 3);</span><br><span class="line">    int r2 = MyAdd3(2, 3, 4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int MyAdd2(int a, int b)</span><br><span class="line">&#123;</span><br><span class="line">    return a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int MyAdd3(int a, int b, int c)</span><br><span class="line">&#123;</span><br><span class="line">    return a + b + c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ•°ç»„æ”¹è‰¯çš„ç»“æœ:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    int r1 = MyAdd(new int[] &#123;2, 3&#125;);</span><br><span class="line">    int r2 = MyAdd(new int[] &#123;2, 3, 4, 5, 6, 7&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int MyAdd(int [] nums)</span><br><span class="line">&#123;</span><br><span class="line">    int r = 0;</span><br><span class="line">    for (int i = 0; i &lt; nums.Length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        r += nums[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä½¿ç”¨ params ä¿®é¥°æ•°ç»„ï¼Œè¾¾åˆ°è¿›ä¸€æ­¥ç®€åŒ–è°ƒç”¨è¯­æ³•çš„ç›®çš„:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    int r1 = MyAdd(2, 3);</span><br><span class="line">    int r2 = MyAdd(2, 3, 4, 5, 6, 7);</span><br><span class="line">    Console.WriteLine($&quot;&#123;r1&#125; / &#123;r2&#125;&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int MyAdd(params int [] nums)</span><br><span class="line">&#123;</span><br><span class="line">    int r = 0;</span><br><span class="line">    for (int i = 0; i &lt; nums.Length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        r += nums[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ•°ç»„å‚æ•°éœ€è¦æ”¾åˆ°åé¢:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    MyAdd(&quot;æœ€åæ±‚å–çš„å’Œæ˜¯: 0x&#123;0:X&#125;&quot;, 232, 3, 10);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static void MyAdd(string fmt, params int [] nums)</span><br><span class="line">&#123;</span><br><span class="line">    int r = 0;</span><br><span class="line">    for (int i = 0; i &lt; nums.Length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        r += nums[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(fmt, r);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-2-6-å¯é€‰å‚æ•°-x2F-å‘½åå‚æ•°"><a href="#8-2-6-å¯é€‰å‚æ•°-x2F-å‘½åå‚æ•°" class="headerlink" title="8.2.6. å¯é€‰å‚æ•°&#x2F;å‘½åå‚æ•°"></a>8.2.6. å¯é€‰å‚æ•°&#x2F;å‘½åå‚æ•°</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    Hello();</span><br><span class="line">    Hello(&quot;Hiii!&quot;);</span><br><span class="line">    Hello(&quot;Hi&quot;, &quot;Xiaoming&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static void Hello(string action = &quot;Hello&quot;, string who = &quot;World&quot;)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine($&quot;&#123;action&#125; &#123;who&#125;&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä½¿ç”¨å‘½åå‚æ•°ï¼Œç®€åŒ–å¤šä¸ªå¯é€‰å‚æ•°å­˜åœ¨çš„æƒ…å†µä¸‹çš„èµ‹å€¼:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    Hello(who: &quot;XM&quot;);</span><br><span class="line">    Hello(who: &quot;Xiaoming&quot;, action: &quot;out...&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static void Hello(string action = &quot;Hello&quot;, string who = &quot;World&quot;)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine($&quot;&#123;action&#125; &#123;who&#125;&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-å±æ€§-Property"><a href="#8-3-å±æ€§-Property" class="headerlink" title="8.3. å±æ€§ (Property)"></a>8.3. å±æ€§ (Property)</h3><p>å±æ€§æœ¬èº«å°±æ˜¯ [private Field + public Method] ä¸€ç§è¯­æ³•ç³–:</p>
<ul>
<li>å®ƒèƒ½å‡å°‘å¤ªå¤šå†—ä½™çš„æ¨¡æ¿ä»£ç ï¼›å®ƒèƒ½ç®€åŒ–å¯¹å®ä¾‹ä¸­æ•°æ®çš„å¯æ§æ€§çš„è®¿é—®ï¼Œè®©ä»£ç æ›´ç®€æ´</li>
<li>ä½†æ˜¯ä¸è¦å¿˜äº†ï¼Œå®ƒè·Ÿ getter&#x2F;setter æ–¹æ³•çš„æœ¬è´¨æ˜¯ä¸€æ ·çš„ã€‚æœ€åç¼–è¯‘å™¨è¿˜æ˜¯å°†æˆ‘ä»¬å†™çš„å±æ€§ä»£ç è½¬æ¢æˆäº† getter&#x2F;setter æ–¹æ³•çš„å½¢å¼</li>
<li>ä¹Ÿå°±æ˜¯è¯´ <code>r.Width = 333</code> è¿™æ ·çš„å±æ€§èµ‹å€¼ï¼Œæœ¬è´¨å°±æ˜¯æ–¹æ³•è°ƒç”¨</li>
</ul>
<p>ç¤ºä¾‹:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">class Rect</span><br><span class="line">&#123;</span><br><span class="line">    public double Width &#123; get; set; &#125;</span><br><span class="line">    public double Height &#123; get; set; &#125;</span><br><span class="line">    public double Area</span><br><span class="line">    &#123;</span><br><span class="line">        get</span><br><span class="line">        &#123;</span><br><span class="line">            return Width * Height;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // private double Height;</span><br><span class="line">    // public double GetHeight ()</span><br><span class="line">    // &#123;</span><br><span class="line">    //     return Height;</span><br><span class="line">    // &#125;</span><br><span class="line">    // public void SetHeight (double h);</span><br><span class="line">    // &#123;</span><br><span class="line">    //     Height = h;</span><br><span class="line">    // &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Program</span><br><span class="line">&#123;</span><br><span class="line">    static void Main()</span><br><span class="line">    &#123;</span><br><span class="line">        Rect r = new Rect();</span><br><span class="line">        r.Width = 2000;</span><br><span class="line">        r.Height = 333;</span><br><span class="line">        Console.WriteLine(&quot;é¢ç§¯æ˜¯: &#123;0&#125;&quot;, r.Area);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-4-ç´¢å¼•å™¨-Indexer"><a href="#8-4-ç´¢å¼•å™¨-Indexer" class="headerlink" title="8.4. ç´¢å¼•å™¨ (Indexer)"></a>8.4. ç´¢å¼•å™¨ (Indexer)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">static void Main()</span><br><span class="line">&#123;</span><br><span class="line">    string a = &quot;hello&quot;;</span><br><span class="line">    char x1 = a[1];</span><br><span class="line"></span><br><span class="line">    var b = new int[] &#123;1, 2, 3, 4&#125;;</span><br><span class="line">    int x2 = b[1];</span><br><span class="line"></span><br><span class="line">    var c = new List&lt;int&gt; &#123;1, 2, 3, 4&#125;;</span><br><span class="line">    int x3 = c[1];</span><br><span class="line"></span><br><span class="line">    var d = new Dictionary&lt;string, int&gt; &#123;&#123;&quot;xm&quot;, 22&#125;, &#123;&quot;xh&quot;, 24&#125;&#125;;</span><br><span class="line">    int x4 = d[&quot;xm&quot;];</span><br><span class="line"></span><br><span class="line">    var p = new Person();</span><br><span class="line">    p[1] = &quot;æ‚¨å¥½&quot;;</span><br><span class="line">    p[5] = &quot;ä½ å¥½&quot;;</span><br><span class="line">    p[3] = &quot;å…«å˜&quot;;</span><br><span class="line">    Console.WriteLine(p[1]);</span><br><span class="line">    Console.WriteLine(p[2]);</span><br><span class="line">    Console.WriteLine(p[3]);</span><br><span class="line">    Console.WriteLine(p[4]);</span><br><span class="line">    Console.WriteLine(p[5]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Person</span><br><span class="line">&#123;</span><br><span class="line">    private Dictionary&lt;int, string&gt; hiStyles = new Dictionary&lt;int, string&gt;();</span><br><span class="line"></span><br><span class="line">    public string this[int i]</span><br><span class="line">    &#123;</span><br><span class="line">        get</span><br><span class="line">        &#123;</span><br><span class="line">            if (!hiStyles.TryGetValue(i, out string hiStyle))</span><br><span class="line">            &#123;</span><br><span class="line">                hiStyle = &quot;Hello&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">            return $&quot;&#123;hiStyle&#125; &#123;i&#125;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        set</span><br><span class="line">        &#123;</span><br><span class="line">            hiStyles[i] = value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-5-æ„é€ æ–¹æ³•-x2F-æ„é€ å™¨-Constructor"><a href="#8-5-æ„é€ æ–¹æ³•-x2F-æ„é€ å™¨-Constructor" class="headerlink" title="8.5. æ„é€ æ–¹æ³•&#x2F;æ„é€ å™¨ (Constructor)"></a>8.5. æ„é€ æ–¹æ³•&#x2F;æ„é€ å™¨ (Constructor)</h3><h4 id="8-5-1-å¯¹è±¡çš„å®ä¾‹åŒ–"><a href="#8-5-1-å¯¹è±¡çš„å®ä¾‹åŒ–" class="headerlink" title="8.5.1. å¯¹è±¡çš„å®ä¾‹åŒ–"></a>8.5.1. å¯¹è±¡çš„å®ä¾‹åŒ–</h4><p>å¯¹è±¡çš„å®ä¾‹åŒ–ï¼Œåˆ†ä¸ºä¸‹é¢å‡ ä¸ªæ­¥éª¤:</p>
<ol>
<li>åœ¨å†…å­˜ä¸­ï¼Œåˆ†é…ç›¸åº”çš„ç©ºé—´</li>
<li>æŒ‰ç…§ç±»å‹è¿›è¡Œç›¸å…³å­—æ®µçš„åˆå§‹åŒ–å·¥ä½œ</li>
<li>è°ƒç”¨ç›¸åº”çš„ <strong>æ„é€ æ–¹æ³•</strong>ï¼Œè¿›è¡Œç›¸å…³åˆå§‹åŒ–å·¥ä½œ</li>
</ol>
<h4 id="8-5-2-æ„é€ å™¨"><a href="#8-5-2-æ„é€ å™¨" class="headerlink" title="8.5.2. æ„é€ å™¨"></a>8.5.2. æ„é€ å™¨</h4><p>æ‰€è°“çš„æ„é€ æ–¹æ³•ï¼Œå°±æ˜¯ç±»ä¸­å®šä¹‰çš„ä¸€ä¸ªç‰¹æ®Šæ–¹æ³•ã€‚å®ƒç”¨æ¥å¯¹å®ä¾‹ç©ºé—´è¿›è¡Œè‹¥å¹²åˆå§‹åŒ–å·¥ä½œ:</p>
<ul>
<li>æ„é€ æ–¹æ³•å¯ä»¥å†™å¤šä¸ªï¼Œå³å¯ä»¥é‡è½½ (overload)</li>
<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸å†™ä»»ä½•æ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ’å…¥ä¸€ä¸ª <strong>æ— å‚çš„ç©ºçš„</strong>ã€‚ ä½†æ˜¯ï¼Œå¦‚æœä½ åœ¨ç±»ä¸­ï¼Œå®šä¹‰äº†ä»»ä½•çš„æ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¸ä¼šå¸®ä½ å†ç”Ÿæˆäº†</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">class X</span><br><span class="line">&#123;</span><br><span class="line">    public X()</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    public X(int a, int b) // 2</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Program</span><br><span class="line">&#123;</span><br><span class="line">    static void Main()</span><br><span class="line">    &#123;</span><br><span class="line">        new X(); // å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œé‚£ä¹ˆä¼šè°ƒç”¨æ— å‚æ„é€ å™¨ 1</span><br><span class="line">        new X(1, 2); // å›å»è°ƒç”¨ç›¸åº”çš„å…·å¤‡ä¸¤ä¸ªå‚æ•°ï¼Œå¹¶ä¸”ç±»å‹æ­£ç¡®çš„æ„é€ å™¨ 2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-5-3-æ„é€ å™¨é“¾"><a href="#8-5-3-æ„é€ å™¨é“¾" class="headerlink" title="8.5.3. æ„é€ å™¨é“¾"></a>8.5.3. æ„é€ å™¨é“¾</h4><ul>
<li>å¦‚æœä¸æ˜¾å¼ç»§æ‰¿æŸä¸ªç±»ï¼Œé‚£ä¹ˆç»§æ‰¿çš„å°†æ˜¯ objectã€‚å³å¯ä»¥å¿½ç•¥æ‰ <code>: Object</code></li>
<li>å¦‚æœä¸æ˜¾å¼æ·»åŠ æ„é€ å™¨ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ’å…¥ä¸€ä¸ªæ— å‚çš„ã€‚å³å¯ä»¥çœç•¥æ‰ <code>public Son() &#123;&#125;</code></li>
<li>å¦‚æœä¸æ˜¾å¼æŒ‡å®šæ„é€ å™¨é¡ºåºï¼Œé‚£ä¹ˆä»»æ„æ„é€ å™¨éƒ½ä¼šé¦–å…ˆæ‰§è¡Œçˆ¶ç±»çš„æ— å‚æ„é€ å™¨ã€‚å³å¯ä»¥çœç•¥æ‰ <code>: base()</code></li>
<li>æ˜¾å¼æŒ‡å®šæ„é€ å™¨é¡ºåºï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ  <code>: base(xxx)</code> æˆ–è€… <code>: this(xxx)</code></li>
<li>åŸºæœ¬çš„è§„åˆ™æ˜¯: ä»ä¸‹å¾€ä¸Šå¯»æ‰¾ï¼Œç„¶åä»ä¸Šå¾€ä¸‹æ‰§è¡Œã€‚è¿™æ ·å°±æ„æˆäº† <strong>æ„é€ å™¨é“¾</strong></li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">GP</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GP</span>() : <span class="title">base</span>() <span class="comment">// 4</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æˆ‘æ˜¯ä½ çˆ·çˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GP</span>(<span class="params"><span class="built_in">string</span> address</span>) : <span class="title">base</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;çˆ·çˆ·æˆ‘çš„åœ°å€æ˜¯ &#123;0&#125;&quot;</span>, address);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GP</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">string</span> address</span>) : <span class="title">base</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;çˆ·çˆ· &#123;0&#125; çš„åœ°å€æ˜¯ &#123;0&#125;&quot;</span>, name, address);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">PP</span> : <span class="title">GP</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PP</span>() : <span class="title">base</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æˆ‘æ˜¯çˆ¸çˆ¸&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PP</span>(<span class="params"><span class="built_in">string</span> address</span>) : <span class="title">base</span>() <span class="comment">// 3</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;çˆ¸çˆ¸æˆ‘çš„åœ°å€æ˜¯ &#123;0&#125;&quot;</span>, address);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PP</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">string</span> address</span>) : <span class="title">base</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;çˆ¸çˆ¸ &#123;0&#125; çš„åœ°å€æ˜¯ &#123;0&#125;&quot;</span>, name, address);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">You</span> : <span class="title">PP</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">You</span>() : <span class="title">base</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æˆ‘çš„å„¿å­&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">You</span>(<span class="params"><span class="built_in">string</span> name</span>) : <span class="title">this</span>(<span class="params">name, <span class="string">&quot;å¹¿è¥¿&quot;</span></span>) <span class="comment">// 1</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">You</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">string</span> addr</span>) : <span class="title">base</span>(<span class="params">addr</span>) <span class="comment">// 2</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;&#123;0&#125; çš„ &#123;1&#125;&quot;</span>, addr, name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">Son</span> : <span class="title">You</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">You u = <span class="keyword">new</span> You(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="8-5-4-é™æ€æ„é€ å™¨"><a href="#8-5-4-é™æ€æ„é€ å™¨" class="headerlink" title="8.5.4. é™æ€æ„é€ å™¨"></a>8.5.4. é™æ€æ„é€ å™¨</h4><ul>
<li>æ„é€ å™¨æ˜¯ç”¨æ¥åˆå§‹åŒ– <strong>å¯¹è±¡</strong> çš„</li>
<li>é™æ€æ„é€ å™¨æ˜¯ç”¨æ¥åˆå§‹åŒ– <strong>ç±»</strong> çš„</li>
<li>å¯¹è±¡çš„åˆå§‹åŒ–å·¥ä½œï¼Œæ˜¯åœ¨ä»£ç ä¸­é€šè¿‡ new Class çš„æ–¹å¼è§¦å‘çš„</li>
<li>ç±»çš„åˆå§‹åŒ–å·¥ä½œï¼Œæ˜¯ç”± CLR è‡ªåŠ¨æ‰§è¡Œçš„ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨åˆ°æŸä¸ªç±»çš„æ—¶å€™ï¼Œè¿™ä¸ªç±»å°±ä¼š <strong>è¢«</strong> è‡ªåŠ¨åŠ è½½</li>
<li>é™æ€çš„æ„é€ å™¨ï¼Œåªèƒ½æœ‰ä¸€ä¸ªï¼Œè€Œä¸”ä¸èƒ½å¸¦ä»»ä½•å‚æ•°</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class TipCalculator : CalculatorBase</span><br><span class="line">&#123;</span><br><span class="line">    static TipCalculator()</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(&quot;æˆ‘æ˜¯ä¸€ä¸ªå¸¦ static çš„æ„é€ å™¨&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-6-ææ„æ–¹æ³•-x2F-ææ„å™¨-Deconstructor"><a href="#8-6-ææ„æ–¹æ³•-x2F-ææ„å™¨-Deconstructor" class="headerlink" title="8.6. ææ„æ–¹æ³•&#x2F;ææ„å™¨ (Deconstructor)"></a>8.6. ææ„æ–¹æ³•&#x2F;ææ„å™¨ (Deconstructor)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">~TipCalculator()</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(&quot;æˆ‘æ­»çš„å¥½æƒ¨å•Š&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">~æ–‡ä»¶()</span><br><span class="line">&#123;</span><br><span class="line">    this.Close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-7-é™æ€æ–¹æ³•-Static"><a href="#8-7-é™æ€æ–¹æ³•-Static" class="headerlink" title="8.7. é™æ€æ–¹æ³• (Static)"></a>8.7. é™æ€æ–¹æ³• (Static)</h3><p>å°†å½’å±æƒï¼Œäº¤ç»™ç±»ã€‚è°ƒç”¨çš„æ—¶å€™ï¼Œä½¿ç”¨ <code>ç±»å.xxx</code> æ–¹å¼ã€‚</p>
<h3 id="8-8-å°†æ•°æ®è®¾ç½®ä¸ºä¸å˜çš„-const-x2F-readonly"><a href="#8-8-å°†æ•°æ®è®¾ç½®ä¸ºä¸å˜çš„-const-x2F-readonly" class="headerlink" title="8.8. å°†æ•°æ®è®¾ç½®ä¸ºä¸å˜çš„ (const&#x2F;readonly)"></a>8.8. å°†æ•°æ®è®¾ç½®ä¸ºä¸å˜çš„ (const&#x2F;readonly)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é€šè¿‡ private ç­‰æ“ä½œç¬¦å¯ä»¥ä¿æŠ¤æ•°æ®çš„å¤–éƒ¨è®¿é—®å®‰å…¨</span><br><span class="line">é€šè¿‡ const/readonly å¯ä»¥é˜²æ­¢å†…é¬¼</span><br></pre></td></tr></table></figure>

<p>const:</p>
<ul>
<li>å³å¸¸é‡</li>
<li>åŸºäºç¼–è¯‘æœŸçš„æ›¿æ¢ï¼Œè¿è¡ŒæœŸæ˜¯æ²¡æœ‰ä»»ä½•è¿™ä¸ªå˜é‡çš„ä¿¡æ¯çš„</li>
<li>ç›¸å¯¹æ¥è¯´ï¼Œå®ƒä¸éœ€è¦å ç”¨å­˜å‚¨ï¼Œè€Œä¸”ä¸éœ€è¦è¿è¡Œæ—¶æ£€æŸ¥ï¼Œæ‰€ä»¥æ•ˆç‡é«˜</li>
<li>å®ƒçš„ä½¿ç”¨é™åˆ¶è¾ƒå¤šï¼Œæ¯”å¦‚ï¼Œåªèƒ½å°†ä¸€äº›ç®€å•çš„å€¼èµ‹äºˆå®ƒ</li>
<li>ä¸èƒ½æ·»åŠ  static ä¿®é¥°ï¼Œä½†å¯ä»¥ä½¿ç”¨ <code>ç±»å.PI</code> æ¥è®¿é—®</li>
</ul>
<p>readonly:</p>
<ul>
<li>é™å®šå˜é‡åªèƒ½è¯»ï¼Œä¸èƒ½ä¿®æ”¹</li>
<li>å¯ä»¥ä¿®é¥°ä»»ä½•çš„å­—æ®µï¼Œä¸ç®¡æ˜¯ä¸æ˜¯é™æ€çš„</li>
<li>ç›¸å¯¹æ¥è¯´ï¼Œéœ€è¦å ç”¨ç©ºé—´ã€éœ€è¦è¿è¡Œæ—¶æ£€æŸ¥ï¼Œæ•ˆç‡ä¼šä½ä¸€äº›</li>
<li><strong>æ³¨æ„</strong>ï¼Œä½¿ç”¨ readonly ä¿®é¥°æ•°ç»„ç­‰å˜é‡ï¼Œè™½ç„¶å¯ä»¥é˜²æ­¢æ•°ç»„è¢«é‡æ–°èµ‹å€¼ï¼Œä½†ä¸èƒ½é¿å…é‡Œé¢çš„å…ƒç´ è¢«ä¿®æ”¹</li>
</ul>
<p>æœ‰å†…é¬¼ï¼Œåœæ­¢äº¤æ˜“:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class Congming</span><br><span class="line">&#123;</span><br><span class="line">    private const double PI = 3.1415926;</span><br><span class="line">    private readonly double pppi = 3.14;</span><br><span class="line"></span><br><span class="line">    public double QiuMianJi(double r)</span><br><span class="line">    &#123;</span><br><span class="line">        pppi = 333;  // x</span><br><span class="line">        PI = 333;    // x</span><br><span class="line">        return pppi * r * r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-9-ç»§æ‰¿-Inheritance"><a href="#8-9-ç»§æ‰¿-Inheritance" class="headerlink" title="8.9. ç»§æ‰¿ (Inheritance)"></a>8.9. ç»§æ‰¿ (Inheritance)</h3><ul>
<li>ç»§æ‰¿è¡¨ç¤ºï¼Œæˆ‘çš„æ˜¯æˆ‘çš„ï¼Œä½ çš„ä¹Ÿæ˜¯æˆ‘çš„ã€‚ä½¿ç”¨ <code>:</code> è¯­æ³•è¡¨ç¤ºç»§æ‰¿å…³ç³»</li>
<li>ç»§æ‰¿ä¸»è¦ç”¨æ¥æ¶ˆé™¤å†—ä½™ï¼Œè®©é€»è¾‘å¾—ä»¥ <strong>å¤ç”¨</strong>ã€‚é€»è¾‘ä¸Šæ¥è¯´ï¼Œè·Ÿè‡ªç„¶ç•Œçš„åˆ†é—¨åˆ«ç±»æ˜¯å¯¹åº”ä¸€è‡´çš„</li>
<li>new å¯¹è±¡çš„æ—¶å€™ï¼Œä¼š <strong>å¼€è¾Ÿç©ºé—´ã€åˆå§‹åŒ–å­—æ®µã€è°ƒç”¨æ„é€ å™¨</strong>ã€‚å¦‚æœå­˜åœ¨ç»§æ‰¿å…³ç³»çš„è¯ï¼Œåˆ›å»ºçš„å®ä¾‹æ˜¯åˆ†ä¸ºå¤šéƒ¨åˆ†çš„</li>
<li>è°ƒç”¨å®ä¾‹ä¸Šçš„æŸä¸ªæ–¹æ³• Aï¼Œå¦‚æœ A è°ƒç”¨äº†å¦ä¸€ä¸ªæ–¹æ³• Bï¼Œè¿™æ—¶å€™ï¼Œä¼˜å…ˆä¼šä½¿ç”¨ A è‡ªèº«éƒ¨åˆ†ä¸Šé¢å®šä¹‰çš„ Bã€‚ å¦‚æœæƒ³è®© A è°ƒç”¨çš„ B æ˜¯æ´¾ç”Ÿç±» <strong>æœ€ä¸‹é¢</strong> çš„ B çš„è¯ï¼Œä½¿ç”¨ <code>virutal/override</code> å°† B è®¾ç½®ä¸º <strong>è™šå‡½æ•°</strong> å³å¯ã€‚ å­ç±»ä¸­å­˜åœ¨çš„ç›¸åŒæ–¹æ³•ï¼Œå¦‚æœä¸æ˜¯ override çš„ï¼Œé‚£ä¹ˆå°†ä¼šæ˜¯ new çš„ã€‚new å¯ä»¥ä¸å†™</li>
<li>åœ¨ C# ä¸­ï¼Œåªå…è®¸æœ‰ä¸€ä¸ªçˆ¶ç±»ï¼Œå³ <strong>å•ç»§æ‰¿</strong></li>
<li>æ‰€æœ‰ç±»çš„æ ¹åŸºç±»æ˜¯ <strong>object</strong>ã€‚object ä¸­å®šä¹‰äº† ToString&#x2F;GetType&#x2F;Equal ç­‰æ–¹æ³•ã€‚å› æ­¤ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½æ‹¥æœ‰è¿™å‡ ä¸ªæ–¹æ³•</li>
<li>åœ¨æ–¹æ³•ä¸­ï¼Œä½¿ç”¨ <strong>this</strong> è¡¨ç¤ºå½“å‰çš„å¯¹è±¡ï¼Œä½¿ç”¨ <strong>base</strong> è¡¨ç¤ºçˆ¶ç±»éƒ¨åˆ†ã€‚base.Xxx è¡¨ç¤ºè°ƒç”¨çˆ¶ç±»éƒ¨åˆ†çš„ Xxx</li>
<li>ä½¿ç”¨ private ä¿®é¥°çš„æ•°æ®ä¸èƒ½è¢«ç»§æ‰¿ä½¿ç”¨ï¼Œè¿™æ—¶å€™åº”è¯¥ä½¿ç”¨ <strong>protected</strong></li>
</ul>
<p>åŸºæœ¬è¯­æ³•:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class A : object &#123; void Say() &#123;Console.WriteLine(&quot;hello&quot;);&#125; &#125;</span><br><span class="line">class B : A &#123;&#125;</span><br><span class="line">class C : B &#123; void Say() &#123;Console.WriteLine(&quot;world&quot;);&#125; &#125;</span><br><span class="line">class D : C &#123;&#125;</span><br><span class="line">D d = new D();</span><br><span class="line">d.Say();</span><br></pre></td></tr></table></figure>

<h4 id="8-9-1-è™šæ–¹æ³•-virtual-x2F-override"><a href="#8-9-1-è™šæ–¹æ³•-virtual-x2F-override" class="headerlink" title="8.9.1. è™šæ–¹æ³• (virtual&#x2F;override)"></a>8.9.1. è™šæ–¹æ³• (virtual&#x2F;override)</h4><p>è™šå‡½æ•°:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">Name</span>()</span> &#123; <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Say</span>()</span> &#123; Console.WriteLine(<span class="keyword">this</span>.Name()); &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">B</span> : <span class="title">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="built_in">string</span> <span class="title">Name</span>()</span> &#123; <span class="keyword">return</span> <span class="string">&quot;world&quot;</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">new</span> <span class="keyword">void</span> <span class="title">Say</span>()</span> &#123; Console.WriteLine(<span class="string">&quot;heihei&quot;</span> + Name()); <span class="keyword">base</span>.Say(); &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">C</span> : <span class="title">B</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">string</span> <span class="title">Name</span>()</span> &#123; <span class="keyword">return</span> <span class="string">&quot;who&quot;</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Say</span>()</span> &#123; Console.WriteLine(<span class="string">&quot;hahaha&quot;</span> + Name()); &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">D</span> : <span class="title">C</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">string</span> <span class="title">Name</span>()</span> &#123; <span class="keyword">return</span> <span class="string">&quot;ryou&quot;</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> D();</span><br><span class="line">d.Say();</span><br></pre></td></tr></table></figure>

<p>è™šä¸è™š?</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">Name</span>()</span> &#123; <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Say</span>()</span> &#123; Console.WriteLine(<span class="keyword">this</span>.Name()); &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">B</span> : <span class="title">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">new</span> <span class="keyword">virtual</span> <span class="built_in">string</span> <span class="title">Name</span>()</span> &#123; <span class="keyword">return</span> <span class="string">&quot;world&quot;</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Say</span>()</span> &#123; Console.WriteLine(<span class="string">&quot;heihei&quot;</span> + Name()); <span class="keyword">base</span>.Say(); &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">C</span> : <span class="title">B</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">string</span> <span class="title">Name</span>()</span> &#123; <span class="keyword">return</span> <span class="string">&quot;who&quot;</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Say</span>()</span> &#123; Console.WriteLine(<span class="string">&quot;hahaha&quot;</span> + Name()); &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">D</span> : <span class="title">C</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">string</span> <span class="title">Name</span>()</span> &#123; <span class="keyword">return</span> <span class="string">&quot;ryou&quot;</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">A a = <span class="keyword">new</span> D();</span><br><span class="line">a.Say();</span><br><span class="line"><span class="keyword">class</span> <span class="title">GrandPP</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">PP</span> : <span class="title">GrandPP</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">You</span> : <span class="title">PP</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">You</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">You</span>(<span class="params"><span class="built_in">string</span> name</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">You</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">string</span> addr</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(name + <span class="string">&quot;:&quot;</span> + addr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> You();</span><br><span class="line"><span class="keyword">new</span> You(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line"><span class="keyword">new</span> You(<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="string">&quot;æ¹–å—&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="8-9-2-æŠ½è±¡æ–¹æ³•-abstract"><a href="#8-9-2-æŠ½è±¡æ–¹æ³•-abstract" class="headerlink" title="8.9.2. æŠ½è±¡æ–¹æ³• (abstract)"></a>8.9.2. æŠ½è±¡æ–¹æ³• (abstract)</h4><ul>
<li>ç»§æ‰¿ä¸‹æ¥çš„ï¼Œä¸ä¸€å®šæ˜¯æƒåˆ©ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä¹‰åŠ¡ã€‚ä¿—è¯­æœ‰äº‘ <strong>çˆ¶å€ºå­å¿</strong></li>
<li>é€šè¿‡åœ¨çˆ¶ç±»ä¸­ï¼Œå°†æŸä¸ªæ–¹æ³•ç”¨ <code>abstract</code> ä¿®é¥°ï¼Œè¡¨ç¤ºå®ƒæ˜¯å€ºåŠ¡â€¦</li>
<li>æŠ½è±¡æ–¹æ³•å¯ä»¥ (1) çº¦æŸå­ç±»çš„è¡Œä¸º (2) å°†çˆ¶ç±»ä¸­æ— æ³•å®ç°çš„åŠŸèƒ½ï¼Œäº¤ç»™å­ç±»å»å®ç°</li>
<li>æŠ½è±¡ç±»æ˜¯ä¸èƒ½è¢«å®ä¾‹åŒ–çš„</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Baba</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Money = <span class="number">0.1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Sanjuhua</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æ¼‚äº®çš„å¥³å­©å­éƒ½æ¯”è¾ƒå±é™©&quot;</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æˆ‘æœ‰å¾ˆå¤šé’±ï¼Œè—åœ¨æŸä¸ªåœ°æ–¹&quot;</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;ä½†æˆ‘ä¸å‘Šè¯‰ä½ åœ¨å“ªé‡Œ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> èŠ±å…‰è¿™äº›é’±();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">You</span> : <span class="title">Baba</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Sanjuhua</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æ¼‚äº®çš„å¥³å­©å­æ˜¯å€¼å¾—æˆ‘ä»¬èŠ±ä¸€ç”Ÿå»è¿½æ±‚çš„&quot;</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æˆ‘æœ‰å¾ˆå¤šé’±ï¼Œå°±æ”¾åœ¨ä¸­å›½é“¶è¡Œçš„é’±åº“é‡Œ&quot;</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;ä½†ä¸è¦æŠŠé’±æ”¾çœ¼é‡Œï¼Œä½œä¸ºçœŸç”·äººï¼Œè¦æ•¢äº 996ï¼Œå¥‰çŒ®äººç”Ÿä»·å€¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> èŠ±å…‰è¿™äº›é’±()</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;ç¬¬ä¸€å¤©ï¼ŒèŠ±äº† 3 äº¿&quot;</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;ç¬¬äºŒå¤©ï¼ŒèŠ±äº† 33 äº¿&quot;</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;ç¬¬ä¸‰å¤©ï¼ŒèŠ±äº† 333 äº¿&quot;</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;ç¬¬å››å¤©ï¼Œæ¢¦é†’äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-10-å¤šæ€-Polymorphism"><a href="#8-10-å¤šæ€-Polymorphism" class="headerlink" title="8.10. å¤šæ€ (Polymorphism)"></a>8.10. å¤šæ€ (Polymorphism)</h3><p>å¤šæ€æ˜¯ä¸€ä¸ªæ¥è‡ªç”Ÿç‰©å­¦ä¸Šçš„æ¦‚å¿µï¼Œ<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%A4%9A%E6%80%81%E7%8E%B0%E8%B1%A1">å‚è§ç™¾åº¦ç™¾ç§‘</a>:</p>
<ul>
<li>åœ¨è¯­è¨€ä¸­ï¼Œå¤šæ€æŒ‡è°ƒç”¨åŒä¸€ä¸ªç±»å‹çš„ç›¸åŒæ–¹æ³•&#x2F;å±æ€§ï¼Œä¼šäº§ç”Ÿä¸åŒç»“æœçš„ç°è±¡ã€‚ äº§ç”Ÿä¸åŒç»“æœçš„åŸå› æ˜¯æ–¹æ³•å®è´¨è°ƒç”¨äº†ä¸åŒæ´¾ç”Ÿç±»ä¸­çš„ä¸åŒå®ç°ã€‚</li>
<li>è™šæ–¹æ³•æ˜¯å®ç°å¤šæ€æ€§çš„ä¸»è¦æ‰‹æ®µï¼Œæ¥å£å’ŒæŠ½è±¡ç±»æ˜¯å¤šæ€çš„å……åˆ†ä½“ç°</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰¹é‡å¤„ç† (å…³å¿ƒçš„æ˜¯å…±æ€§)</span></span><br><span class="line"></span><br><span class="line">Animal[] animals = <span class="keyword">new</span> Animal[<span class="number">3</span>];</span><br><span class="line">animals[<span class="number">0</span>] = <span class="keyword">new</span> Animal();</span><br><span class="line">animals[<span class="number">1</span>] = <span class="keyword">new</span> ç¾å¥³();</span><br><span class="line">animals[<span class="number">2</span>] = <span class="keyword">new</span> é‡å…½();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; animals.Length; i++)</span><br><span class="line">&#123;</span><br><span class="line">    Animal a = animals[i];</span><br><span class="line">    a.Eat();</span><br><span class="line">    a.Sleep();</span><br><span class="line">    a.WakeUp();</span><br><span class="line">    a.Drink();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€‚é…çš„å‚æ•°ç±»å‹</span></span><br><span class="line"><span class="keyword">interface</span> èƒ½å¹²æ´»çš„ä¸œè¥¿ &#123; <span class="keyword">void</span> å¹²æ´»(); &#125;</span><br><span class="line"><span class="keyword">class</span> äºº : èƒ½å¹²æ´»çš„ä¸œè¥¿ &#123; <span class="keyword">void</span> å¹²æ´» () &#123; ... &#125;; &#125;</span><br><span class="line"><span class="keyword">class</span> çŒª : èƒ½å¹²æ´»çš„ä¸œè¥¿ &#123; <span class="keyword">void</span> å¹²æ´» () &#123; ... &#125;; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> æ‹›è˜ (èƒ½å¹²æ´»çš„ä¸œè¥¿ x) &#123;</span><br><span class="line">    x.å¹²æ´»();</span><br><span class="line">&#125;</span><br><span class="line">æ‹›è˜(äºº);</span><br><span class="line">æ‹›è˜(çŒª);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€‚é…çš„è¿”å›å€¼ (çº¦å®šè·Ÿå®ç°çš„å’Œè°)</span></span><br><span class="line"></span><br><span class="line"><span class="function">Dog <span class="title">GiveADog</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> äºŒå“ˆ();</span><br><span class="line">&#125;</span><br><span class="line">Animal aaa = GiveADog();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥å£ä¸å¤šæ€</span></span><br><span class="line"></span><br><span class="line">IHelpable xxx = <span class="keyword">new</span> TipCalculator(<span class="number">222</span>);</span><br><span class="line">xxx.Help();</span><br></pre></td></tr></table></figure>

<h3 id="8-11-é™æ€ç±»-x2F-static"><a href="#8-11-é™æ€ç±»-x2F-static" class="headerlink" title="8.11. é™æ€ç±»&#x2F;static"></a>8.11. é™æ€ç±»&#x2F;static</h3><p>é™åˆ¶é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•ï¼Œå¿…é¡»æ˜¯é™æ€çš„ã€‚å…¸å‹çš„ä»£è¡¨æ˜¯ Math ç±»ã€‚</p>
<h3 id="8-12-å¯†å°ç±»-x2F-sealed"><a href="#8-12-å¯†å°ç±»-x2F-sealed" class="headerlink" title="8.12. å¯†å°ç±»&#x2F;sealed"></a>8.12. å¯†å°ç±»&#x2F;sealed</h3><p>è¿™å°±ä»è¯­æ³•ä¸Šï¼Œé¿å…äº†æŸä¸ªç±»è¢«ç»§æ‰¿çš„å¯èƒ½ã€‚</p>
<h3 id="8-13-åˆ†éƒ¨ç±»-x2F-partial"><a href="#8-13-åˆ†éƒ¨ç±»-x2F-partial" class="headerlink" title="8.13. åˆ†éƒ¨ç±»&#x2F;partial"></a>8.13. åˆ†éƒ¨ç±»&#x2F;partial</h3><p>è®©ç±»å¯ä»¥å†™æˆå¤šéƒ¨åˆ†ã€‚åœ¨ç¼–è¯‘çš„ç¯èŠ‚ï¼Œç¼–è¯‘å™¨å°†ä¼šå¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨åˆå¹¶ä¹‹åå†ç¼–è¯‘ã€‚</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">MyLove</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> ä½ æƒ³æˆ‘å—()</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">MyLove</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> æˆ‘æƒ³ä½ ()</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-14-åŸºç±»-Object"><a href="#8-14-åŸºç±»-Object" class="headerlink" title="8.14. åŸºç±» Object"></a>8.14. åŸºç±» Object</h3><h4 id="8-14-1-ToString"><a href="#8-14-1-ToString" class="headerlink" title="8.14.1. ToString"></a>8.14.1. ToString</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">TipCalculator</span> : <span class="title">CalculatorBase</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">string</span> <span class="title">ToString</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">$&quot;æˆ‘æ˜¯ä¸€ä¸ªè´¦å•ç±»ï¼Œä¼ å…¥çš„å‚æ•°æ˜¯ <span class="subst">&#123;Bill&#125;</span>&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;&#123;0&#125;&quot;</span>, <span class="keyword">new</span> TipCalculator(<span class="number">200</span>));</span><br></pre></td></tr></table></figure>

<h3 id="8-15-ç±»çš„æ‰©å±•æœºåˆ¶"><a href="#8-15-ç±»çš„æ‰©å±•æœºåˆ¶" class="headerlink" title="8.15. ç±»çš„æ‰©å±•æœºåˆ¶"></a>8.15. ç±»çš„æ‰©å±•æœºåˆ¶</h3><p>ä¸ºæŸä¸ªç±»æ‰©å±•åŠŸèƒ½çš„åŸºæœ¬æ–¹å¼:</p>
<ol>
<li>ç›´æ¥ä¿®æ”¹æºç ï¼Œæ·»åŠ æƒ³è¦çš„æ–¹æ³•</li>
<li>é€šè¿‡ç»§æ‰¿çš„æ–¹å¼ï¼Œä½ çš„æ˜¯æˆ‘çš„æˆ‘çš„è¿˜æ˜¯æˆ‘çš„</li>
</ol>
<p>å¦‚æœæ— æ³•ä¿®æ”¹æºç ã€è€Œä¸”ä¸èƒ½ç»§æ‰¿æ—¶ï¼Œå°±éœ€è¦ä¸‹é¢è¿™ç§æ‰©å±•æ‰‹æ®µï¼Œå…·å¤‡ç‰¹ç‚¹:</p>
<ul>
<li>å¾ˆçµæ´»å¾ˆæ–¹ä¾¿</li>
<li>ä½†éœ€è¦æ…ç”¨</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="number">90.</span>Repeat(<span class="string">&quot;-&quot;</span>));</span><br><span class="line">        Console.WriteLine(<span class="number">30.</span>Repeat(<span class="string">&quot;+  &quot;</span>));</span><br><span class="line">        Console.WriteLine(<span class="number">30.</span>Repeat(<span class="string">&quot;|  &quot;</span>));</span><br><span class="line">        Console.WriteLine(<span class="number">30.</span>Repeat(<span class="string">&quot;|  &quot;</span>));</span><br><span class="line">        <span class="number">100.</span>Times(() =&gt; Console.Write(<span class="string">&quot;IOU &quot;</span>)); Console.WriteLine();</span><br><span class="line">        Console.WriteLine(<span class="number">30.</span>Repeat(<span class="string">&quot;|  &quot;</span>));</span><br><span class="line">        Console.WriteLine(<span class="number">30.</span>Repeat(<span class="string">&quot;|  &quot;</span>));</span><br><span class="line">        Console.WriteLine(<span class="number">30.</span>Repeat(<span class="string">&quot;+  &quot;</span>));</span><br><span class="line">        Console.WriteLine(<span class="number">90.</span>Repeat(<span class="string">&quot;-&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">SuibianQigemingzi</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Cl0ne</span>(<span class="params"><span class="keyword">this</span> <span class="built_in">string</span> s</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;hello <span class="subst">&#123;s&#125;</span>!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ClOne</span>(<span class="params"><span class="keyword">this</span> <span class="built_in">string</span> s</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;hello <span class="subst">&#123;s&#125;</span>!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">C1one</span>(<span class="params"><span class="keyword">this</span> <span class="built_in">string</span> s</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;hello <span class="subst">&#123;s&#125;</span>!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Hello</span>(<span class="params"><span class="keyword">this</span> <span class="built_in">string</span> s</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;hello <span class="subst">&#123;s&#125;</span>!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Hi</span>(<span class="params"><span class="keyword">this</span> <span class="built_in">int</span> s, <span class="built_in">int</span> n = <span class="number">1</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;s&#125;</span> åŠ ä¸Š <span class="subst">&#123;n&#125;</span> ä¸º <span class="subst">&#123;s + n&#125;</span>!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">Rot13</span>(<span class="params"><span class="keyword">this</span> <span class="built_in">string</span> str</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="built_in">char</span> c <span class="keyword">in</span> str)</span><br><span class="line">        &#123;</span><br><span class="line">            sb.Append(RotChar(c));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.ToString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">char</span> <span class="title">RotChar</span>(<span class="params"><span class="built_in">char</span> c</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">byte</span> code = (<span class="built_in">byte</span>)c;</span><br><span class="line">        <span class="keyword">if</span> (c &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; c &lt;= <span class="string">&#x27;z&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="built_in">char</span>)(code + <span class="number">13</span> &gt; <span class="number">122</span> ? code - <span class="number">13</span> : code + <span class="number">13</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (c &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; c &lt;= <span class="string">&#x27;Z&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="built_in">char</span>)(code + <span class="number">13</span> &gt; <span class="number">90</span> ? code - <span class="number">13</span> : code + <span class="number">13</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">Repeat</span>(<span class="params"><span class="keyword">this</span> <span class="built_in">int</span> count, <span class="built_in">string</span> source</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; count; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            sb.Append(source);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sb.ToString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Times</span>(<span class="params"><span class="keyword">this</span> <span class="built_in">int</span> count, Action action</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; count; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            action();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-æ¥å£-Interface"><a href="#9-æ¥å£-Interface" class="headerlink" title="9. æ¥å£ (Interface)"></a>9. æ¥å£ (Interface)</h2><ul>
<li>æ¥å£æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå¯ä»¥è¿›è¡Œ <strong>å¤šç»§æ‰¿</strong> çš„çº¯çš„æŠ½è±¡ç±»ã€‚å®ƒæ˜¯å•ç»§æ‰¿çš„ä¸€ç§ä¾‹å¤–</li>
<li>ä½¿ç”¨ interface å…³é”®è¯å£°æ˜æ¥å£ï¼Œæ¥å£é‡Œé¢åªèƒ½åŒ…å«æ–¹æ³•ã€‚æŒ‰ç…§ä¹ æƒ¯ï¼Œä¸€èˆ¬ä½¿ç”¨ IXxx çš„æ–¹å¼å‘½åæ¥å£</li>
<li>ä¸éœ€è¦ä½¿ç”¨ public ä¿®é¥°ç¬¦ï¼Œå› ä¸ºæ¥å£é‡Œæ‰€æœ‰æ–¹æ³•é»˜è®¤éƒ½æ˜¯å…¬å¼€çš„ã€‚æ–¹æ³•ä¸éœ€è¦æœ‰æ–¹æ³•ä½“</li>
<li>æ¥å£å®é™…ä¸Šå°±æ˜¯ä¸€ç§ <strong>åˆåŒ</strong>ï¼Œå®ƒèµ·åˆ°çš„ä½œç”¨æ˜¯åˆ¶å®šç»Ÿä¸€çš„ <strong>è§„åˆ™</strong></li>
<li>æ¥å£æœ‰å¾ˆå¤šå¥½å¤„: blahblahblahâ€¦ é¢å‘æ¥å£ç¼–ç¨‹æ˜¯ä¸€ç§å¥½çš„ç¼–ç¨‹å®è·µ</li>
</ul>
<h3 id="9-1-IComparable-æ¥å£ä½¿ç”¨ç¤ºä¾‹"><a href="#9-1-IComparable-æ¥å£ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="9.1. IComparable æ¥å£ä½¿ç”¨ç¤ºä¾‹"></a>9.1. IComparable æ¥å£ä½¿ç”¨ç¤ºä¾‹</h3><p>IComparable ç”¨æ¥ä¸ºä¸¤ä¸ªå¯¹è±¡è¿›è¡Œæ¯”è¾ƒæä¾›æ¯”è¾ƒçš„è§„åˆ™:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Person</span> : <span class="title">IComparable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Salary &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">double</span> sal, <span class="built_in">int</span> age</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Name = name;</span><br><span class="line">        Salary = sal;</span><br><span class="line">        Age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">CompareTo</span>(<span class="params"><span class="built_in">object</span>? obj</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> wo = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">var</span> ni = (Person) obj;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// if (wo.Salary &gt; ni.Salary) return -1;</span></span><br><span class="line">        <span class="comment">// if (wo.Salary &lt; ni.Salary) return 1;</span></span><br><span class="line">        <span class="comment">// return 0;</span></span><br><span class="line">        <span class="keyword">return</span> wo.Salary - ni.Salary;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">&quot;a-å°æ˜&quot;</span>, <span class="number">20000</span>, <span class="number">50</span>);</span><br><span class="line">    <span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">&quot;c-å°å¼ &quot;</span>, <span class="number">7000</span>, <span class="number">25</span>);</span><br><span class="line">    <span class="keyword">var</span> p3 = <span class="keyword">new</span> Person(<span class="string">&quot;b-å°ç‹&quot;</span>, <span class="number">15000</span>, <span class="number">35</span>);</span><br><span class="line">    <span class="keyword">var</span> p4 = <span class="keyword">new</span> Person(<span class="string">&quot;d-å°çº¢&quot;</span>, <span class="number">7500</span>, <span class="number">19</span>);</span><br><span class="line">    <span class="keyword">var</span> p5 = <span class="keyword">new</span> Person(<span class="string">&quot;e-å°å¼º&quot;</span>, <span class="number">5000</span>, <span class="number">22</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> persons = <span class="keyword">new</span> Person[] &#123;p1, p2, p3, p4, p5&#125;;</span><br><span class="line"></span><br><span class="line">    Array.Sort(persons);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> p <span class="keyword">in</span> persons)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;p.Name&#125;</span>: <span class="subst">&#123;p.Age&#125;</span> å², æ”¶å…¥ä¸º <span class="subst">&#123;p.Salary&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="10-ç»“æ„ä½“-Struct"><a href="#10-ç»“æ„ä½“-Struct" class="headerlink" title="10. ç»“æ„ä½“ (Struct)"></a>10. ç»“æ„ä½“ (Struct)</h2><ul>
<li>å®ƒè·Ÿ class éå¸¸åƒï¼Œä½†å®ƒæ˜¯å€¼ç±»å‹</li>
<li>ç”±äºæ˜¯å€¼ç±»å‹ï¼Œæ‰€ä»¥æ•ˆç‡é«˜:<ul>
<li>æ ˆä¸Šï¼Œç”¨å®Œé€€æ ˆï¼Œä¸éœ€è¦åƒåœ¾å›æ”¶</li>
<li>å¯¹è±¡å†…éƒ¨</li>
</ul>
</li>
<li>å®é™…ä¸Šï¼Œæˆ‘ä»¬çš„å¸¸è§é¢„å®šä¹‰ç±»å‹ï¼Œéƒ½æ˜¯å®ç°ä¸º struct (int&#x2F;float)</li>
<li>ç»“æ„ä½“ï¼Œé»˜è®¤æ˜¯å¯†å°çš„ï¼Œå› æ­¤ï¼Œå®ƒä¸èƒ½ç»§æ‰¿</li>
<li>å®ƒæ”¯æŒ partial çš„ç”¨æ³•</li>
<li>å®ƒæ”¯æŒä½¿ç”¨æ„é€ å™¨:<ul>
<li>åœ¨æ„é€ å™¨ä¸­ï¼Œéœ€è¦ç¡®ä¿ä¸ºæ¯ä¸ªæˆå‘˜èµ‹å€¼</li>
<li>åŒ…å«ä¸€ä¸ªé»˜è®¤æ„é€ å™¨ï¼Œé‡Œé¢ä¼šå¯¹æ‰€æœ‰æˆå‘˜è¿›è¡Œåˆå§‹åŒ–ï¼Œæˆ‘ä»¬ä¸èƒ½å°†å…¶è¦†ç›–æ‰</li>
</ul>
</li>
<li>å®ƒä¸éœ€è¦ï¼Œä¹Ÿä¸èƒ½æœ‰ææ„æ–¹æ³•</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    TestStuct();</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;ç»“æŸäº†&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">TestStuct</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    YellowMan a = <span class="keyword">new</span> YellowMan();</span><br><span class="line">    a.Name = <span class="string">&quot;å°é»„äººç”²&quot;</span>;</span><br><span class="line">    a.Score = <span class="number">333.4</span>;</span><br><span class="line"></span><br><span class="line">    YellowMan b = <span class="keyword">new</span> YellowMan();</span><br><span class="line">    b.Name = <span class="string">&quot;å°é»„äººä¹™&quot;</span>;</span><br><span class="line">    b.Score = <span class="number">133.4</span>;</span><br><span class="line"></span><br><span class="line">    b.ZiWoJieShao();</span><br><span class="line">    Console.WriteLine(b);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> d = <span class="keyword">new</span> YellowMan(<span class="string">&quot;kkk&quot;</span>, <span class="number">222</span>);</span><br><span class="line">    Console.WriteLine(d.Name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> YellowMan</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Score;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">YellowMan</span>(<span class="params"><span class="built_in">string</span> n, <span class="built_in">double</span> s</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Name = n;</span><br><span class="line">        Score = s;</span><br><span class="line">        Age = <span class="number">23</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ZiWoJieShao</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;æˆ‘æ˜¯ <span class="subst">&#123;Name&#125;</span>,æˆ‘çš„å¯çˆ±ç¨‹åº¦ä¸º <span class="subst">&#123;Score&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">string</span> <span class="title">ToString</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello, å°é»„äºº&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">B</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> YellowMan c = <span class="keyword">new</span> YellowMan();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="11-æšä¸¾-Enum"><a href="#11-æšä¸¾-Enum" class="headerlink" title="11. æšä¸¾ (Enum)"></a>11. æšä¸¾ (Enum)</h2><p>int&#x2F;1 2 3 .. .. 3 double â€¦.. bool: true&#x2F;false</p>
<p>Gender (ç”·&#x2F;å¥³&#x2F;æœªçŸ¥)</p>
<h3 id="11-1-åŸºæœ¬ä½¿ç”¨"><a href="#11-1-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="11.1. åŸºæœ¬ä½¿ç”¨"></a>11.1. åŸºæœ¬ä½¿ç”¨</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    checked</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine((<span class="built_in">int</span>)Gender3.å¥³);</span><br><span class="line">        Console.WriteLine((<span class="built_in">int</span>)Gender3.ç”·);</span><br><span class="line">        Console.WriteLine((<span class="built_in">int</span>)Gender3.æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ç”·æ˜¯å¥³å®ƒåˆ°åº•æ˜¯ç”·æ˜¯å¥³å‘¢è°çŸ¥é“å‘¢ä¸ç®¡ä»–äº†);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (Gender4.æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ç”·æ˜¯å¥³å®ƒåˆ°åº•æ˜¯ç”·æ˜¯å¥³å‘¢è°çŸ¥é“å‘¢ä¸ç®¡ä»–äº† == Gender4.ç”·)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Yes.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">enum</span> MyBool</span><br><span class="line">&#123;</span><br><span class="line">    True,</span><br><span class="line">    False</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">enum</span> Gender</span><br><span class="line">&#123;</span><br><span class="line">    ç”·,</span><br><span class="line">    å¥³,</span><br><span class="line">    æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ç”·æ˜¯å¥³å®ƒåˆ°åº•æ˜¯ç”·æ˜¯å¥³å‘¢è°çŸ¥é“å‘¢ä¸ç®¡ä»–äº†</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">enum</span> Gender2</span><br><span class="line">&#123;</span><br><span class="line">    ç”· = <span class="number">0</span>,</span><br><span class="line">    å¥³ = <span class="number">1</span>,</span><br><span class="line">    æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ç”·æ˜¯å¥³å®ƒåˆ°åº•æ˜¯ç”·æ˜¯å¥³å‘¢è°çŸ¥é“å‘¢ä¸ç®¡ä»–äº† = <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">enum</span> Gender3</span><br><span class="line">&#123;</span><br><span class="line">    ç”· = <span class="number">110</span>,</span><br><span class="line">    å¥³,</span><br><span class="line">    æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ç”·æ˜¯å¥³å®ƒåˆ°åº•æ˜¯ç”·æ˜¯å¥³å‘¢è°çŸ¥é“å‘¢ä¸ç®¡ä»–äº† = <span class="number">120</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">enum</span> Gender4</span><br><span class="line">&#123;</span><br><span class="line">    ç”· = <span class="number">110</span>,</span><br><span class="line">    å¥³,</span><br><span class="line">    æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ç”·æ˜¯å¥³å®ƒåˆ°åº•æ˜¯ç”·æ˜¯å¥³å‘¢è°çŸ¥é“å‘¢ä¸ç®¡ä»–äº† = ç”·</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">enum</span> Gender5 : <span class="built_in">short</span></span><br><span class="line">&#123;</span><br><span class="line">    ç”· = <span class="number">110</span>,</span><br><span class="line">    å¥³,</span><br><span class="line">    æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ç”·æ˜¯å¥³å®ƒåˆ°åº•æ˜¯ç”·æ˜¯å¥³å‘¢è°çŸ¥é“å‘¢ä¸ç®¡ä»–äº† = ç”·</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">MyGender</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> ç”· = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> å¥³ = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">int</span> æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ç”·æ˜¯å¥³å®ƒåˆ°åº•æ˜¯ç”·æ˜¯å¥³å‘¢è°çŸ¥é“å‘¢ä¸ç®¡ä»–äº† = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="11-2-Flags-TODO"><a href="#11-2-Flags-TODO" class="headerlink" title="11.2. Flags (TODO)"></a>11.2. Flags (TODO)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">Flags</span>]</span><br><span class="line"><span class="built_in">enum</span> FeichangJincouDeLeixing</span><br><span class="line">&#123;</span><br><span class="line">    A = <span class="number">0x12</span>,</span><br><span class="line">    B = <span class="number">0x13</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">111111</span></span><br><span class="line"><span class="number">101001</span></span><br></pre></td></tr></table></figure>

<h3 id="11-3-åŸºæœ¬-API"><a href="#11-3-åŸºæœ¬-API" class="headerlink" title="11.3. åŸºæœ¬ API"></a>11.3. åŸºæœ¬ API</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span> (<span class="built_in">string</span> name <span class="keyword">in</span> Enum.GetNames(<span class="keyword">typeof</span>(Gender)))</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> v <span class="keyword">in</span> Enum.GetValues(<span class="keyword">typeof</span>(Gender)))</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine((<span class="built_in">int</span>)v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="12-å§”æ‰˜-Delegate"><a href="#12-å§”æ‰˜-Delegate" class="headerlink" title="12. å§”æ‰˜ (Delegate)"></a>12. å§”æ‰˜ (Delegate)</h2><ul>
<li>èƒŒæ™¯:<ul>
<li>æˆ‘ä»¬éœ€è¦é€šè¿‡å‚æ•°çš„å½¢å¼å»ä¼ é€’ä¸€äº›é€»è¾‘</li>
<li>é€»è¾‘çš„åŸºæœ¬å•å…ƒæ˜¯æ–¹æ³•</li>
<li>å¾ˆé—æ†¾çš„æ˜¯ï¼Œæ–¹æ³•åœ¨ C# ä¸­å¹¶ä¸æ˜¯æŸç§ç±»å‹ï¼Œä¹Ÿä¸å…·å¤‡ç›¸åº”çš„å®ä¾‹ã€‚å› æ­¤ï¼Œå®ƒä¸èƒ½ä½œä¸ºå‚æ•°è¢«ä¼ é€’</li>
<li>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€å®šæ–¹å¼ï¼Œè¾¾åˆ°èƒ½å¤Ÿä¼ é€’æ–¹æ³• (ä»¥åŠå…¶ä¸­çš„é€»è¾‘) çš„ç›®çš„</li>
<li>ä¸€ç§ä¼ ç»Ÿçš„æ–¹å¼ï¼Œæ˜¯å°†æ–¹æ³•åŒ…å«åœ¨æŸä¸ªç±»ä¸­ï¼Œç„¶åå®ä¾‹åŒ–å¹¶ä¼ é€’ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼ç‰¹åˆ«éº»çƒ¦</li>
<li>å› æ­¤ï¼Œåœ¨ C# ä¸­ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±æ¨å‡ºäº†ä¸€ç§ç±»å‹ï¼Œå«åšå§”æ‰˜ (Delegate)</li>
</ul>
</li>
<li>æ€»è€Œè¨€ä¹‹ï¼Œé€šè¿‡å§”æ‰˜æœºåˆ¶ï¼Œè¾¾åˆ° <strong>åƒä¼ é€’å¯¹è±¡å®ä¾‹ä¸€æ ·ï¼Œä¼ é€’æ–¹æ³•</strong> çš„ç›®çš„</li>
</ul>
<h3 id="12-1-å†™ä¸€ä¸ªæ–¹æ³•-MyAdd-ï¼Œæ±‚å–-è‹¥å¹²æ•°-çš„å’Œ"><a href="#12-1-å†™ä¸€ä¸ªæ–¹æ³•-MyAdd-ï¼Œæ±‚å–-è‹¥å¹²æ•°-çš„å’Œ" class="headerlink" title="12.1. å†™ä¸€ä¸ªæ–¹æ³• MyAdd ï¼Œæ±‚å– è‹¥å¹²æ•° çš„å’Œ"></a>12.1. å†™ä¸€ä¸ªæ–¹æ³• MyAdd ï¼Œæ±‚å– <strong>è‹¥å¹²æ•°</strong> çš„å’Œ</h3><h4 id="12-1-1-åŸå§‹å†™æ³•"><a href="#12-1-1-åŸå§‹å†™æ³•" class="headerlink" title="12.1.1. åŸå§‹å†™æ³•"></a>12.1.1. åŸå§‹å†™æ³•</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Console.ForegroundColor = ConsoleColor.Red;</span></span><br><span class="line">    <span class="comment">// Console.WriteLine(sum);</span></span><br><span class="line">    <span class="comment">// Console.ResetColor();</span></span><br><span class="line">    <span class="comment">// å°†ä¸Šé¢ä¸‰å±€ï¼Œæ”¾åˆ°ä¸€ä¸ªå¯¹è±¡é‡Œï¼Œç„¶å</span></span><br><span class="line">    <span class="built_in">object</span> o1 = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> r1 = MyAdd(o1, <span class="number">12</span>, <span class="number">32</span>, <span class="number">1112232</span>, <span class="number">43</span>, <span class="number">1112212</span>, <span class="number">3232323</span>, <span class="number">123</span>);</span><br><span class="line">    <span class="built_in">int</span> r2 = MyAdd(o2, <span class="number">222</span>, <span class="number">333</span>, <span class="number">444</span>);</span><br><span class="line">    <span class="built_in">int</span> r3 = MyAdd(o3, <span class="number">11</span>, <span class="number">2323</span>, <span class="number">4344</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">MyAdd</span>(<span class="params"><span class="built_in">object</span> gaosuwogaigansm, <span class="keyword">params</span> <span class="built_in">int</span>[] nums</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; nums.Length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        sum += nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Console.ForegroundColor = ConsoleColor.Red;</span></span><br><span class="line">    <span class="comment">// Console.WriteLine(sum);</span></span><br><span class="line">    <span class="comment">// Console.ResetColor();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Console.BackgroundColor = ConsoleColor.Red;</span></span><br><span class="line">    <span class="comment">// Console.WriteLine(&quot;å’Œä¸ºï¼š&quot;+sum);</span></span><br><span class="line">    <span class="comment">// Console.ResetColor();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// File.AppendAllText(@&quot;E:\jiafa.txt&quot;, sum + &quot;\r\n&quot;);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// SpeechSynthesizer synth = new SpeechSynthesizer();</span></span><br><span class="line">    <span class="comment">// synth.Speak(sum.ToString());</span></span><br><span class="line">    <span class="comment">// synth.Dispose();</span></span><br><span class="line"></span><br><span class="line">    Bitmap image = <span class="keyword">new</span> Bitmap(<span class="number">256</span>, <span class="number">256</span>);</span><br><span class="line">    <span class="keyword">using</span> (Graphics g = Graphics.FromImage(image))</span><br><span class="line">    &#123;</span><br><span class="line">        g.FillRectangle(Brushes.Yellow, <span class="number">0</span>, <span class="number">0</span>, <span class="number">256</span>, <span class="number">256</span>);</span><br><span class="line">        g.DrawString(sum.ToString(), <span class="keyword">new</span> Font(<span class="string">&quot;Monospace&quot;</span>, <span class="number">26</span>), Brushes.DarkGreen, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    image.Save(<span class="string">@&quot;e:\hello.jpg&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç‚¹è¯„:</p>
<ul>
<li>ä¸èƒ½å®ç°ä¸åŒè°ƒç”¨çš„æ—¶å€™ï¼Œå…·å¤‡ä¸åŒé€»è¾‘</li>
</ul>
<h4 id="12-1-2-é€šè¿‡ä¸€ä¸ª-Flag-æ¥é€šçŸ¥-MyAdd-è¦å»è°ƒç”¨ä»€ä¹ˆé€»è¾‘"><a href="#12-1-2-é€šè¿‡ä¸€ä¸ª-Flag-æ¥é€šçŸ¥-MyAdd-è¦å»è°ƒç”¨ä»€ä¹ˆé€»è¾‘" class="headerlink" title="12.1.2. é€šè¿‡ä¸€ä¸ª Flag æ¥é€šçŸ¥ MyAdd è¦å»è°ƒç”¨ä»€ä¹ˆé€»è¾‘"></a>12.1.2. é€šè¿‡ä¸€ä¸ª Flag æ¥é€šçŸ¥ MyAdd è¦å»è°ƒç”¨ä»€ä¹ˆé€»è¾‘</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> r1 = MyAdd(<span class="number">1</span>,    <span class="number">12</span>, <span class="number">32</span>, <span class="number">1112232</span>, <span class="number">43</span>, <span class="number">1112212</span>, <span class="number">3232323</span>, <span class="number">123</span>);</span><br><span class="line">        <span class="built_in">int</span> r2 = MyAdd(<span class="number">2</span>,    <span class="number">222</span>, <span class="number">333</span>, <span class="number">444</span>);</span><br><span class="line">        <span class="built_in">int</span> r3 = MyAdd(<span class="number">4</span>,    <span class="number">11</span>, <span class="number">2323</span>, <span class="number">4344</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">MyAdd</span>(<span class="params"><span class="built_in">int</span> flag, <span class="keyword">params</span> <span class="built_in">int</span>[] nums</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; nums.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            sum += nums[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (flag)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                Print1(sum);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                Print2(sum);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                ToFile(sum);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                Speech(sum);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="literal">default</span>:</span><br><span class="line">                Draw(sum);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Print1</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.ForegroundColor = ConsoleColor.Red;</span><br><span class="line">        Console.WriteLine(sum);</span><br><span class="line">        Console.ResetColor();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Print2</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.BackgroundColor = ConsoleColor.Red;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;å’Œä¸ºï¼š&quot;</span> + sum);</span><br><span class="line">        Console.ResetColor();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ToFile</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        File.AppendAllText(<span class="string">@&quot;E:\jiafa.txt&quot;</span>, sum + <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Speech</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        SpeechSynthesizer synth = <span class="keyword">new</span> SpeechSynthesizer();</span><br><span class="line">        synth.Speak(sum.ToString());</span><br><span class="line">        synth.Dispose();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Draw</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Bitmap image = <span class="keyword">new</span> Bitmap(<span class="number">256</span>, <span class="number">256</span>);</span><br><span class="line">        <span class="keyword">using</span> (Graphics g = Graphics.FromImage(image))</span><br><span class="line">        &#123;</span><br><span class="line">            g.FillRectangle(Brushes.Yellow, <span class="number">0</span>, <span class="number">0</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">            g.DrawString(sum.ToString(), <span class="keyword">new</span> Font(<span class="string">&quot;Monospace&quot;</span>, <span class="number">26</span>), Brushes.DarkGreen, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        image.Save(<span class="string">@&quot;e:\hello.jpg&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç‚¹è¯„:</p>
<ul>
<li>å¾ˆç›´è§‚ï¼Œå¾ˆç®€æ´ï¼Œå¾ˆæ¸…æ™°</li>
<li>ä½¿ç”¨ flag å¾ˆéš¾é€šè¿‡æ•°å­—åˆ¤æ–­å‡ºæ¥ç›¸å¯¹åº”çš„é€»è¾‘ (å¯ä»¥é€šè¿‡ enum çš„æ”¹é€ ï¼Œæ”¹å–„è¿™ä¸ªé—®é¢˜)</li>
<li>çµæ´»æ€§ä¸¥é‡ä¸è¶³ï¼Œæ‰©å¼ èµ·æ¥éº»çƒ¦æ­»äº†ã€‚</li>
</ul>
<h4 id="12-1-3-æ²¡æœ‰ä¸­é—´å•†èµšå·®ä»·ï¼Œå€ŸåŠ©ç±»å’Œæ¥å£çš„æ–¹å¼ï¼Œä¼ é€’ä¸åŒçš„æ–¹æ³•"><a href="#12-1-3-æ²¡æœ‰ä¸­é—´å•†èµšå·®ä»·ï¼Œå€ŸåŠ©ç±»å’Œæ¥å£çš„æ–¹å¼ï¼Œä¼ é€’ä¸åŒçš„æ–¹æ³•" class="headerlink" title="12.1.3. æ²¡æœ‰ä¸­é—´å•†èµšå·®ä»·ï¼Œå€ŸåŠ©ç±»å’Œæ¥å£çš„æ–¹å¼ï¼Œä¼ é€’ä¸åŒçš„æ–¹æ³•"></a>12.1.3. æ²¡æœ‰ä¸­é—´å•†èµšå·®ä»·ï¼Œå€ŸåŠ©ç±»å’Œæ¥å£çš„æ–¹å¼ï¼Œä¼ é€’ä¸åŒçš„æ–¹æ³•</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> r1 = MyAdd(<span class="keyword">new</span> Print1(), <span class="number">12</span>, <span class="number">32</span>, <span class="number">1112232</span>, <span class="number">43</span>, <span class="number">1112212</span>, <span class="number">3232323</span>, <span class="number">123</span>);</span><br><span class="line">        <span class="built_in">int</span> r2 = MyAdd(<span class="keyword">new</span> PrintAndWuwuwu(), <span class="number">222</span>, <span class="number">333</span>, <span class="number">444</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">MyAdd</span>(<span class="params">IMyAdd o, <span class="keyword">params</span> <span class="built_in">int</span>[] nums</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; nums.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            sum += nums[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        o.A(sum);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span><span class="doctag">///</span><span class="doctag">///</span><span class="doctag">///</span><span class="doctag">///</span><span class="doctag">///</span>//</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">interface</span> <span class="title">IMyAdd</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">A</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Print1</span> : <span class="title">IMyAdd</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">A</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.ForegroundColor = ConsoleColor.Red;</span><br><span class="line">            Console.WriteLine(sum);</span><br><span class="line">            Console.ResetColor();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Print2</span> : <span class="title">IMyAdd</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">A</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.BackgroundColor = ConsoleColor.Red;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;å’Œä¸ºï¼š&quot;</span> + sum);</span><br><span class="line">            Console.ResetColor();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">ToFile</span> : <span class="title">IMyAdd</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">A</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            File.AppendAllText(<span class="string">@&quot;E:\jiafa.txt&quot;</span>, sum + <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">PrintAndWuwuwu</span> : <span class="title">IMyAdd</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">A</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.BackgroundColor = ConsoleColor.Green;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;å“ˆå“ˆå“ˆï¼Œå‘œå‘œå‘œï¼š&quot;</span> + sum);</span><br><span class="line">            Console.ResetColor();</span><br><span class="line">            SpeechSynthesizer synth = <span class="keyword">new</span> SpeechSynthesizer();</span><br><span class="line">            synth.Speak(<span class="string">&quot;å‘œå‘œå‘œå‘œå‘œå‘œå‘œï¼Œå“ˆå“ˆå“ˆ!&quot;</span>);</span><br><span class="line">            synth.Dispose();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Speech</span> : <span class="title">IMyAdd</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">A</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            SpeechSynthesizer synth = <span class="keyword">new</span> SpeechSynthesizer();</span><br><span class="line">            synth.Speak(sum.ToString());</span><br><span class="line">            synth.Dispose();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Draw</span> : <span class="title">IMyAdd</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">A</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            Bitmap image = <span class="keyword">new</span> Bitmap(<span class="number">256</span>, <span class="number">256</span>);</span><br><span class="line">            <span class="keyword">using</span> (Graphics g = Graphics.FromImage(image))</span><br><span class="line">            &#123;</span><br><span class="line">                g.FillRectangle(Brushes.Yellow, <span class="number">0</span>, <span class="number">0</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">                g.DrawString(sum.ToString(), <span class="keyword">new</span> Font(<span class="string">&quot;Monospace&quot;</span>, <span class="number">26</span>), Brushes.DarkGreen, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            image.Save(<span class="string">@&quot;e:\hello.jpg&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="12-1-4-æ¨¡æ¿ä»£ç å®åœ¨ä¸çˆ½ï¼Œå§”æ‰˜ç±»å‹å‡ºç°æ¥æ•‘åœº"><a href="#12-1-4-æ¨¡æ¿ä»£ç å®åœ¨ä¸çˆ½ï¼Œå§”æ‰˜ç±»å‹å‡ºç°æ¥æ•‘åœº" class="headerlink" title="12.1.4. æ¨¡æ¿ä»£ç å®åœ¨ä¸çˆ½ï¼Œå§”æ‰˜ç±»å‹å‡ºç°æ¥æ•‘åœº"></a>12.1.4. æ¨¡æ¿ä»£ç å®åœ¨ä¸çˆ½ï¼Œå§”æ‰˜ç±»å‹å‡ºç°æ¥æ•‘åœº</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 1. å£°æ˜ä¸€ç§æ•°æ®ç±»å‹ï¼Œå« MyWeiTuoï¼Œæ˜¯å§”æ‰˜ç±»å‹</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">delegate</span> <span class="keyword">void</span> <span class="title">MyWeiTuo</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 2. é€šè¿‡ new æ“ä½œç¬¦ï¼Œä¸ºè¿™ç§ç±»å‹åˆ›å»ºä¸€ä¸ªå®ä¾‹</span></span><br><span class="line">        MyWeiTuo v1 = <span class="keyword">new</span> MyWeiTuo(PrintAndWuwuwu);</span><br><span class="line">        <span class="comment">// 3. ä½¿ç”¨è¿™ä¸ªå®ä¾‹ã€‚è¿™é‡Œä¸»è¦ç”¨ä½œæ–¹æ³•çš„å‚æ•°ä¼ é€’</span></span><br><span class="line">        <span class="built_in">int</span> r1 = MyAdd(v1, <span class="number">12</span>, <span class="number">32</span>, <span class="number">1112232</span>, <span class="number">43</span>, <span class="number">1112212</span>, <span class="number">3232323</span>, <span class="number">123</span>);</span><br><span class="line">        <span class="built_in">int</span> r2 = MyAdd(<span class="keyword">new</span> MyWeiTuo(Print2), <span class="number">222</span>, <span class="number">333</span>, <span class="number">444</span>);</span><br><span class="line">        <span class="built_in">int</span> r3 = MyAdd(MyLove, <span class="number">222</span>, <span class="number">333</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">MyAdd</span>(<span class="params">MyWeiTuo o, <span class="keyword">params</span> <span class="built_in">int</span>[] nums</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; nums.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            sum += nums[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        o(sum);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Print1</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.ForegroundColor = ConsoleColor.Red;</span><br><span class="line">        Console.WriteLine(sum);</span><br><span class="line">        Console.ResetColor();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Print2</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.BackgroundColor = ConsoleColor.Red;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;å’Œä¸ºï¼š&quot;</span> + sum);</span><br><span class="line">        Console.ResetColor();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ToFile</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        File.AppendAllText(<span class="string">@&quot;E:\jiafa.txt&quot;</span>, sum + <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PrintAndWuwuwu</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.BackgroundColor = ConsoleColor.Green;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;å“ˆå“ˆå“ˆï¼Œå‘œå‘œå‘œï¼š&quot;</span> + sum);</span><br><span class="line">        Console.ResetColor();</span><br><span class="line">        SpeechSynthesizer synth = <span class="keyword">new</span> SpeechSynthesizer();</span><br><span class="line">        synth.Speak(<span class="string">&quot;å‘œå‘œå‘œå‘œå‘œå‘œå‘œï¼Œå“ˆå“ˆå“ˆ!&quot;</span>);</span><br><span class="line">        synth.Dispose();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Speech</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        SpeechSynthesizer synth = <span class="keyword">new</span> SpeechSynthesizer();</span><br><span class="line">        synth.Speak(sum.ToString());</span><br><span class="line">        synth.Dispose();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Draw</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Bitmap image = <span class="keyword">new</span> Bitmap(<span class="number">256</span>, <span class="number">256</span>);</span><br><span class="line">        <span class="keyword">using</span> (Graphics g = Graphics.FromImage(image))</span><br><span class="line">        &#123;</span><br><span class="line">            g.FillRectangle(Brushes.Yellow, <span class="number">0</span>, <span class="number">0</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">            g.DrawString(sum.ToString(), <span class="keyword">new</span> Font(<span class="string">&quot;Monospace&quot;</span>, <span class="number">26</span>), Brushes.DarkGreen, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        image.Save(<span class="string">@&quot;e:\hello.jpg&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MyLove</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æˆ‘å°±æ˜¯å–œæ¬¢é»„è‰²ï¼Œåˆ™ä¹ˆäº†.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-2-åŸºæœ¬è¯­æ³•"><a href="#12-2-åŸºæœ¬è¯­æ³•" class="headerlink" title="12.2. åŸºæœ¬è¯­æ³•"></a>12.2. åŸºæœ¬è¯­æ³•</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. å£°æ˜ (å§”æ‰˜ç±»å‹)</span></span><br><span class="line"><span class="function"><span class="built_in">delegate</span> <span class="keyword">void</span> <span class="title">MyMethod1</span>()</span>;</span><br><span class="line"><span class="function"><span class="built_in">delegate</span> <span class="built_in">int</span> <span class="title">MyMethod2</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 2. å®ä¾‹åŒ–</span></span><br><span class="line">        MyMethod1 m1 = <span class="keyword">new</span> MyMethod1(Hahaha);</span><br><span class="line">        MyMethod2 m2 = <span class="keyword">new</span> MyMethod2(<span class="keyword">new</span> Program().Heiheihei);</span><br><span class="line">        MyMethod1 m3 = Hahaha;</span><br><span class="line">        MyMethod2 m4 = <span class="keyword">new</span> Program().Heiheihei;</span><br><span class="line">        MyMethod2 m5 = Hehehe;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. ä½¿ç”¨</span></span><br><span class="line">        m1();</span><br><span class="line">        m2(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Hahaha</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;hahaha, henkuaile.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="built_in">int</span> <span class="title">Heiheihei</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a * b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Hehehe</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b * a - b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-3-åŒ¿åå§”æ‰˜"><a href="#12-3-åŒ¿åå§”æ‰˜" class="headerlink" title="12.3. åŒ¿åå§”æ‰˜"></a>12.3. åŒ¿åå§”æ‰˜</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. å£°æ˜</span></span><br><span class="line"><span class="function"><span class="built_in">delegate</span> <span class="keyword">void</span> <span class="title">MyAddWT</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 2. å®ä¾‹åŒ–</span></span><br><span class="line">        MyAddWT maw = <span class="built_in">delegate</span>(<span class="built_in">int</span> sum)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;hahaha, henkuaile.&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// 3. ä½¿ç”¨</span></span><br><span class="line">        MyAdd(<span class="number">1</span>, <span class="number">3</span>, maw);</span><br><span class="line"></span><br><span class="line">        MyAdd(<span class="number">111</span>, <span class="number">333</span>, <span class="built_in">delegate</span>(<span class="built_in">int</span> sum)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;æˆ‘çš„ç»“æœæ˜¯ &#123;0&#125;&quot;</span>, sum);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        MyAdd(<span class="number">121</span>, <span class="number">232</span>, <span class="built_in">delegate</span>(<span class="built_in">int</span> sum)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;æˆ‘ä¸å‘Šè¯‰ä½ ç»“æœ&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">MyAdd</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b, MyAddWT maw</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> r = a + b;</span><br><span class="line">        maw(r);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-4-è¡¨è¾¾å¼è¯­æ³•"><a href="#12-4-è¡¨è¾¾å¼è¯­æ³•" class="headerlink" title="12.4. è¡¨è¾¾å¼è¯­æ³•"></a>12.4. è¡¨è¾¾å¼è¯­æ³•</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. å£°æ˜</span></span><br><span class="line"><span class="function"><span class="built_in">delegate</span> <span class="keyword">void</span> <span class="title">MyAddWT</span>(<span class="params"><span class="built_in">int</span> sum</span>)</span>;</span><br><span class="line"><span class="function"><span class="built_in">delegate</span> <span class="keyword">void</span> <span class="title">MyAddWT</span>(<span class="params"><span class="built_in">double</span> sum</span>)</span>;</span><br><span class="line"><span class="function"><span class="built_in">delegate</span> <span class="built_in">string</span> <span class="title">MyAddWT</span>(<span class="params"><span class="built_in">double</span> sum</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// MyAddWT maw1 = new MyAddWT(MyAddShixian);</span></span><br><span class="line">        <span class="comment">// MyAddWT maw2 = MyAddShixian;</span></span><br><span class="line"></span><br><span class="line">        MyAddWT maw3 = <span class="built_in">delegate</span>(<span class="built_in">int</span> sum)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. å®ä¾‹åŒ–</span></span><br><span class="line">        MyAddWT maw4 = (<span class="built_in">int</span> sum) =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        MyAddWT maw5 = (sum) =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        MyAddWT maw6 = sum =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        MyAddWT maw7 = sum =&gt; Console.WriteLine(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. ä½¿ç”¨</span></span><br><span class="line">        MyAdd(<span class="number">111</span>, <span class="number">222</span>, maw7);</span><br><span class="line">        MyAdd(<span class="number">222</span>, <span class="number">333</span>, s =&gt; Console.WriteLine(<span class="string">$&quot;result: <span class="subst">&#123;s&#125;</span>&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">MyAdd</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b, MyAddWT maw</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> r = a + b;</span><br><span class="line">        maw(r);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-5-å†…å»ºçš„å§”æ‰˜ç±»å‹-Action-x2F-Func"><a href="#12-5-å†…å»ºçš„å§”æ‰˜ç±»å‹-Action-x2F-Func" class="headerlink" title="12.5. å†…å»ºçš„å§”æ‰˜ç±»å‹ Action&#x2F;Func"></a>12.5. å†…å»ºçš„å§”æ‰˜ç±»å‹ Action&#x2F;Func</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//MyAdd2(222, 333, (a, b, r) =&gt; Console.WriteLine($&quot;&#123;a&#125; åŠ ä¸Š &#123;b&#125; ç­‰äº &#123;r&#125;&quot;));</span></span><br><span class="line">        <span class="comment">//MyAdd2(222, 333, (a, b, r) =&gt; Console.WriteLine($&quot;&#123;a&#125; add &#123;b&#125; equals &#123;r&#125;&quot;));</span></span><br><span class="line">        MyAdd2(<span class="number">222</span>, <span class="number">333</span>, (a, b, r, s1, s2) =&gt; Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;a&#125;</span> <span class="subst">&#123;s1&#125;</span> <span class="subst">&#123;b&#125;</span> <span class="subst">&#123;s2&#125;</span> <span class="subst">&#123;r&#125;</span>&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">MyAdd1</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b, Action act</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> r = a + b;</span><br><span class="line">        act();</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">MyAdd2</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b, Action&lt;<span class="built_in">int</span>, <span class="built_in">int</span>, <span class="built_in">int</span>, <span class="built_in">string</span>, <span class="built_in">string</span>&gt; act</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> r = a + b;</span><br><span class="line">        act(a, b, r, <span class="string">&quot;jiashang&quot;</span>, <span class="string">&quot;dengyu&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-6-å¤šæ’­å§”æ‰˜"><a href="#12-6-å¤šæ’­å§”æ‰˜" class="headerlink" title="12.6. å¤šæ’­å§”æ‰˜"></a>12.6. å¤šæ’­å§”æ‰˜</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        MyWT a = <span class="keyword">new</span> MyWT(MyAdd);</span><br><span class="line">        MyWT b = <span class="keyword">new</span> MyWT(MyMul);</span><br><span class="line">        MyWT c = <span class="keyword">new</span> MyWT(MyFuza);</span><br><span class="line"></span><br><span class="line">        MyWT d = a + b + c + a + a + a + a;</span><br><span class="line">        MyWT e = d + b;</span><br><span class="line">        e += a;</span><br><span class="line">        e -= a;</span><br><span class="line">        Console.WriteLine(e(<span class="number">4</span>, <span class="number">5</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// var d = a + b + c;</span></span><br><span class="line">        <span class="comment">// Console.WriteLine(d(4,5));</span></span><br><span class="line">        <span class="comment">// Console.WriteLine((a + b + c)(4, 5));</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">MyAdd</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> r = a + b;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Add: &#123;0&#125;&quot;</span>, r);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">MyMul</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> r = a * b;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Mul: &#123;0&#125;&quot;</span>, r);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">MyFuza</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> r = (<span class="built_in">int</span>)(a * a + Math.Pow(b, <span class="number">4</span>));</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Fuza: &#123;0&#125;&quot;</span>, r);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-7-ç»ƒä¹ -å¦‚ä½•ç®€åŒ–å›¾ç‰‡ç»˜åˆ¶çš„ä»£ç "><a href="#12-7-ç»ƒä¹ -å¦‚ä½•ç®€åŒ–å›¾ç‰‡ç»˜åˆ¶çš„ä»£ç " class="headerlink" title="12.7. [ç»ƒä¹ ] å¦‚ä½•ç®€åŒ–å›¾ç‰‡ç»˜åˆ¶çš„ä»£ç "></a>12.7. [ç»ƒä¹ ] å¦‚ä½•ç®€åŒ–å›¾ç‰‡ç»˜åˆ¶çš„ä»£ç </h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DrawHello</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Bitmap image = <span class="keyword">new</span> Bitmap(<span class="number">256</span>, <span class="number">256</span>);</span><br><span class="line">        <span class="keyword">using</span> (Graphics g = Graphics.FromImage(image))</span><br><span class="line">        &#123;</span><br><span class="line">            g.DrawString(<span class="string">&quot;Hello&quot;</span>, <span class="keyword">new</span> Font(<span class="string">&quot;Monospace&quot;</span>, <span class="number">26</span>), Brushes.DarkGreen, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        image.Save(<span class="string">@&quot;e:\hello.jpg&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DrawWorld</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Bitmap image = <span class="keyword">new</span> Bitmap(<span class="number">256</span>, <span class="number">256</span>);</span><br><span class="line">        <span class="keyword">using</span> (Graphics g = Graphics.FromImage(image))</span><br><span class="line">        &#123;</span><br><span class="line">            g.FillRectangle(Brushes.Yellow, <span class="number">0</span>, <span class="number">0</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">            g.DrawString(<span class="string">&quot;World&quot;</span>, <span class="keyword">new</span> Font(<span class="string">&quot;Monospace&quot;</span>, <span class="number">26</span>), Brushes.DarkOrange, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        image.Save(<span class="string">@&quot;e:\hello.jpg&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        WithGraphics(<span class="string">@&quot;e:\hello333.jpg&quot;</span>, g =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            g.DrawString(<span class="string">&quot;wqwww&quot;</span>, <span class="keyword">new</span> Font(<span class="string">&quot;Aria&quot;</span>, <span class="number">46</span>), Brushes.Aqua, <span class="number">0</span>, <span class="number">300</span>);</span><br><span class="line">            g.DrawString(<span class="string">&quot;Hello&quot;</span>, <span class="keyword">new</span> Font(<span class="string">&quot;Monospace&quot;</span>, <span class="number">26</span>), Brushes.DarkGreen, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">        &#125;, <span class="number">500</span>, <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line">        WithGraphics(<span class="string">@&quot;e:\hello4444.jpg&quot;</span>, pen =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            pen.FillRectangle(Brushes.Yellow, <span class="number">0</span>, <span class="number">0</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">            pen.DrawString(<span class="string">&quot;World&quot;</span>, <span class="keyword">new</span> Font(<span class="string">&quot;Monospace&quot;</span>, <span class="number">26</span>), Brushes.DarkOrange, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">WithGraphics</span>(<span class="params"><span class="built_in">string</span> file, Action&lt;Graphics&gt; act, <span class="built_in">int</span> width = <span class="number">256</span>, <span class="built_in">int</span> height = <span class="number">256</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (File.Exists(file))</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;æ–‡ä»¶å·²ç»å­˜åœ¨....&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (width &lt;= <span class="number">0</span> || height &lt;= <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;å°ºå¯¸ä¸èƒ½ä¸ºè´Ÿ&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Bitmap image2 = new Bitmap(file);</span></span><br><span class="line">        Bitmap image = <span class="keyword">new</span> Bitmap(width, height);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">using</span> (Graphics g = Graphics.FromImage(image))</span><br><span class="line">        &#123;</span><br><span class="line">            act(g);</span><br><span class="line">            g.DrawString(<span class="string">&quot;161&quot;</span>, <span class="keyword">new</span> Font(<span class="string">&quot;å¾®è½¯é›…é»‘&quot;</span>, <span class="number">24</span>), Brushes.Red, width - <span class="number">50</span>, height - <span class="number">30</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        image.Save(file);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-8-ç»ƒä¹ -å¦‚ä½•ç®€åŒ–è¾“å‡ºç¨‹åºæ‰§è¡Œæ—¶é—´çš„é€»è¾‘"><a href="#12-8-ç»ƒä¹ -å¦‚ä½•ç®€åŒ–è¾“å‡ºç¨‹åºæ‰§è¡Œæ—¶é—´çš„é€»è¾‘" class="headerlink" title="12.8. [ç»ƒä¹ ] å¦‚ä½•ç®€åŒ–è¾“å‡ºç¨‹åºæ‰§è¡Œæ—¶é—´çš„é€»è¾‘"></a>12.8. [ç»ƒä¹ ] å¦‚ä½•ç®€åŒ–è¾“å‡ºç¨‹åºæ‰§è¡Œæ—¶é—´çš„é€»è¾‘</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        WithElapsedTime(() =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            WithGraphics(<span class="string">@&quot;e:\hello333.jpg&quot;</span>, g =&gt;</span><br><span class="line">            &#123;</span><br><span class="line">                g.DrawString(<span class="string">&quot;wqwww&quot;</span>, <span class="keyword">new</span> Font(<span class="string">&quot;Aria&quot;</span>, <span class="number">46</span>), Brushes.Aqua, <span class="number">0</span>, <span class="number">300</span>);</span><br><span class="line">                g.DrawString(<span class="string">&quot;Hello&quot;</span>, <span class="keyword">new</span> Font(<span class="string">&quot;Monospace&quot;</span>, <span class="number">26</span>), Brushes.DarkGreen, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">            &#125;, <span class="number">500</span>, <span class="number">500</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        WithElapsedTime(() =&gt;</span><br><span class="line">            WithGraphics(<span class="string">@&quot;e:\hello4444.jpg&quot;</span>, pen =&gt;</span><br><span class="line">            &#123;</span><br><span class="line">                pen.FillRectangle(Brushes.Yellow, <span class="number">0</span>, <span class="number">0</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">                pen.DrawString(<span class="string">&quot;World&quot;</span>, <span class="keyword">new</span> Font(<span class="string">&quot;Monospace&quot;</span>, <span class="number">26</span>), Brushes.DarkOrange, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">            &#125;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">WithElapsedTime</span>(<span class="params">Action code</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> sw = <span class="keyword">new</span> Stopwatch();</span><br><span class="line">        sw.Start();</span><br><span class="line">        code();</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;ç¨‹åºæ‰§è¡Œæ¶ˆè€—çš„æ—¶é—´ä¸º: &#123;0&#125;&quot;</span>, sw.ElapsedMilliseconds);</span><br><span class="line">        sw.Stop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">WithGraphics</span>(<span class="params"><span class="built_in">string</span> file, Action&lt;Graphics&gt; act, <span class="built_in">int</span> width = <span class="number">256</span>, <span class="built_in">int</span> height = <span class="number">256</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (File.Exists(file))</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;æ–‡ä»¶å·²ç»å­˜åœ¨....&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (width &lt;= <span class="number">0</span> || height &lt;= <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;å°ºå¯¸ä¸èƒ½ä¸ºè´Ÿ&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Bitmap image2 = new Bitmap(file);</span></span><br><span class="line">        Bitmap image = <span class="keyword">new</span> Bitmap(width, height);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">using</span> (Graphics g = Graphics.FromImage(image))</span><br><span class="line">        &#123;</span><br><span class="line">            act(g);</span><br><span class="line">            g.DrawString(<span class="string">&quot;161&quot;</span>, <span class="keyword">new</span> Font(<span class="string">&quot;å¾®è½¯é›…é»‘&quot;</span>, <span class="number">24</span>), Brushes.Red, width - <span class="number">50</span>, height - <span class="number">30</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        image.Save(file);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="13-æ•°ç»„-Array"><a href="#13-æ•°ç»„-Array" class="headerlink" title="13. æ•°ç»„ (Array)"></a>13. æ•°ç»„ (Array)</h2><h3 id="13-1-ä¸€ç»´æ•°ç»„"><a href="#13-1-ä¸€ç»´æ•°ç»„" class="headerlink" title="13.1. ä¸€ç»´æ•°ç»„"></a>13.1. ä¸€ç»´æ•°ç»„</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. å£°æ˜</span></span><br><span class="line"><span class="built_in">int</span>[] arr1;</span><br><span class="line"><span class="built_in">string</span>[] arr2;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. å®ä¾‹åŒ–</span></span><br><span class="line">arr1 = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. åˆå§‹å€¼</span></span><br><span class="line">arr1[<span class="number">0</span>] = <span class="number">22</span>;</span><br><span class="line">arr1[<span class="number">1</span>] = <span class="number">5</span>;</span><br><span class="line">arr1[<span class="number">2</span>] = <span class="number">45</span>;</span><br><span class="line">arr1[<span class="number">3</span>] = <span class="number">555</span>;</span><br><span class="line"><span class="comment">// arr1[4] = 777; // System.IndexOutOfRangeException</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. åŸºæœ¬è®¿é—®</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr1.Length; i++)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(arr1[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// string</span></span><br><span class="line"><span class="built_in">string</span>[] arr2;</span><br><span class="line">arr2 = <span class="keyword">new</span> <span class="built_in">string</span>[<span class="number">5</span>];</span><br><span class="line">arr2[<span class="number">3</span>] = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">Console.WriteLine(arr2[<span class="number">0</span>] == <span class="literal">null</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Student</span></span><br><span class="line">Student[] arr3;</span><br><span class="line">arr3 = <span class="keyword">new</span> Student[<span class="number">8</span>];</span><br><span class="line">arr3[<span class="number">3</span>] = <span class="keyword">new</span> Student();</span><br><span class="line">Console.WriteLine(arr3[<span class="number">0</span>] == <span class="literal">null</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>æ•°ç»„è¡¨ç¤ºæ³•:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] arr0;</span><br><span class="line">arr0 = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">4</span>];</span><br><span class="line">arr0[<span class="number">0</span>] = <span class="number">22</span>;</span><br><span class="line">arr0[<span class="number">1</span>] = <span class="number">5</span>;</span><br><span class="line">arr0[<span class="number">2</span>] = <span class="number">45</span>;</span><br><span class="line">arr0[<span class="number">3</span>] = <span class="number">555</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span>[] arr1 = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">4</span>];</span><br><span class="line">arr1[<span class="number">0</span>] = <span class="number">22</span>;</span><br><span class="line">arr1[<span class="number">1</span>] = <span class="number">5</span>;</span><br><span class="line">arr1[<span class="number">2</span>] = <span class="number">45</span>;</span><br><span class="line">arr1[<span class="number">3</span>] = <span class="number">555</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span>[] arr2 = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">4</span>] &#123; <span class="number">22</span>, <span class="number">5</span>, <span class="number">45</span>, <span class="number">555</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span>[] arr3 = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123; <span class="number">22</span>, <span class="number">5</span>, <span class="number">45</span>, <span class="number">555</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span>[] arr4 = &#123; <span class="number">22</span>, <span class="number">5</span>, <span class="number">45</span>, <span class="number">555</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr5 = <span class="keyword">new</span> <span class="built_in">int</span>[]&#123; <span class="number">22</span>, <span class="number">5</span>, <span class="number">45</span>, <span class="number">555</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> arr6 = <span class="keyword">new</span> [] &#123; <span class="number">22</span>, <span class="number">5</span>, <span class="number">45</span>, <span class="number">555</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°ç»“:</span></span><br><span class="line"><span class="built_in">int</span>[] arr = &#123; <span class="number">22</span>, <span class="number">5</span>, <span class="number">45</span>, <span class="number">555</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> []&#123; <span class="number">22</span>, <span class="number">5</span>, <span class="number">45</span>, <span class="number">555</span> &#125;;</span><br></pre></td></tr></table></figure>

<p>æ•°ç»„çš„æ‰©å¼ :</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] arr = &#123; <span class="number">22</span>, <span class="number">5</span>, <span class="number">45</span>, <span class="number">555</span> &#125;;</span><br><span class="line">arr[<span class="number">4</span>] = <span class="number">666</span>;</span><br><span class="line">arr[<span class="number">5</span>] = <span class="number">777</span>;</span><br></pre></td></tr></table></figure>

<h3 id="13-2-å¤šç»´æ•°ç»„-Dimensional-Array"><a href="#13-2-å¤šç»´æ•°ç»„-Dimensional-Array" class="headerlink" title="13.2. å¤šç»´æ•°ç»„ (Dimensional Array)"></a>13.2. å¤šç»´æ•°ç»„ (Dimensional Array)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[,,] arr =</span><br><span class="line">&#123;</span><br><span class="line">    &#123;&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;, &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;, &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;,&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;&#125;,</span><br><span class="line">    &#123;&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;, &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;, &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;,&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;&#125;,</span><br><span class="line">    &#123;&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;, &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;, &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;,&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;&#125;,</span><br><span class="line">    &#123;&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;, &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;, &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;,&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>&#125;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">Console.WriteLine(arr.Rank); <span class="comment">// ç§©</span></span><br><span class="line">Console.WriteLine(arr.Length);</span><br><span class="line">Console.WriteLine(arr.GetLength(<span class="number">0</span>));</span><br></pre></td></tr></table></figure>

<h3 id="13-3-äº¤é”™æ•°ç»„-Jagged-Array"><a href="#13-3-äº¤é”™æ•°ç»„-Jagged-Array" class="headerlink" title="13.3. äº¤é”™æ•°ç»„ (Jagged Array)"></a>13.3. äº¤é”™æ•°ç»„ (Jagged Array)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[][] arr = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">3</span>][];</span><br><span class="line">arr[<span class="number">0</span>] = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">arr[<span class="number">1</span>] = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123;<span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">arr[<span class="number">2</span>] = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123;<span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span>[][,] arr2 = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">3</span>][,];</span><br><span class="line">arr2[<span class="number">2</span>] = <span class="keyword">new</span> <span class="built_in">int</span>[,] &#123; &#123;<span class="number">2</span>&#125;, &#123;<span class="number">3</span>&#125; &#125;;</span><br></pre></td></tr></table></figure>

<h2 id="14-å…ƒç»„-Tuple-x2F-ValueTuple"><a href="#14-å…ƒç»„-Tuple-x2F-ValueTuple" class="headerlink" title="14. å…ƒç»„ (Tuple&#x2F;ValueTuple)"></a>14. å…ƒç»„ (Tuple&#x2F;ValueTuple)</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Id;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Score;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Tel;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ•°ç»„çš„æ–¹å¼ï¼Œå¯ä»¥å­˜å‚¨å¤„ç†ç›¸åŒç±»å‹çš„æ•°æ®</span></span><br><span class="line">        <span class="built_in">int</span>[] ids = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> &#125;;</span><br><span class="line">        <span class="built_in">string</span>[] names = <span class="keyword">new</span> <span class="built_in">string</span>[] &#123; <span class="string">&quot;å°æ˜&quot;</span>, <span class="string">&quot;å°çº¢&quot;</span>, <span class="string">&quot;å¤§é»„&quot;</span>, <span class="string">&quot;å¼ ä¸‰&quot;</span> &#125;;</span><br><span class="line">        <span class="built_in">double</span>[] scores = <span class="keyword">new</span> <span class="built_in">double</span>[] &#123; <span class="number">67.5</span>, <span class="number">60</span>, <span class="number">59.9</span>, <span class="number">90</span> &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ç±»å’Œå¯¹è±¡çš„æ–¹å¼ï¼Œå¯ä»¥å¤„ç†ä¸åŒæ•°æ®çš„å­˜å‚¨ (å¼ºå¤§ï¼Œä½†éº»çƒ¦)</span></span><br><span class="line">        Student s1 = <span class="keyword">new</span> Student();</span><br><span class="line">        s1.Id = <span class="number">2</span>;</span><br><span class="line">        s1.Name = <span class="string">&quot;å°çº¢&quot;</span>;</span><br><span class="line">        s1.Score = <span class="number">60</span>;</span><br><span class="line">        <span class="keyword">var</span> s3 = <span class="keyword">new</span> Student &#123; Id = <span class="number">1</span>, Name = <span class="string">&quot;å°æ˜&quot;</span>, Score = <span class="number">67.5</span> &#125;;</span><br><span class="line">        <span class="keyword">var</span> s4 = <span class="keyword">new</span> Student &#123; Id = <span class="number">3</span>, Name = <span class="string">&quot;å¤§é»„&quot;</span>, Score = <span class="number">59</span>, Tel = <span class="string">&quot;+86110&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åŒ¿åç±»å‹ï¼Œä¸éœ€è¦äº‹å…ˆå£°æ˜ä¸€ä¸ªç±»ï¼Œå°±å¯ä»¥å®ä¾‹åŒ–å‡ºä¸€ä¸ªå¯¹è±¡æ¥</span></span><br><span class="line">        <span class="keyword">var</span> s5 = <span class="keyword">new</span> &#123; Xuehao = <span class="number">3</span>, Xingming = <span class="string">&quot;å¤§é»„&quot;</span>, Fenshu = <span class="number">59</span>, Dianhua = <span class="string">&quot;+86110&quot;</span>, Dizhi = <span class="string">&quot;åœ°çƒæ‘&quot;</span> &#125;;</span><br><span class="line">        Console.WriteLine(s5.Fenshu);</span><br><span class="line">        Console.WriteLine(s5.GetType());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…ƒç»„ (Tuple)</span></span><br><span class="line">        Tuple&lt;<span class="built_in">int</span>, <span class="built_in">int</span>&gt; s6 = <span class="keyword">new</span> Tuple&lt;<span class="built_in">int</span>, <span class="built_in">int</span>&gt;(<span class="number">111</span>, <span class="number">2222</span>);</span><br><span class="line">        Tuple&lt;<span class="built_in">int</span>, <span class="built_in">string</span>, <span class="built_in">int</span>, <span class="built_in">string</span>&gt; s61 = Tuple.Create(<span class="number">111</span>, <span class="string">&quot;å°æ˜&quot;</span>, <span class="number">67</span>, <span class="string">&quot;110&quot;</span>);</span><br><span class="line">        xxx(s61);</span><br><span class="line">        Console.WriteLine(s61.Item1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ out çš„æ–¹å¼ï¼Œå¤„ç†æ–¹æ³•çš„å¤šä¸ªè¿”å›å€¼</span></span><br><span class="line">        <span class="built_in">string</span> name;</span><br><span class="line">        <span class="built_in">int</span> age = yyy(<span class="keyword">out</span> name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ Tuple çš„æ–¹å¼</span></span><br><span class="line">        <span class="keyword">var</span> r = zzz();</span><br><span class="line">        Console.WriteLine(r.Item1);</span><br><span class="line">        Console.WriteLine(r.Item2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ValueTuple</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">xxx</span>(<span class="params">Tuple&lt;<span class="built_in">int</span>, <span class="built_in">string</span>, <span class="built_in">int</span>, <span class="built_in">string</span>&gt; sss</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;sss.Item2&#125;</span> çš„æˆç»©ä¸º <span class="subst">&#123;sss.Item3&#125;</span>!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">yyy</span>(<span class="params"><span class="keyword">out</span> <span class="built_in">string</span> name</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        name = <span class="string">&quot;zhangsan&quot;</span>;</span><br><span class="line">        <span class="built_in">int</span> age = <span class="number">16</span>;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> Tuple&lt;<span class="built_in">int</span>, <span class="built_in">string</span>&gt; <span class="title">zzz</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> Tuple.Create(<span class="number">16</span>, <span class="string">&quot;xiaohua&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ValueTuple:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å…ƒç»„ (Tupleï¼Œå¾ˆä¸‘å¾ˆæ¸©æŸ”)</span></span><br><span class="line">        Tuple&lt;<span class="built_in">int</span>, <span class="built_in">int</span>&gt; s6 = <span class="keyword">new</span> Tuple&lt;<span class="built_in">int</span>, <span class="built_in">int</span>&gt;(<span class="number">111</span>, <span class="number">2222</span>);</span><br><span class="line">        Tuple&lt;<span class="built_in">int</span>, <span class="built_in">string</span>, <span class="built_in">int</span>, <span class="built_in">string</span>&gt; s61 = Tuple.Create(<span class="number">111</span>, <span class="string">&quot;å°æ˜&quot;</span>, <span class="number">67</span>, <span class="string">&quot;110&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ValueTuple</span></span><br><span class="line">        ValueTuple&lt;<span class="built_in">int</span>, <span class="built_in">int</span>&gt; s7 = <span class="keyword">new</span> ValueTuple&lt;<span class="built_in">int</span>, <span class="built_in">int</span>&gt;(<span class="number">111</span>, <span class="number">2222</span>);</span><br><span class="line">        ValueTuple&lt;<span class="built_in">int</span>, <span class="built_in">string</span>, <span class="built_in">int</span>, <span class="built_in">string</span>&gt; s71 = ValueTuple.Create(<span class="number">111</span>, <span class="string">&quot;å°æ˜&quot;</span>, <span class="number">67</span>, <span class="string">&quot;110&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> s72 = ValueTuple.Create(<span class="number">111</span>, <span class="string">&quot;å°æ˜&quot;</span>, <span class="number">67</span>, <span class="string">&quot;110&quot;</span>);</span><br><span class="line">        s72.Item3 = <span class="number">77</span>;</span><br><span class="line">        Console.WriteLine(s72.Item3);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç®€åŒ–ï¼Œè¯­æ³•ç³–</span></span><br><span class="line">        <span class="keyword">var</span> s73 = (<span class="number">111</span>, <span class="string">&quot;å°æ˜&quot;</span>, <span class="number">67</span>, <span class="string">&quot;110&quot;</span>);</span><br><span class="line">        Console.WriteLine(s73.Item2);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> s74 = (<span class="number">111</span>, name: <span class="string">&quot;å°æ˜&quot;</span>, <span class="number">67</span>, <span class="string">&quot;110&quot;</span>);</span><br><span class="line">        Console.WriteLine(s74.name);</span><br><span class="line">        <span class="keyword">var</span> s75 = (id: <span class="number">111</span>, name: <span class="string">&quot;å°æ˜&quot;</span>, score: <span class="number">67</span>, tel: <span class="string">&quot;110&quot;</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;s75.name&#125;</span> çš„åˆ†æ•°æ˜¯ <span class="subst">&#123;s75.score&#125;</span>ï¼Œå¿«å‘Šè¯‰taçˆ¸çˆ¸ï¼Œå·ç æ˜¯ <span class="subst">&#123;s75.tel&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//var s76 = (111, &quot;å°æ˜&quot;, 67, &quot;110&quot;);</span></span><br><span class="line">        <span class="comment">//var id = s76.Item1;</span></span><br><span class="line">        <span class="comment">//var name = s76.Item2;</span></span><br><span class="line">        <span class="comment">//var score = s76.Item3;</span></span><br><span class="line">        <span class="comment">//var tel = s76.Item4;</span></span><br><span class="line">        (<span class="built_in">int</span> id, <span class="built_in">string</span> name, <span class="built_in">double</span> score, <span class="built_in">string</span> tel) = (<span class="number">111</span>, <span class="string">&quot;å°æ˜&quot;</span>, <span class="number">67</span>, <span class="string">&quot;110&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> (id2, name2, score2, tel2) = (<span class="number">111</span>, <span class="string">&quot;å°æ˜&quot;</span>, <span class="number">67</span>, <span class="string">&quot;110&quot;</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;name2&#125;</span> çš„åˆ†æ•°æ˜¯ <span class="subst">&#123;score2&#125;</span>ï¼Œå¿«å‘Šè¯‰taçˆ¸çˆ¸ï¼Œå·ç æ˜¯ <span class="subst">&#123;tel2&#125;</span>&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> (_, _, _, tel3) = (<span class="number">111</span>, <span class="string">&quot;å°æ˜&quot;</span>, <span class="number">67</span>, <span class="string">&quot;110&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// xxx1 çš„è°ƒç”¨</span></span><br><span class="line">        <span class="built_in">string</span> n1;</span><br><span class="line">        <span class="built_in">int</span> a1 = xxx1(<span class="keyword">out</span> n1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// xxx2 çš„è°ƒç”¨</span></span><br><span class="line">        <span class="keyword">var</span> t1 = xxx2();</span><br><span class="line">        Console.WriteLine(t1.Item2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// xxx3 çš„è°ƒç”¨</span></span><br><span class="line">        <span class="keyword">var</span> (age2, name8) = xxx3();</span><br><span class="line">        Console.WriteLine(age2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// xxx4 çš„è°ƒç”¨</span></span><br><span class="line">        <span class="keyword">var</span> (aa4, nn4) = xxx3();</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;åå­—æ˜¯ <span class="subst">&#123;nn4&#125;</span>, å¹´é¾„æ˜¯ <span class="subst">&#123;aa4&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">xxx1</span>(<span class="params"><span class="keyword">out</span> <span class="built_in">string</span> name</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        name = <span class="string">&quot;xm&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">16</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> Tuple&lt;<span class="built_in">int</span>, <span class="built_in">string</span>&gt; <span class="title">xxx2</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> Tuple.Create(<span class="number">16</span>, <span class="string">&quot;xm&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> ValueTuple&lt;<span class="built_in">int</span>, <span class="built_in">string</span>&gt; <span class="title">xxx3</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ValueTuple.Create(<span class="number">16</span>, <span class="string">&quot;xm&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> (<span class="built_in">int</span>, <span class="built_in">string</span>) xxx4()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="number">16</span>, <span class="string">&quot;xm&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="15-é›†åˆ-Collections"><a href="#15-é›†åˆ-Collections" class="headerlink" title="15. é›†åˆ (Collections)"></a>15. é›†åˆ (Collections)</h2><h3 id="15-1-System-Collections"><a href="#15-1-System-Collections" class="headerlink" title="15.1. System.Collections"></a>15.1. System.Collections</h3><h4 id="15-1-1-ArrayList"><a href="#15-1-1-ArrayList" class="headerlink" title="15.1.1. ArrayList"></a>15.1.1. ArrayList</h4><ul>
<li>ä»¥æ•°å­—ä¸ºä¸‹æ ‡</li>
<li>æœ‰åºçš„ï¼Œè‡ªåŠ¨ç¼–å·</li>
<li>é›†åˆ (æ•°æ®å®¹å™¨)</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æ•°ç»„ï¼Œæœ¬èº«é•¿åº¦æ˜¯ä¸èƒ½å˜åŒ–çš„</span></span><br><span class="line">        <span class="comment">// å› æ­¤ï¼Œè¦å¾€æ•°ç»„é‡Œæ·»åŠ å…ƒç´ ï¼Œåªèƒ½åˆ›å»ºä¸€ä¸ªæ›´é•¿çš„æ•°ç»„å–ä»£å®ƒ</span></span><br><span class="line">        <span class="keyword">var</span> a1 = <span class="keyword">new</span>[] &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">        <span class="keyword">var</span> a2 = <span class="keyword">new</span> <span class="built_in">int</span>[a1.Length + <span class="number">1</span>];</span><br><span class="line">        a2[<span class="number">0</span>] = a1[<span class="number">0</span>];</span><br><span class="line">        a2[<span class="number">1</span>] = a1[<span class="number">1</span>];</span><br><span class="line">        a2[<span class="number">2</span>] = <span class="number">4</span>;</span><br><span class="line">        a2[<span class="number">3</span>] = a1[<span class="number">2</span>];</span><br><span class="line">        a1 = a2;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ä¸€ä¸ªç±»çš„æ–¹å¼ï¼Œå°†ä¸Šè¿°çš„æ“ä½œå°è£…èµ·æ¥</span></span><br><span class="line">        <span class="keyword">var</span> na1 = <span class="keyword">new</span> NideArray();</span><br><span class="line">        na1.Add(<span class="number">1</span>);</span><br><span class="line">        na1.Add(<span class="number">2</span>);</span><br><span class="line">        na1.Add(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> o <span class="keyword">in</span> na1.innerArray)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(o);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç›´æ¥ä½¿ç”¨ BCL ä¸­çš„é›†åˆç±»ï¼Œä¸éœ€è¦é€ è½®å­</span></span><br><span class="line">        <span class="keyword">var</span> al = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        al.Add(<span class="number">1</span>);</span><br><span class="line">        al.Add(<span class="number">21111</span>);</span><br><span class="line">        al.Add(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        Console.WriteLine(<span class="string">&quot;é•¿åº¦ &#123;0&#125;&quot;</span>, al.Count);</span><br><span class="line">        al.Remove(<span class="number">3</span>);</span><br><span class="line">        al.RemoveAt(<span class="number">0</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;é•¿åº¦ &#123;0&#125;&quot;</span>, al.Count);</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> o <span class="keyword">in</span> al)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(o);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">NideArray</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">object</span>[] innerArray = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Add</span>(<span class="params"><span class="built_in">object</span> o</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">object</span>[innerArray.Length + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; innerArray.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            arr[i] = innerArray[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        arr[arr.Length - <span class="number">1</span>] = o;</span><br><span class="line">        innerArray = arr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Remove</span>(<span class="params"><span class="built_in">object</span> o</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="15-1-2-Hashtable"><a href="#15-1-2-Hashtable" class="headerlink" title="15.1.2. Hashtable"></a>15.1.2. Hashtable</h4><ul>
<li>ä»¥å¯¹è±¡ä¸ºä¸‹æ ‡</li>
<li>k-v pair &#x2F; é”®å€¼å¯¹</li>
<li>å¯¹äº key æœ€é‡è¦çš„æ˜¯: å”¯ä¸€æ€§</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// åºå· vs åå­—</span></span><br><span class="line">        <span class="keyword">var</span> t1 = (<span class="number">123</span>, <span class="string">&quot;å°æ˜&quot;</span>, <span class="number">78.5</span>, <span class="string">&quot;110&quot;</span>); <span class="comment">// t1.Item1, t1.Item2 ...</span></span><br><span class="line">        <span class="keyword">var</span> t2 = (id: <span class="number">123</span>, name: <span class="string">&quot;å°æ˜&quot;</span>, score: <span class="number">78.5</span>); <span class="comment">// t2.name, t2.score</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// åºå·</span></span><br><span class="line">        <span class="keyword">var</span> n1 = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        n1.Add(<span class="string">&quot;å°æ˜&quot;</span>); <span class="comment">// 0</span></span><br><span class="line">        n1.Add(<span class="string">&quot;å°çº¢&quot;</span>); <span class="comment">// 1</span></span><br><span class="line">        n1.Add(<span class="string">&quot;å°è“&quot;</span>); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> s1 = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        s1.Add(<span class="number">59.5</span>); <span class="comment">// 0</span></span><br><span class="line">        s1.Add(<span class="number">97.5</span>); <span class="comment">// 1</span></span><br><span class="line">        s1.Add(<span class="number">67.5</span>); <span class="comment">// 2</span></span><br><span class="line">        Console.WriteLine(<span class="string">&quot;å–æŸä¸ªå€¼: &#123;0&#125;&quot;</span>, s1[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">string</span> name = n1[i].ToString();</span><br><span class="line">            <span class="built_in">double</span> score = (<span class="built_in">double</span>)s1[i];</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;name&#125;</span> çš„æˆç»©ä¸º <span class="subst">&#123;score&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ˜¾å¼æŒ‡å®šåå­— (k-v)</span></span><br><span class="line">        <span class="keyword">var</span> s2 = <span class="keyword">new</span> Hashtable();</span><br><span class="line">        s2.Add(<span class="string">&quot;å°æ˜&quot;</span>, <span class="number">59.5</span>);</span><br><span class="line">        s2.Add(<span class="string">&quot;å°çº¢&quot;</span>, <span class="number">97.5</span>);</span><br><span class="line">        s2.Add(<span class="string">&quot;å°è“&quot;</span>, <span class="number">67.5</span>);</span><br><span class="line">        s2.Add(<span class="string">&quot;å°å¼º&quot;</span>, <span class="number">167.5</span>);</span><br><span class="line">        s2.Add(<span class="string">&quot;å°å¼±&quot;</span>, <span class="number">667.5</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;å–æŸä¸ªå€¼: &#123;0&#125;&quot;</span>, s2[<span class="string">&quot;å°æ˜&quot;</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (DictionaryEntry o <span class="keyword">in</span> s2)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;- <span class="subst">&#123;o.Key&#125;</span>: <span class="subst">&#123;o.Value&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> k <span class="keyword">in</span> s2.Keys)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(k);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä»¥è‡ªå®šä¹‰å¯¹è±¡ä¸ºä¸‹æ ‡ï¼Œä½†æ˜¯ <strong>éœ€è¦é‡å†™ GetHashCode&#x2F;Equals æ–¹æ³•</strong>:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ä»¥å¯¹è±¡ä¸º Key</span></span><br><span class="line">        <span class="keyword">var</span> s3 = <span class="keyword">new</span> Hashtable();</span><br><span class="line">        s3.Add(<span class="keyword">new</span> Student(<span class="string">&quot;å°æ˜&quot;</span>), <span class="number">59.5</span>);</span><br><span class="line">        s3.Add(<span class="keyword">new</span> Student(<span class="string">&quot;å°çº¢&quot;</span>), <span class="number">97.5</span>);</span><br><span class="line">        s3.Add(<span class="keyword">new</span> Student(<span class="string">&quot;å°è“&quot;</span>), <span class="number">67.5</span>);</span><br><span class="line">        s3.Add(<span class="keyword">new</span> Student(<span class="string">&quot;å°å¼º&quot;</span>), <span class="number">167.5</span>);</span><br><span class="line">        s3.Add(<span class="keyword">new</span> Student(<span class="string">&quot;å°å¼±&quot;</span>), <span class="number">667.5</span>);</span><br><span class="line"></span><br><span class="line">        Console.WriteLine(<span class="string">&quot;+ &#123;0&#125;&quot;</span>, s3[<span class="keyword">new</span> Student(<span class="string">&quot;å°å¼±&quot;</span>)]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Tel &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span>(<span class="params"><span class="built_in">string</span> name</span>)</span> =&gt; Name = name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">int</span> <span class="title">GetHashCode</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> Name.GetHashCode();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">bool</span> <span class="title">Equals</span>(<span class="params"><span class="built_in">object</span>? obj</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Student s = obj <span class="keyword">as</span> Student;</span><br><span class="line">        <span class="keyword">return</span> s != <span class="literal">null</span> &amp;&amp; Name == s.Name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="15-1-3-Queue"><a href="#15-1-3-Queue" class="headerlink" title="15.1.3. Queue"></a>15.1.3. Queue</h4><p>FIFO (First In First Outï¼Œå…ˆè¿›å…ˆå‡º):</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> q1 = <span class="keyword">new</span> Queue();</span><br><span class="line">q1.Enqueue(<span class="number">111</span>);</span><br><span class="line">q1.Enqueue(<span class="number">222</span>);</span><br><span class="line">q1.Enqueue(<span class="number">333</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">object</span> who = q1.Dequeue();</span><br><span class="line">Console.WriteLine(who);</span><br><span class="line">Console.WriteLine(q1.Peek()); <span class="comment">// åªçœ‹ä¸ç§»é™¤</span></span><br><span class="line">Console.WriteLine(q1.Dequeue());</span><br><span class="line"></span><br><span class="line">Console.WriteLine(q1.Count);</span><br><span class="line"></span><br><span class="line"><span class="built_in">object</span>[] arr = q1.ToArray();</span><br></pre></td></tr></table></figure>

<h4 id="15-1-4-Stack"><a href="#15-1-4-Stack" class="headerlink" title="15.1.4. Stack"></a>15.1.4. Stack</h4><p>LIFO (Last In First Outï¼Œåè¿›å…ˆå‡º):</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> Stack();</span><br><span class="line">s1.Push(<span class="number">111</span>);</span><br><span class="line">s1.Push(<span class="number">222</span>);</span><br><span class="line">s1.Push(<span class="number">333</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">object</span> who = s1.Pop();</span><br><span class="line">Console.WriteLine(who);</span><br><span class="line">Console.WriteLine(s1.Peek());</span><br><span class="line">Console.WriteLine(s1.Pop());</span><br><span class="line"></span><br><span class="line">Console.WriteLine(s1.Count);</span><br><span class="line">Console.WriteLine(s1.Peek());</span><br><span class="line"></span><br><span class="line">s1.Clear();</span><br></pre></td></tr></table></figure>

<p>å®ç°è‡ªå·±çš„æ ˆ:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">1</span>: <span class="keyword">class</span> <span class="title">MyStack</span></span><br><span class="line"> 2: &#123;</span><br><span class="line"> <span class="number">3</span>:     <span class="keyword">private</span> <span class="built_in">int</span> stackTop = <span class="number">0</span>; <span class="comment">// æ ˆé¡¶</span></span><br><span class="line"> <span class="number">4</span>:     <span class="keyword">private</span> <span class="built_in">object</span>[] _items = <span class="keyword">new</span> <span class="built_in">object</span>[<span class="number">200</span>];</span><br><span class="line"> <span class="number">5</span>: </span><br><span class="line"> <span class="number">6</span>:     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Push</span>(<span class="params"><span class="built_in">object</span> w</span>)</span></span><br><span class="line"><span class="function"> 7:</span>     &#123;</span><br><span class="line"> <span class="number">8</span>:         _items[stackTop] = w;</span><br><span class="line"> <span class="number">9</span>:         stackTop = stackTop + <span class="number">1</span>;</span><br><span class="line"><span class="number">10</span>:     &#125;</span><br><span class="line"><span class="number">11</span>: </span><br><span class="line"><span class="number">12</span>:     <span class="function"><span class="keyword">public</span> <span class="built_in">object</span> <span class="title">Pop</span>()</span></span><br><span class="line"><span class="function">13:</span>     &#123;</span><br><span class="line"><span class="number">14</span>:         stackTop = stackTop - <span class="number">1</span>;</span><br><span class="line"><span class="number">15</span>:         <span class="keyword">return</span> _items[stackTop];</span><br><span class="line"><span class="number">16</span>:     &#125;</span><br><span class="line"><span class="number">17</span>: </span><br><span class="line"><span class="number">18</span>:     <span class="function"><span class="keyword">public</span> <span class="built_in">object</span> <span class="title">Peek</span>()</span></span><br><span class="line"><span class="function">19:</span>     &#123;</span><br><span class="line"><span class="number">20</span>:         <span class="keyword">return</span> _items[stackTop - <span class="number">1</span>];</span><br><span class="line"><span class="number">21</span>:     &#125;</span><br><span class="line"><span class="number">22</span>: </span><br><span class="line"><span class="number">23</span>:     <span class="keyword">public</span> <span class="built_in">int</span> Count</span><br><span class="line"><span class="number">24</span>:     &#123;</span><br><span class="line"><span class="number">25</span>:         <span class="keyword">get</span> =&gt; stackTop;</span><br><span class="line"><span class="number">26</span>:     &#125;</span><br><span class="line"><span class="number">27</span>: </span><br><span class="line"><span class="number">28</span>:     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Clear</span>()</span></span><br><span class="line"><span class="function">29:</span>     &#123;</span><br><span class="line"><span class="number">30</span>:         stackTop = <span class="number">0</span>;</span><br><span class="line"><span class="number">31</span>:     &#125;</span><br><span class="line"><span class="number">32</span>: &#125;</span><br></pre></td></tr></table></figure>

<h4 id="15-1-5-SortedList-x2F-BitArray"><a href="#15-1-5-SortedList-x2F-BitArray" class="headerlink" title="15.1.5. SortedList&#x2F;BitArray"></a>15.1.5. SortedList&#x2F;BitArray</h4><h3 id="15-2-System-Collections-Generic"><a href="#15-2-System-Collections-Generic" class="headerlink" title="15.2. System.Collections.Generic"></a>15.2. System.Collections.Generic</h3><h4 id="15-2-1-List-lt-T-gt"><a href="#15-2-1-List-lt-T-gt" class="headerlink" title="15.2.1. List &lt;T&gt;"></a>15.2.1. List <code>&lt;T&gt;</code></h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">string</span>&gt; l1 = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> l2 = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line">l2.Add(<span class="string">&quot;aaaa&quot;</span>);</span><br><span class="line">l2.Add(<span class="string">&quot;bbbb&quot;</span>);</span><br><span class="line">l2.Add(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">l2.Add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">l2.Add(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">l2.Add(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">l2.Insert(<span class="number">1</span>, <span class="string">&quot;ccc&quot;</span>);</span><br><span class="line">l2.RemoveAll(s =&gt; s.Length &lt; <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> l3 = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt; &#123;<span class="string">&quot;aaaa&quot;</span>, <span class="string">&quot;bbbb&quot;</span>, <span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>&#125;;</span><br><span class="line">l3.Insert(<span class="number">1</span>, <span class="string">&quot;ccc&quot;</span>);</span><br><span class="line">l3.RemoveAll(s =&gt; s.Length &lt; <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> s1 = l2[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> e <span class="keyword">in</span> l2)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="15-2-2-Dictionary-lt-TKey-TValue-gt"><a href="#15-2-2-Dictionary-lt-TKey-TValue-gt" class="headerlink" title="15.2.2. Dictionary&lt;TKey, TValue&gt;"></a>15.2.2. Dictionary&lt;TKey, TValue&gt;</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">double</span>&gt;();</span><br><span class="line">d1.Add(<span class="string">&quot;xm&quot;</span>, <span class="number">67.5</span>);</span><br><span class="line">d1.Add(<span class="string">&quot;xh&quot;</span>, <span class="number">97.5</span>);</span><br><span class="line">d1.Add(<span class="string">&quot;xl&quot;</span>, <span class="number">75</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d2 = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">double</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    &#123;<span class="string">&quot;xm&quot;</span>, <span class="number">67.5</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xh&quot;</span>, <span class="number">97.5</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xl&quot;</span>, <span class="number">75</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">double</span> s1 = d2[<span class="string">&quot;xh&quot;</span>];</span><br><span class="line">Console.WriteLine(s1);</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> isSuccess = d2.TryAdd(<span class="string">&quot;xm&quot;</span>, <span class="number">100</span>);</span><br><span class="line">Console.WriteLine(isSuccess);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> <span class="keyword">value</span> <span class="keyword">in</span> d2.Values)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="keyword">value</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="15-2-3-Queue-lt-T-gt"><a href="#15-2-3-Queue-lt-T-gt" class="headerlink" title="15.2.3. Queue &lt;T&gt;"></a>15.2.3. Queue <code>&lt;T&gt;</code></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var q1 = new Queue&lt;string&gt;();</span><br><span class="line">q1.Enqueue(&quot;å°æ˜&quot;);</span><br><span class="line">q1.Enqueue(&quot;å°å…°&quot;);</span><br><span class="line">q1.Enqueue(&quot;å°æœ±&quot;);</span><br><span class="line"></span><br><span class="line">string n1 = q1.Dequeue();</span><br><span class="line">Console.WriteLine(n1);</span><br></pre></td></tr></table></figure>

<h4 id="15-2-4-Stack-lt-T-gt"><a href="#15-2-4-Stack-lt-T-gt" class="headerlink" title="15.2.4. Stack &lt;T&gt;"></a>15.2.4. Stack <code>&lt;T&gt;</code></h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> Stack&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line">s1.Push(<span class="string">&quot;å°æ˜&quot;</span>);</span><br><span class="line">s1.Push(<span class="string">&quot;å°å…°&quot;</span>);</span><br><span class="line">s1.Push(<span class="string">&quot;å°æœ±&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> n1 = s1.Pop();</span><br><span class="line"><span class="built_in">string</span> n2 = s1.Peek();</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> shibushichenggongle = s1.TryPop(<span class="keyword">out</span> <span class="built_in">string</span> n3);</span><br><span class="line">Console.WriteLine(shibushichenggongle);</span><br></pre></td></tr></table></figure>

<h4 id="15-2-5-LinkedList-lt-T-gt"><a href="#15-2-5-LinkedList-lt-T-gt" class="headerlink" title="15.2.5. LinkedList &lt;T&gt;"></a>15.2.5. LinkedList <code>&lt;T&gt;</code></h4><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.linkedlist-1?view=net-5.0">https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.linkedlist-1?view=net-5.0</a></p>
<h4 id="15-2-6-HashSet-lt-T-gt"><a href="#15-2-6-HashSet-lt-T-gt" class="headerlink" title="15.2.6. HashSet &lt;T&gt;"></a>15.2.6. HashSet <code>&lt;T&gt;</code></h4><ul>
<li>æ— åº</li>
<li>å”¯ä¸€</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> hs1 = <span class="keyword">new</span> HashSet&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line">hs1.Add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">hs1.Add(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">hs1.Add(<span class="string">&quot;!&quot;</span>);</span><br><span class="line">hs1.Add(<span class="string">&quot;!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> hs2 = <span class="keyword">new</span> HashSet&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line">hs2.Add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">hs2.Add(<span class="string">&quot;world&quot;</span>);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(hs1.Count);</span><br><span class="line">hs1.IntersectWith(hs2);</span><br><span class="line">hs1.UnionWith(hs2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»é‡çš„ä¸€ç§æ–¹æ³•</span></span><br><span class="line"><span class="keyword">var</span> list1 = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">22</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> hs3 = <span class="keyword">new</span> HashSet&lt;<span class="built_in">int</span>&gt;(list1);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> o <span class="keyword">in</span> hs3.ToList())</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(o);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="15-2-7-SortedList-x2F-Set-x2F-Dictionary-lt-gt"><a href="#15-2-7-SortedList-x2F-Set-x2F-Dictionary-lt-gt" class="headerlink" title="15.2.7. SortedList&#x2F;Set&#x2F;Dictionary&lt;&gt;"></a>15.2.7. SortedList&#x2F;Set&#x2F;Dictionary&lt;&gt;</h4><h3 id="15-3-System-Collections-Immutable"><a href="#15-3-System-Collections-Immutable" class="headerlink" title="15.3. System.Collections.Immutable"></a>15.3. System.Collections.Immutable</h3><p>ImmutableList:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> list1 = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>, <span class="string">&quot;!&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    Console.WriteLine(list1.Count);</span><br><span class="line">    Xxx(list1.ToImmutableList());</span><br><span class="line">    Console.WriteLine(list1.Count);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Xxx</span>(<span class="params">ImmutableList&lt;<span class="built_in">string</span>&gt; l</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    l.Add(<span class="string">&quot;kkkkkkk&quot;</span>);</span><br><span class="line">    l.Add(<span class="string">&quot;kkkkkk2&quot;</span>);</span><br><span class="line">    l = l.Add(<span class="string">&quot;kkkk&quot;</span>).Add(<span class="string">&quot;1&quot;</span>).Add(<span class="string">&quot;33&quot;</span>);</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> s <span class="keyword">in</span> l)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="16-IEnumerable-x2F-Linq"><a href="#16-IEnumerable-x2F-Linq" class="headerlink" title="16. IEnumerable&#x2F;Linq"></a>16. IEnumerable&#x2F;Linq</h2><ol>
<li>string&#x2F;array&#x2F;List&#x2F;Dict è™½ç„¶ä¸æ˜¯åŒä¸€ç§ç±»å‹ï¼Œä½†æ˜¯å¾ˆåƒï¼Œæœ‰æ²¡æœ‰å†…åœ¨ç›¸ä¼¼çš„é€»è¾‘? [æ€è€ƒ]</li>
<li>a) å®¹å™¨ b) éå†</li>
<li>å°†ä¸Šè¿°ä¸¤ç‚¹é€»è¾‘ï¼ŒæŠ½è±¡ä¸ºæ¥å£ IEnumerable&#x2F;IEnumerator(MoveNext,Current)</li>
<li>ä¸ºäº†ä¾¿äºä½¿ç”¨è¿™ä¸ªæ¥å£ï¼Œå‡ºç° foreach è¯­æ³•</li>
<li>é€šè¿‡æ’ä»¶çš„å½¢å¼ï¼Œæ¨å‡ºäº† Linq çš„æœºåˆ¶ (Where&#x2F;Select&#x2F;OrderBy&#x2F;Avg&#x2F;Sum)<ul>
<li>Method è¯­æ³•</li>
<li>Query è¡¨è¾¾å¼è¯­æ³• (Linq to Object)</li>
</ul>
</li>
<li>Linq Provider (Linq ä¾›åº”å•†&#x2F;æä¾›è€…):<ul>
<li>Linq to XML</li>
<li>Linq to SQL</li>
<li>Linq to Entity</li>
</ul>
</li>
</ol>
<h3 id="16-1-IEnumerable-x2F-IEnumerator-x2F-foreach"><a href="#16-1-IEnumerable-x2F-IEnumerator-x2F-foreach" class="headerlink" title="16.1. IEnumerable&#x2F;IEnumerator&#x2F;foreach"></a>16.1. IEnumerable&#x2F;IEnumerator&#x2F;foreach</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> s1 = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">        <span class="built_in">int</span>[] a1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">        List&lt;<span class="built_in">double</span>&gt; l1 = <span class="keyword">new</span> List&lt;<span class="built_in">double</span>&gt; &#123;<span class="number">1.2</span>, <span class="number">2.3</span>, <span class="number">4.6</span>&#125;;</span><br><span class="line"></span><br><span class="line">        Rainbow rb = <span class="keyword">new</span> Rainbow();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> e <span class="keyword">in</span> rb)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Rainbow</span> : <span class="title">IEnumerable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span>[] colors = &#123;<span class="string">&quot;Red&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Yellow&quot;</span>, <span class="string">&quot;Green&quot;</span>, <span class="string">&quot;Blue&quot;</span>, <span class="string">&quot;Dian&quot;</span>, <span class="string">&quot;Purple&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Show</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;æˆ‘æœ‰ <span class="subst">&#123;colors.Length&#125;</span> ç§é¢œè‰²&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IEnumerator <span class="title">GetEnumerator</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyEnumerator(colors);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">MyEnumerator</span> : <span class="title">IEnumerator</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">string</span>[] colors;</span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">int</span> index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MyEnumerator</span>(<span class="params"><span class="built_in">string</span>[] cs</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            colors = <span class="keyword">new</span> <span class="built_in">string</span>[cs.Length];</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; cs.Length; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                colors[i] = cs[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">MoveNext</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (index &gt; colors.Length - <span class="number">1</span> || index &lt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            index++;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">object</span> Current</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> colors[index - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Reset</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            index = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³›å‹ç‰ˆæœ¬:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Rainbow</span> : <span class="title">IEnumerable</span>&lt;<span class="title">string</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span>[] colors = &#123;<span class="string">&quot;Red&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Yellow&quot;</span>, <span class="string">&quot;Green&quot;</span>, <span class="string">&quot;Blue&quot;</span>, <span class="string">&quot;Dian&quot;</span>, <span class="string">&quot;Purple&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Show</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;æˆ‘æœ‰ <span class="subst">&#123;colors.Length&#125;</span> ç§é¢œè‰²&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IEnumerator&lt;<span class="built_in">string</span>&gt; <span class="title">GetEnumerator</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> <span class="string">&quot;222&quot;</span>;</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> <span class="string">&quot;333&quot;</span>;</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> <span class="string">&quot;444&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    IEnumerator IEnumerable.GetEnumerator()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> GetEnumerator();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16-2-Iterator"><a href="#16-2-Iterator" class="headerlink" title="16.2. Iterator"></a>16.2. Iterator</h3><p>è¯­æ³•ç³–ã€‚</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> IEnumerator <span class="title">GetEnumerator</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; colors.Length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> colors[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çµæ´»çš„éå†é€»è¾‘:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> s1 = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">        <span class="built_in">int</span>[] a1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">        List&lt;<span class="built_in">double</span>&gt; l1 = <span class="keyword">new</span> List&lt;<span class="built_in">double</span>&gt; &#123;<span class="number">1.2</span>, <span class="number">2.3</span>, <span class="number">4.6</span>&#125;;</span><br><span class="line">        Dictionary&lt;<span class="built_in">int</span>, <span class="built_in">string</span>&gt; d = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">int</span>, <span class="built_in">string</span>&gt;();</span><br><span class="line"></span><br><span class="line">        Rainbow rb = <span class="keyword">new</span> Rainbow();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> e <span class="keyword">in</span> rb.GetMyEnumerator4)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Rainbow</span> : <span class="title">IEnumerable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span>[] colors = &#123;<span class="string">&quot;Red&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Yellow&quot;</span>, <span class="string">&quot;Green&quot;</span>, <span class="string">&quot;Blue&quot;</span>, <span class="string">&quot;Dian&quot;</span>, <span class="string">&quot;Purple&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">Show</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;æˆ‘æœ‰ <span class="subst">&#123;colors.Length&#125;</span> ç§é¢œè‰²&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IEnumerator <span class="title">GetEnumerator</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> GetMyEnumerator1();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">IEnumerator <span class="title">GetMyEnumerator1</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; colors.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">return</span> colors[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    IEnumerator GetMyEnumerator2</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">return</span> <span class="string">&quot;èµ¤&quot;</span>;</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">return</span> <span class="string">&quot;æ©™&quot;</span>;</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">return</span> <span class="string">&quot;é»„&quot;</span>;</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">return</span> <span class="string">&quot;ç»¿&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IEnumerable <span class="title">GetMyEnumerator3</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> IEnumerable GetMyEnumerator4</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">return</span> <span class="number">666</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16-3-Linq"><a href="#16-3-Linq" class="headerlink" title="16.3. Linq"></a>16.3. Linq</h3><p>Linq (Language Integrated Queryï¼Œè¯­è¨€é›†æˆæ‰©å±•)ï¼š</p>
<ul>
<li>åŸºäº IEnumerable <code>&lt;T&gt;</code> ç±»å‹è¿›è¡Œçš„ <strong>æ‰©å±•</strong></li>
<li>å®ç°åœ¨ System.Linq.Enumerable ç±»ä¸­ï¼Œé€šè¿‡æ‰©å±•æ–¹æ³•çš„å½¢å¼å®ç°çš„</li>
<li>æ”¯æŒä¸¤ç§è¯­æ³•: Method Syntax å’Œ Query Syntax</li>
</ul>
<h4 id="16-3-1-Method-Syntax"><a href="#16-3-1-Method-Syntax" class="headerlink" title="16.3.1. Method Syntax"></a>16.3.1. Method Syntax</h4><ul>
<li>ç­›é€‰æ“ä½œç¬¦: Where&#x2F;OfType</li>
<li>æŠ•å°„æ“ä½œç¬¦: Select&#x2F;SelectMany</li>
<li>é¡ºåºæ“ä½œç¬¦: OrderBy&#x2F;ThenBy&#x2F;OrderByDescending&#x2F;ThenByDescending&#x2F;Reverse</li>
<li>è¿æ¥æ“ä½œç¬¦: Join&#x2F;GroupJoin</li>
<li>ç»„åˆæ“ä½œç¬¦: GroupBy&#x2F;ToLookup</li>
<li>é™å®šæ“ä½œç¬¦: Any&#x2F;All&#x2F;Contains</li>
<li>èŒƒå›´æ“ä½œç¬¦: Take&#x2F;Skip&#x2F;TakeWhile&#x2F;SkipWhile</li>
<li>é›†åˆæ“ä½œç¬¦: Distinct&#x2F;Union&#x2F;Intersect&#x2F;Except&#x2F;Zip</li>
<li>è¿”å›å•å…ƒç´ : First&#x2F;FirstOrDefault&#x2F;Last&#x2F;LastOrDefault&#x2F;ElementAt&#x2F;ElementAtOrDefault&#x2F;Single&#x2F;SingleOrDefault</li>
<li>èšåˆæ“ä½œç¬¦: Count&#x2F;Sum&#x2F;Min&#x2F;Max&#x2F;Average&#x2F;Aggregate</li>
<li>è½¬æ¢æ“ä½œç¬¦: ToArray&#x2F;AsEnumerable&#x2F;ToList&#x2F;ToDictionary&#x2F;Cast</li>
<li>ç”Ÿæˆæ“ä½œç¬¦: Empty&#x2F;Range&#x2F;Repeat</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> s1 = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">        <span class="built_in">int</span>[] a1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">666</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">        <span class="built_in">int</span>[] a11 = &#123;<span class="number">666</span>, <span class="number">777</span>, <span class="number">888</span>&#125;;</span><br><span class="line">        <span class="built_in">object</span>[] a2 = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;666&quot;</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="string">&quot;7&quot;</span>, <span class="number">5.5</span>, <span class="number">3</span>, <span class="number">4</span> &#125;;</span><br><span class="line">        <span class="built_in">string</span>[] a3 = &#123;<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>, <span class="string">&quot;where&quot;</span>, <span class="string">&quot;are&quot;</span>, <span class="string">&quot;You&quot;</span>&#125;;</span><br><span class="line">        List&lt;<span class="built_in">double</span>&gt; l1 = <span class="keyword">new</span> List&lt;<span class="built_in">double</span>&gt; &#123;<span class="number">1.2</span>, <span class="number">2.3</span>, <span class="number">4.6</span>&#125;;</span><br><span class="line">        Dictionary&lt;<span class="built_in">int</span>, <span class="built_in">string</span>&gt; d = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">int</span>, <span class="built_in">string</span>&gt;();</span><br><span class="line"></span><br><span class="line">        List&lt;BookType&gt; types = <span class="keyword">new</span> List&lt;BookType&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">new</span> BookType(<span class="number">1</span>, <span class="string">&quot;ç§‘æŠ€ç±»&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> BookType(<span class="number">2</span>, <span class="string">&quot;ç§‘å¹»ç±»&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> BookType(<span class="number">3</span>, <span class="string">&quot;ç§‘å­¦ç±»&quot;</span>),</span><br><span class="line">        &#125;;</span><br><span class="line">        List&lt;Book&gt; books = <span class="keyword">new</span> List&lt;Book&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">new</span> Book(<span class="number">1</span>, <span class="string">&quot;C# ç¼–ç¨‹è¯­è¨€&quot;</span>, <span class="number">222</span>, <span class="number">1</span>),</span><br><span class="line">            <span class="keyword">new</span> Book(<span class="number">2</span>, <span class="string">&quot;VueJS&quot;</span>, <span class="number">22</span>, <span class="number">1</span>),</span><br><span class="line">            <span class="keyword">new</span> Book(<span class="number">3</span>, <span class="string">&quot;ä¸‰ä½“&quot;</span>, <span class="number">23</span>, <span class="number">2</span>),</span><br><span class="line">            <span class="keyword">new</span> Book(<span class="number">4</span>, <span class="string">&quot;æ˜Ÿé™…ç©¿è¶Š&quot;</span>, <span class="number">54</span>, <span class="number">2</span>),</span><br><span class="line">            <span class="keyword">new</span> Book(<span class="number">5</span>, <span class="string">&quot;ä»™å‰‘&quot;</span>, <span class="number">64</span>, <span class="number">2</span>),</span><br><span class="line">            <span class="keyword">new</span> Book(<span class="number">6</span>, <span class="string">&quot;åŠ¨ç‰©ä¸–ç•Œ&quot;</span>, <span class="number">222</span>, <span class="number">3</span>),</span><br><span class="line">            <span class="keyword">new</span> Book(<span class="number">9</span>, <span class="string">&quot;é’¢é“æ˜¯æ€ä¹ˆç‚¼æˆçš„&quot;</span>, <span class="number">11</span>, <span class="number">3</span>),</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿‡æ»¤ã€ç­›é€‰</span></span><br><span class="line">        IEnumerable&lt;<span class="built_in">int</span>&gt; r1 = a1.Where(x =&gt; x &gt; <span class="number">5</span>);</span><br><span class="line">        <span class="keyword">var</span> r2 = a2.OfType&lt;<span class="built_in">int</span>&gt;();</span><br><span class="line">        <span class="keyword">var</span> r3 = a2.Where(x =&gt; x <span class="keyword">is</span> <span class="built_in">string</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŠ•å°„</span></span><br><span class="line">        <span class="keyword">var</span> r4 = a1.Select(x =&gt; x &gt; <span class="number">10</span> ? x : x + <span class="number">10</span>);</span><br><span class="line">        <span class="keyword">var</span> r5 = a1.Select(x =&gt; <span class="string">$&quot;è¿™ä¸ªæ•°æ˜¯: <span class="subst">&#123;x + <span class="number">1</span>&#125;</span>&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> r6 = a1.Select(x =&gt; (x, <span class="string">$&quot;<span class="subst">&#123;x + <span class="number">1</span>&#125;</span>&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ’åº</span></span><br><span class="line">        <span class="keyword">var</span> r7 = a1.Reverse();</span><br><span class="line">        <span class="keyword">var</span> r8 = a1.OrderBy(x =&gt; -x);</span><br><span class="line">        <span class="keyword">var</span> r9 = a1.OrderByDescending(x =&gt; x);</span><br><span class="line">        <span class="keyword">var</span> r10 = a3.OrderBy(x =&gt; x.Length);</span><br><span class="line">        <span class="keyword">var</span> r11 = a3.OrderBy(x =&gt; x.Length).ThenByDescending(x =&gt; x[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">var</span> r12 = books.OrderBy(x =&gt; x.Price);</span><br><span class="line">        <span class="keyword">var</span> r13 = books.Where(x =&gt; x.TypeId != <span class="number">2</span>).OrderBy(x =&gt; x.Price);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿æ¥</span></span><br><span class="line">        <span class="keyword">var</span> r14 = books.Join(</span><br><span class="line">            types,</span><br><span class="line">            book =&gt; book.TypeId,</span><br><span class="line">            type =&gt; type.ID,</span><br><span class="line">            (book, type) =&gt; (typeName: type.Name, book)</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">var</span> r15 = books</span><br><span class="line">            .Join(</span><br><span class="line">                types,</span><br><span class="line">                book =&gt; book.TypeId,</span><br><span class="line">                type =&gt; type.ID,</span><br><span class="line">                (book, type) =&gt; (typeName: type.Name, book)</span><br><span class="line">            )</span><br><span class="line">            .Where(o =&gt; o.typeName == <span class="string">&quot;ç§‘å¹»ç±»&quot;</span>)</span><br><span class="line">            .Select(o =&gt; o.book);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// èŒƒå›´</span></span><br><span class="line">        <span class="keyword">var</span> r16 = a1.Take(<span class="number">3</span>); <span class="comment">// limit 3</span></span><br><span class="line">        <span class="keyword">var</span> r17 = a1.TakeLast(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">var</span> r18 = a1.TakeWhile(x =&gt; x &lt; <span class="number">5</span>);</span><br><span class="line">        <span class="keyword">var</span> r19 = a1.Skip(<span class="number">2</span>).Take(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">var</span> r20 = a1.SkipLast(<span class="number">3</span>).Where(x =&gt; x &gt; <span class="number">1</span>).OrderBy(x =&gt; x);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é›†åˆ</span></span><br><span class="line">        <span class="keyword">var</span> r21 = a1.Except(a11);</span><br><span class="line">        <span class="keyword">var</span> r22 = a1.Union(a11);</span><br><span class="line">        <span class="keyword">var</span> r23 = a1.Distinct(); <span class="comment">// å»é‡</span></span><br><span class="line">        <span class="keyword">var</span> r24 = a1.Zip(a1.Select(x =&gt; x + <span class="number">100</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿”å›å•ä¸ª</span></span><br><span class="line">        <span class="keyword">var</span> r25 = a1.Zip(a1.Select(x =&gt; x + <span class="number">100</span>)).First();</span><br><span class="line">        <span class="keyword">var</span> r26 = a1.Zip(a1.Select(x =&gt; x + <span class="number">100</span>)).Last();</span><br><span class="line">        <span class="keyword">var</span> r27 = a1.Zip(a1.Select(x =&gt; x + <span class="number">100</span>)).ElementAt(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">var</span> r28 = a1.Zip(a1.Select(x =&gt; x + <span class="number">100</span>)).Take(<span class="number">1</span>).Single();</span><br><span class="line">        <span class="keyword">var</span> r29 = a1.Where(x =&gt; x &gt; <span class="number">10000</span>).FirstOrDefault();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// èšåˆ</span></span><br><span class="line">        <span class="keyword">var</span> r30 = a1.Sum();</span><br><span class="line">        <span class="keyword">var</span> r31 = a1.Average();</span><br><span class="line">        <span class="keyword">var</span> r32 = a1.Max();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è½¬æ¢ (IEnumerable)</span></span><br><span class="line">        <span class="built_in">int</span>[] r33 = a1.Take(<span class="number">3</span>).ToArray();</span><br><span class="line">        List&lt;<span class="built_in">int</span>&gt; r34 = a1.Take(<span class="number">3</span>).ToList();</span><br><span class="line">        Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">int</span>&gt; r35 = a1.Take(<span class="number">3</span>).ToDictionary(x =&gt; <span class="string">$&quot;id-<span class="subst">&#123;x&#125;</span>&quot;</span>, x =&gt; x);</span><br><span class="line">        <span class="built_in">string</span> r36  = <span class="built_in">string</span>.Concat(<span class="string">&quot;hello, world&quot;</span>.Select(x =&gt; (<span class="built_in">char</span>) (x + <span class="number">1</span>)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é™æ€ã€ç”Ÿæˆ</span></span><br><span class="line">        <span class="keyword">var</span> r37 = Enumerable.Empty&lt;<span class="built_in">int</span>&gt;(); <span class="comment">// ç”Ÿæˆä¸€ä¸ªç©ºçš„ int çš„å¯æšä¸¾ç±»</span></span><br><span class="line">        IEnumerable&lt;<span class="built_in">int</span>&gt; r38 = Enumerable.Range(<span class="number">1</span>, <span class="number">100</span>);</span><br><span class="line">        <span class="keyword">var</span> r39 = Enumerable.Repeat(<span class="string">&quot;xxx&quot;</span>, <span class="number">10</span>);</span><br><span class="line">        <span class="keyword">var</span> r40 = <span class="built_in">string</span>.Concat(Enumerable.Repeat(<span class="string">&quot;-&quot;</span>, <span class="number">100</span>));</span><br><span class="line"></span><br><span class="line">        Console.WriteLine(r40);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//foreach (var e in r39)</span></span><br><span class="line">        <span class="comment">//&#123;</span></span><br><span class="line">        <span class="comment">//    Console.WriteLine(e);</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="16-3-2-Query-Syntax-x2F-Expression"><a href="#16-3-2-Query-Syntax-x2F-Expression" class="headerlink" title="16.3.2. Query Syntax&#x2F;Expression"></a>16.3.2. Query Syntax&#x2F;Expression</h4><ul>
<li>Query è¡¨è¾¾å¼ï¼Œæœ€ç»ˆä¼šè¢«é€šè¿‡ Provider æä¾›çš„æœºåˆ¶ç¿»è¯‘æˆç›¸å…³çš„æ–¹æ³•è°ƒç”¨ã€‚æœ€ç»ˆæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚ä¸è¿‡ Provider å¯èƒ½ä¼šè¿›è¡Œä¸€å®šç¨‹åº¦çš„ä¼˜åŒ–</li>
<li>åœ¨ä¸€ä¸ª Query è¡¨è¾¾å¼ä¸­ï¼Œfrom å’Œ select&#x2F;group æ˜¯å¿…é¡»çš„ï¼Œå…¶ä»–å¯é€‰</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> s1 = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">        <span class="built_in">int</span>[] a1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">666</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">        <span class="built_in">int</span>[] a11 = &#123;<span class="number">666</span>, <span class="number">777</span>, <span class="number">888</span>&#125;;</span><br><span class="line">        <span class="built_in">object</span>[] a2 = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;666&quot;</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="string">&quot;7&quot;</span>, <span class="number">5.5</span>, <span class="number">3</span>, <span class="number">4</span> &#125;;</span><br><span class="line">        <span class="built_in">string</span>[] a3 = &#123;<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>, <span class="string">&quot;where&quot;</span>, <span class="string">&quot;are&quot;</span>, <span class="string">&quot;You&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">        List&lt;BookType&gt; types = <span class="keyword">new</span> List&lt;BookType&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">new</span> BookType(<span class="number">1</span>, <span class="string">&quot;ç§‘æŠ€ç±»&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> BookType(<span class="number">2</span>, <span class="string">&quot;ç§‘å¹»ç±»&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> BookType(<span class="number">3</span>, <span class="string">&quot;ç§‘å­¦ç±»&quot;</span>),</span><br><span class="line">        &#125;;</span><br><span class="line">        List&lt;Book&gt; books = <span class="keyword">new</span> List&lt;Book&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">new</span> Book(<span class="number">1</span>, <span class="string">&quot;C# ç¼–ç¨‹è¯­è¨€&quot;</span>, <span class="number">222</span>, <span class="number">1</span>),</span><br><span class="line">            <span class="keyword">new</span> Book(<span class="number">2</span>, <span class="string">&quot;VueJS&quot;</span>, <span class="number">22</span>, <span class="number">1</span>),</span><br><span class="line">            <span class="keyword">new</span> Book(<span class="number">3</span>, <span class="string">&quot;ä¸‰ä½“&quot;</span>, <span class="number">23</span>, <span class="number">2</span>),</span><br><span class="line">            <span class="keyword">new</span> Book(<span class="number">4</span>, <span class="string">&quot;æ˜Ÿé™…ç©¿è¶Š&quot;</span>, <span class="number">54</span>, <span class="number">2</span>),</span><br><span class="line">            <span class="keyword">new</span> Book(<span class="number">5</span>, <span class="string">&quot;ä»™å‰‘&quot;</span>, <span class="number">64</span>, <span class="number">2</span>),</span><br><span class="line">            <span class="keyword">new</span> Book(<span class="number">6</span>, <span class="string">&quot;åŠ¨ç‰©ä¸–ç•Œ&quot;</span>, <span class="number">222</span>, <span class="number">3</span>),</span><br><span class="line">            <span class="keyword">new</span> Book(<span class="number">9</span>, <span class="string">&quot;é’¢é“æ˜¯æ€ä¹ˆç‚¼æˆçš„&quot;</span>, <span class="number">11</span>, <span class="number">3</span>),</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        IEnumerable&lt;<span class="built_in">int</span>&gt; r0 = <span class="keyword">from</span> x <span class="keyword">in</span> a1 <span class="keyword">select</span> x;</span><br><span class="line">        <span class="keyword">var</span> r1 = a1.Where(x =&gt; x &gt; <span class="number">5</span>).Select(x =&gt; x);</span><br><span class="line">        <span class="keyword">var</span> r2 = <span class="keyword">from</span> x <span class="keyword">in</span> a1 <span class="keyword">where</span> x &gt; <span class="number">5</span> <span class="keyword">select</span> x;</span><br><span class="line">        <span class="keyword">var</span> r3 = <span class="keyword">from</span> x <span class="keyword">in</span> a1 <span class="keyword">where</span> x &gt; <span class="number">5</span> <span class="keyword">select</span> x + <span class="number">1000</span>;</span><br><span class="line">        <span class="keyword">var</span> r4 = <span class="keyword">from</span> x <span class="keyword">in</span> a1 <span class="keyword">where</span> x &gt; <span class="number">5</span> <span class="keyword">select</span> <span class="string">$&quot;I am <span class="subst">&#123;x * x&#125;</span>&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> r5 = <span class="keyword">from</span> x <span class="keyword">in</span> a1 <span class="keyword">where</span> x &gt; <span class="number">5</span> <span class="keyword">orderby</span> x <span class="keyword">select</span> x;</span><br><span class="line">        <span class="keyword">var</span> r6 = <span class="keyword">from</span> x <span class="keyword">in</span> a1 <span class="keyword">where</span> x &gt; <span class="number">5</span> <span class="keyword">orderby</span> x <span class="keyword">descending</span> <span class="keyword">select</span> x;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> r7 =</span><br><span class="line">            <span class="keyword">from</span> book <span class="keyword">in</span> books</span><br><span class="line">            <span class="keyword">join</span> type <span class="keyword">in</span> types</span><br><span class="line">            <span class="keyword">on</span> book.TypeId <span class="keyword">equals</span> type.<span class="function">ID</span></span><br><span class="line"><span class="function">            <span class="title">select</span> (<span class="params">type.Name, book, type</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> r8 = <span class="keyword">from</span> book <span class="keyword">in</span> books</span><br><span class="line">            <span class="keyword">join</span> type <span class="keyword">in</span> types <span class="keyword">on</span> book.TypeId <span class="keyword">equals</span> type.ID</span><br><span class="line">            <span class="keyword">where</span> type.Name == <span class="string">&quot;ç§‘å¹»ç±»&quot;</span></span><br><span class="line">            <span class="keyword">select</span> book;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">double</span> avg1 = r8.Average(book =&gt; book.Price);</span><br><span class="line">        <span class="built_in">double</span> avg2 = r8.Select(book =&gt; book.Price).Average();</span><br><span class="line">        <span class="built_in">double</span> avg3 =</span><br><span class="line">            (</span><br><span class="line">                <span class="keyword">from</span> book <span class="keyword">in</span> books</span><br><span class="line">                <span class="keyword">join</span> type <span class="keyword">in</span> types <span class="keyword">on</span> book.TypeId <span class="keyword">equals</span> type.ID</span><br><span class="line">                <span class="keyword">where</span> type.Name == <span class="string">&quot;ç§‘å¹»ç±»&quot;</span></span><br><span class="line">                <span class="keyword">select</span> book</span><br><span class="line">            )</span><br><span class="line">            .Average(book =&gt; book.Price);</span><br><span class="line">        <span class="built_in">double</span> avg4 = (</span><br><span class="line">            <span class="keyword">from</span> book <span class="keyword">in</span> books</span><br><span class="line">            <span class="keyword">join</span> type <span class="keyword">in</span> types <span class="keyword">on</span> book.TypeId <span class="keyword">equals</span> type.ID</span><br><span class="line">            <span class="keyword">where</span> type.Name == <span class="string">&quot;ç§‘å¹»ç±»&quot;</span></span><br><span class="line">            <span class="keyword">select</span> book.Price</span><br><span class="line">        ).Average();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> r9 =</span><br><span class="line">            <span class="keyword">from</span> x <span class="keyword">in</span> a1</span><br><span class="line">            <span class="keyword">let</span> y = x * x</span><br><span class="line">            <span class="keyword">where</span> y &gt; <span class="number">5</span></span><br><span class="line">            <span class="keyword">orderby</span> y</span><br><span class="line">            <span class="keyword">select</span> y;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> r10 =</span><br><span class="line">            <span class="keyword">from</span> book <span class="keyword">in</span> books</span><br><span class="line">            <span class="keyword">group</span> book <span class="keyword">by</span> book.TypeId;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> r11 = <span class="keyword">from</span> a <span class="keyword">in</span> books</span><br><span class="line">            <span class="keyword">join</span> b <span class="keyword">in</span> types <span class="keyword">on</span> a.TypeId <span class="keyword">equals</span> b.ID <span class="keyword">into</span> xxx <span class="comment">// into</span></span><br><span class="line">            <span class="keyword">from</span> c <span class="keyword">in</span> xxx</span><br><span class="line">            <span class="keyword">select</span> c;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">int</span> c1 = (<span class="keyword">from</span> x <span class="keyword">in</span> a1 <span class="keyword">where</span> x &gt; <span class="number">5</span> <span class="keyword">select</span> x).Take(<span class="number">3</span>).Count();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> e <span class="keyword">in</span> r10)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16-4-Linq-to-XML"><a href="#16-4-Linq-to-XML" class="headerlink" title="16.4. Linq to XML"></a>16.4. Linq to XML</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line"></span><br><span class="line">&lt;books&gt;</span><br><span class="line">  &lt;book&gt;</span><br><span class="line">    &lt;name&gt;jQuery&lt;/name&gt;</span><br><span class="line">    &lt;price&gt;<span class="number">23</span>&lt;/price&gt;</span><br><span class="line">  &lt;/book&gt;</span><br><span class="line">  &lt;book&gt;</span><br><span class="line">    &lt;name&gt;VueJS&lt;/name&gt;</span><br><span class="line">    &lt;price&gt;<span class="number">123.5</span>&lt;/price&gt;</span><br><span class="line">  &lt;/book&gt;</span><br><span class="line">  &lt;book&gt;</span><br><span class="line">    &lt;name&gt;CSharp&lt;/name&gt;</span><br><span class="line">    &lt;price&gt;<span class="number">26.5</span>&lt;/price&gt;</span><br><span class="line">  &lt;/book&gt;</span><br><span class="line">  &lt;book&gt;</span><br><span class="line">    &lt;name&gt;Java&lt;/name&gt;</span><br><span class="line">    &lt;price&gt;<span class="number">53.5</span>&lt;/price&gt;</span><br><span class="line">  &lt;/book&gt;</span><br><span class="line">&lt;/books&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> xml = XElement.Load(<span class="string">@&quot;e:\ccc.xml&quot;</span>);</span><br><span class="line">        <span class="built_in">string</span> price1 = ((XElement)((XElement) xml.LastNode).LastNode).Value;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> count1 = xml.Elements(<span class="string">&quot;book&quot;</span>).Count();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> r1 = xml.Elements(<span class="string">&quot;book&quot;</span>)</span><br><span class="line">            .OrderByDescending(GetBookPrice)</span><br><span class="line">            .Take(<span class="number">2</span>)</span><br><span class="line">            .Select(GetBookPrice)</span><br><span class="line">            .Average();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> r2 = xml.Elements(<span class="string">&quot;book&quot;</span>).Select(GetBookPrice);</span><br><span class="line">        <span class="keyword">var</span> r3 = r2.OrderByDescending(x =&gt; x).Take(<span class="number">2</span>).Average();</span><br><span class="line">        <span class="keyword">var</span> r4 = r2.Average();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Console.WriteLine(r3 - r4);</span></span><br><span class="line">        <span class="comment">//Console.WriteLine(r2.OrderByDescending(x =&gt; x).Take(2).Average() - r2.Average());</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Query Expression</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> r5 = <span class="keyword">from</span> book <span class="keyword">in</span> xml.Elements(<span class="string">&quot;book&quot;</span>)</span><br><span class="line">                 <span class="function"><span class="keyword">where</span> <span class="title">GetBookName</span>(<span class="params">book</span>) !</span>= <span class="string">&quot;jQuery&quot;</span></span><br><span class="line">                 <span class="function"><span class="keyword">orderby</span> <span class="title">GetBookPrice</span>(<span class="params">book</span>)</span></span><br><span class="line"><span class="function">                 <span class="title">select</span> (<span class="params">GetBookName(book</span>), <span class="title">GetBookPrice</span>(<span class="params">book</span>))</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> r6 = (<span class="keyword">from</span> book <span class="keyword">in</span> xml.Elements(<span class="string">&quot;book&quot;</span>)</span><br><span class="line">                  <span class="function"><span class="keyword">where</span> <span class="title">GetBookName</span>(<span class="params">book</span>) !</span>= <span class="string">&quot;jQuery&quot;</span></span><br><span class="line">                  <span class="function"><span class="keyword">orderby</span> <span class="title">GetBookPrice</span>(<span class="params">book</span>)</span></span><br><span class="line"><span class="function">                  <span class="keyword">select</span> <span class="title">GetBookPrice</span>(<span class="params">book</span>)).<span class="title">Average</span>()</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> r7 = <span class="keyword">from</span> book <span class="keyword">in</span> xml.Elements(<span class="string">&quot;book&quot;</span>) <span class="function"><span class="keyword">where</span> <span class="title">GetBookName</span>(<span class="params">book</span>) !</span>= <span class="string">&quot;jQuery&quot;</span> <span class="function"><span class="keyword">select</span> <span class="title">GetBookPrice</span>(<span class="params">book</span>)</span>;</span><br><span class="line">        <span class="keyword">var</span> r8 = r7.OrderByDescending(x =&gt; x).Take(<span class="number">2</span>).Average();</span><br><span class="line">        <span class="keyword">var</span> r9 = r7.Average();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> r <span class="keyword">in</span> r5)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(r);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> book <span class="keyword">in</span> XElement.Load(<span class="string">@&quot;e:\ccc.xml&quot;</span>).Elements(<span class="string">&quot;book&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(book.Elements(<span class="string">&quot;name&quot;</span>).First().Value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        (</span><br><span class="line">            <span class="keyword">from</span> book <span class="keyword">in</span> XElement.Load(<span class="string">@&quot;e:\ccc.xml&quot;</span>).Elements(<span class="string">&quot;book&quot;</span>)</span><br><span class="line">            <span class="keyword">let</span> name = GetBookName(book)</span><br><span class="line">            <span class="keyword">let</span> price = GetBookPrice(book)</span><br><span class="line">            <span class="keyword">where</span> price &gt; <span class="number">100</span> <span class="function"><span class="keyword">orderby</span> price</span></span><br><span class="line"><span class="function">            <span class="title">select</span> (<span class="params">name, price</span>)</span></span><br><span class="line"><span class="function">        ).<span class="title">ToList</span>().<span class="title">ForEach</span>(<span class="params">x =&gt; Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;x.name&#125;</span> çš„ä»·æ ¼ä¸º <span class="subst">&#123;x.price&#125;</span>&quot;</span></span>))</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">double</span> <span class="title">GetBookPrice</span>(<span class="params">XElement bookElement</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">double</span>.Parse(bookElement.Descendants(<span class="string">&quot;price&quot;</span>).First().Value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">string</span> <span class="title">GetBookName</span>(<span class="params">XElement bookElement</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> bookElement.Descendants(<span class="string">&quot;name&quot;</span>).First().Value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="17-æ³›å‹-Generic"><a href="#17-æ³›å‹-Generic" class="headerlink" title="17. æ³›å‹ (Generic)"></a>17. æ³›å‹ (Generic)</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> ps = <span class="keyword">new</span> MyStack();</span><br><span class="line">        ps.Push(<span class="keyword">new</span> Person());</span><br><span class="line">        ps.Push(<span class="number">2222</span>);</span><br><span class="line">        ps.Push(<span class="keyword">new</span> Person());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸ç®€æ´ï¼Œéœ€è¦æ‰‹åŠ¨è½¬å‹</span></span><br><span class="line">        <span class="comment">// ä¸å®‰å…¨</span></span><br><span class="line">        <span class="comment">// ä½æ•ˆç‡</span></span><br><span class="line"></span><br><span class="line">        Person p = (Person)ps.Pop();</span><br><span class="line">        Console.WriteLine(p);</span><br><span class="line">        ((Person)ps.Pop()).Say();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è‡ªç„¶è€Œç„¶çš„è§£å†³æ–¹æ¡ˆ: ä¸ºæ¯ç§ç±»å‹åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ Stack</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> ps2 = <span class="keyword">new</span> PersonStack();</span><br><span class="line">        ps2.Push(<span class="keyword">new</span> Person());</span><br><span class="line">        ps2.Push(<span class="keyword">new</span> Person());</span><br><span class="line"></span><br><span class="line">        Person p1= ps2.Pop();</span><br><span class="line">        p1.Say();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> ps3 = <span class="keyword">new</span> StudentStack();</span><br><span class="line">        ps3.Push(<span class="keyword">new</span> Student());</span><br><span class="line">        ps3.Push(<span class="keyword">new</span> Student());</span><br><span class="line"></span><br><span class="line">        Console.WriteLine(ps3.Pop());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸Šè¿°çš„æ–¹æ¡ˆå¯ä»¥è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œä½†å¸¦æ¥äº†æ–°çš„é—®é¢˜: æ¯æ¬¡é‡å¤å®šä¹‰è¿™äº›ç±»å‹å¾ˆéº»çƒ¦</span></span><br><span class="line">        <span class="comment">// é‚£èƒ½ä¸èƒ½é€šè¿‡æŸç§æ–¹æ³•ï¼Œè‡ªåŠ¨ç”Ÿæˆè¿™äº›ç±»å‹å‘¢</span></span><br><span class="line">        <span class="comment">// CSharp ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯: æ³›å‹</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> ps4 = <span class="keyword">new</span> MyStack&lt;Person&gt;();</span><br><span class="line">        <span class="keyword">var</span> ps5 = <span class="keyword">new</span> MyStack&lt;Student&gt;();</span><br><span class="line">        MyStack&lt;<span class="built_in">int</span>&gt; ps6 = <span class="keyword">new</span> MyStack&lt;<span class="built_in">int</span>&gt;();</span><br><span class="line">        <span class="keyword">var</span> ps7 = <span class="keyword">new</span> MyStack&lt;<span class="built_in">double</span>&gt;();</span><br><span class="line">        <span class="keyword">var</span> ps9 = <span class="keyword">new</span> MyStack&lt;FileInfo&gt;();</span><br><span class="line">        <span class="keyword">var</span> ps8 = <span class="keyword">new</span> MyStack&lt;Stack&gt;();</span><br><span class="line">        <span class="keyword">var</span> ps0 = <span class="keyword">new</span> MyStack&lt;<span class="built_in">bool</span>&gt;();</span><br><span class="line"></span><br><span class="line">        ps4.Push(<span class="keyword">new</span> Person());</span><br><span class="line">        ps4.Push(<span class="keyword">new</span> Person());</span><br><span class="line">        Person p9 = ps4.Pop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Say</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Student</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">MyStack</span>&lt;<span class="title">X</span>&gt; <span class="comment">// æ¨¡æ¿</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> stackTop = <span class="number">0</span>; <span class="comment">// æ ˆé¡¶</span></span><br><span class="line">    <span class="keyword">private</span> X[] _items = <span class="keyword">new</span> X[<span class="number">200</span>];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Push</span>(<span class="params">X w</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        _items[stackTop] = w;</span><br><span class="line">        stackTop = stackTop + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> X <span class="title">Pop</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        stackTop = stackTop - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> _items[stackTop];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> X <span class="title">Peek</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> _items[stackTop - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Count</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> =&gt; stackTop;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Clear</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        stackTop = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">PersonStack</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> stackTop = <span class="number">0</span>; <span class="comment">// æ ˆé¡¶</span></span><br><span class="line">    <span class="keyword">private</span> Person[] _items = <span class="keyword">new</span> Person[<span class="number">200</span>];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Push</span>(<span class="params">Person w</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        _items[stackTop] = w;</span><br><span class="line">        stackTop = stackTop + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">Pop</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        stackTop = stackTop - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> _items[stackTop];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">Peek</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> _items[stackTop - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Count</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> =&gt; stackTop;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Clear</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        stackTop = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">StudentStack</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> stackTop = <span class="number">0</span>; <span class="comment">// æ ˆé¡¶</span></span><br><span class="line">    <span class="keyword">private</span> Student[] _items = <span class="keyword">new</span> Student[<span class="number">200</span>];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Push</span>(<span class="params">Student w</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        _items[stackTop] = w;</span><br><span class="line">        stackTop = stackTop + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">Pop</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        stackTop = stackTop - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> _items[stackTop];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">Peek</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> _items[stackTop - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Count</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> =&gt; stackTop;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Clear</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        stackTop = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="17-1-æ–¹æ³•æ³›å‹"><a href="#17-1-æ–¹æ³•æ³›å‹" class="headerlink" title="17.1. æ–¹æ³•æ³›å‹"></a>17.1. æ–¹æ³•æ³›å‹</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Count</span>&lt;<span class="title">TSource</span>&gt;(<span class="params"><span class="keyword">this</span> IEnumerable&lt;TSource&gt; source</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="18-äº‹ä»¶-Event"><a href="#18-äº‹ä»¶-Event" class="headerlink" title="18. äº‹ä»¶ (Event)"></a>18. äº‹ä»¶ (Event)</h2><ul>
<li>ä¸æ˜¯ç°åœ¨å‘ç”Ÿçš„äº‹ï¼Œè€Œæ˜¯æœªæ¥å‘ç”Ÿçš„</li>
<li>æ»¡è¶³æŸä¸ªæ¡ä»¶ä¹‹åï¼Œæ‰ä¼šå‘ç”Ÿçš„</li>
<li>æ»¡è¶³ä¸€å®šæ¡ä»¶æ—¶ï¼Œè¦æ‰§è¡Œçš„ä»£ç é€»è¾‘</li>
<li>æ¯”å¦‚ï¼Œä½ ä»¬è¦æ¯•ä¸šï¼Œä½ ä»¬è¦åšäº›ä»€ä¹ˆ</li>
<li>æ¯”å¦‚ï¼Œå¦‚æœå‘ç”Ÿç«ç¾ï¼Œä½ è¦åšäº›ä»€ä¹ˆ</li>
<li>æ¯”å¦‚ï¼Œåœ¨é¡µé¢ä¸Šï¼Œç”¨æˆ·åšäº†æŸäº›åŠ¨ä½œï¼Œä¼šå¯¼è‡´æ‰§è¡Œä»€ä¹ˆé€»è¾‘</li>
<li>è¿™ç§è¢«åŠ¨å¼è¢«æ‰§è¡Œçš„é€»è¾‘ï¼Œç§°ä½œäº‹ä»¶</li>
</ul>
<p>æ¯ä¸ªåŒå­¦æ¯•ä¸šçš„æ—¶å€™ï¼Œéƒ½æœ‰è‡ªå·±çš„è®¡åˆ’ã€‚è¿™å°±æ˜¯ [æ¯•ä¸šäº‹ä»¶]:</p>
<ul>
<li>è¾¾æˆçš„æ¡ä»¶æ˜¯ï¼Œæ¯•ä¸šçš„æ—¥æœŸåˆ°äº†</li>
<li>æ¡ä»¶è¾¾æˆåï¼Œæ¯ä¸ªåŒå­¦æœ‰ä¸åŒçš„è®¡åˆ’</li>
</ul>
<h3 id="18-1-å¦‚æœä½¿ç”¨ä¸€èˆ¬çš„å†™æ³•"><a href="#18-1-å¦‚æœä½¿ç”¨ä¸€èˆ¬çš„å†™æ³•" class="headerlink" title="18.1. å¦‚æœä½¿ç”¨ä¸€èˆ¬çš„å†™æ³•"></a>18.1. å¦‚æœä½¿ç”¨ä¸€èˆ¬çš„å†™æ³•</h3><p>æ¯ä¸ªåŒå­¦ï¼Œéœ€è¦ä¸åœåˆ¤æ–­ï¼Œæ¯•ä¸šçš„æ—¶é—´æœ‰æ²¡æœ‰è¾¾æˆã€‚å¦‚æœè¾¾æˆäº†ï¼Œå°±åšæŸä»¶äº‹ã€‚åå¤åˆ¤æ–­ã€‚</p>
<p>è‡ªå·±åˆ¤æ–­ï¼Œè‡ªå·±è§¦å‘:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A åŒå­¦</span></span><br><span class="line"><span class="keyword">var</span> t1 = <span class="keyword">new</span> Thread(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (DateTime.Now.Second % <span class="number">10</span> == <span class="number">5</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;ç»§æ‰¿å®¶äº§&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Thread.Sleep(<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// B åŒå­¦</span></span><br><span class="line"><span class="keyword">var</span> t2 = <span class="keyword">new</span> Thread(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (DateTime.Now.Second % <span class="number">10</span> == <span class="number">5</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;å›å®¶å•ƒè€&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Thread.Sleep(<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Cã€Dã€E... åŒå­¦éƒ½æ˜¯ç›¸ä¼¼çš„é€»è¾‘</span></span><br><span class="line"></span><br><span class="line">t1.Start();</span><br><span class="line">t2.Start();</span><br><span class="line"></span><br><span class="line">t1.Join();</span><br><span class="line">t2.Join();</span><br></pre></td></tr></table></figure>

<h3 id="18-2-ä¸Šè¿°çš„å†™æ³•è™½ç„¶æ²¡æœ‰é”™è¯¯ï¼Œä½†æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜"><a href="#18-2-ä¸Šè¿°çš„å†™æ³•è™½ç„¶æ²¡æœ‰é”™è¯¯ï¼Œä½†æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜" class="headerlink" title="18.2. ä¸Šè¿°çš„å†™æ³•è™½ç„¶æ²¡æœ‰é”™è¯¯ï¼Œä½†æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜"></a>18.2. ä¸Šè¿°çš„å†™æ³•è™½ç„¶æ²¡æœ‰é”™è¯¯ï¼Œä½†æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜</h3><ul>
<li>é€»è¾‘é‡å¤ä¸¥é‡ï¼Œå†—ä½™å¾ˆå¤§</li>
<li>ä¸åœåˆ¤æ–­æ¡ä»¶æ˜¯å¦è¾¾æˆçš„ä»£ç è¿‡äºç¹çï¼Œæ¯ä¸ªåŒå­¦è‡ªå·±ç»´æŠ¤è¿™æ®µä»£ç ï¼Œæœ‰äº›ä¸åˆç†</li>
</ul>
<p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ 1) å°†é‡å¤çš„ä»£ç å‰¥ç¦»å‡ºæ¥ 2) æ¡ä»¶çš„åˆ¤æ–­åªéœ€è¦äº¤ä»˜ä¸€ä¸ªä¸“é—¨çš„äººå¤„ç†å°±å¯ä»¥äº†</p>
<p>ä¸“äººåˆ¤æ–­ï¼Œé›†ä¸­é€»è¾‘:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t1 = <span class="keyword">new</span> Thread(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (DateTime.Now.Second % <span class="number">10</span> == <span class="number">5</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;å›å®¶ç»§æ‰¿å®¶äº§&quot;</span>); <span class="comment">// A</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;æ¬ç –&quot;</span>);        <span class="comment">// B</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;åˆ›ä¸š&quot;</span>);        <span class="comment">// C</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;å›å®¶å•ƒè€&quot;</span>);    <span class="comment">// D</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;ç»“å©š&quot;</span>);        <span class="comment">// E...</span></span><br><span class="line">        &#125;</span><br><span class="line">        Thread.Sleep(<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">t1.Start();</span><br><span class="line">t1.Join();</span><br></pre></td></tr></table></figure>

<h3 id="18-3-ä¸Šè¿°ä»£ç è™½ç„¶ç®€æ´äº†ï¼Œä½†æ˜¯æ¡ä»¶å’Œæœ€åè¦æ‰§è¡Œçš„é€»è¾‘å†™åœ¨ä¸€èµ·ï¼Œè€¦åˆåº¦å¤ªå¤§"><a href="#18-3-ä¸Šè¿°ä»£ç è™½ç„¶ç®€æ´äº†ï¼Œä½†æ˜¯æ¡ä»¶å’Œæœ€åè¦æ‰§è¡Œçš„é€»è¾‘å†™åœ¨ä¸€èµ·ï¼Œè€¦åˆåº¦å¤ªå¤§" class="headerlink" title="18.3. ä¸Šè¿°ä»£ç è™½ç„¶ç®€æ´äº†ï¼Œä½†æ˜¯æ¡ä»¶å’Œæœ€åè¦æ‰§è¡Œçš„é€»è¾‘å†™åœ¨ä¸€èµ·ï¼Œè€¦åˆåº¦å¤ªå¤§"></a>18.3. ä¸Šè¿°ä»£ç è™½ç„¶ç®€æ´äº†ï¼Œä½†æ˜¯æ¡ä»¶å’Œæœ€åè¦æ‰§è¡Œçš„é€»è¾‘å†™åœ¨ä¸€èµ·ï¼Œè€¦åˆåº¦å¤ªå¤§</h3><p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹å¼ï¼Œå°†å®ƒä»¬åˆ†å¼€ã€‚è¿™æ—¶å€™æˆ‘ä»¬æƒ³åˆ°ï¼Œå§”æ‰˜æ˜¯å®ç°é€»è¾‘åˆ†ç¦»æœ€ä½³çš„å·¥å…·ã€‚</p>
<p>ä¸“äººåˆ¤æ–­ï¼Œåˆ†ç¦»ç›®æ ‡:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> BiYe = <span class="keyword">new</span> Action(() =&gt; &#123; &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸“é—¨è´Ÿè´£åˆ¤æ–­æ¡ä»¶æ˜¯å¦è¾¾æˆ (å‘å¸ƒäº‹ä»¶çš„ Publisher)</span></span><br><span class="line"><span class="keyword">var</span> t1 = <span class="keyword">new</span> Thread(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (DateTime.Now.Second % <span class="number">10</span> == <span class="number">5</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            BiYe();</span><br><span class="line">        &#125;</span><br><span class="line">        Thread.Sleep(<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åªéœ€è¦å‘ç›¸åº”å§”æ‰˜å†…æ·»åŠ è‡ªå·±çš„è®¡åˆ’è¾‘ (è®¢é˜…ä¸Šè¿°äº‹ä»¶ Subcriber)</span></span><br><span class="line">BiYe += () =&gt; Console.WriteLine(<span class="string">&quot;æ¬ç –&quot;</span>);</span><br><span class="line">BiYe += () =&gt; Console.WriteLine(<span class="string">&quot;ç»“å©š&quot;</span>);</span><br><span class="line">BiYe += () =&gt; Console.WriteLine(<span class="string">&quot;å•ƒè€&quot;</span>);</span><br><span class="line"></span><br><span class="line">t1.Start();</span><br><span class="line">t1.Join();</span><br></pre></td></tr></table></figure>

<h3 id="18-4-æ¥ä¸‹æ¥ï¼Œå¯ä»¥å°†ç¬¬ä¸€æ®µä»£ç å•ç‹¬æŠ½å‡ºæ¥ï¼Œä½œä¸ºå•ç‹¬çš„-Publisherï¼Œä»è€Œå®ç°æ›´å¥½çš„åˆ†ç¦»"><a href="#18-4-æ¥ä¸‹æ¥ï¼Œå¯ä»¥å°†ç¬¬ä¸€æ®µä»£ç å•ç‹¬æŠ½å‡ºæ¥ï¼Œä½œä¸ºå•ç‹¬çš„-Publisherï¼Œä»è€Œå®ç°æ›´å¥½çš„åˆ†ç¦»" class="headerlink" title="18.4. æ¥ä¸‹æ¥ï¼Œå¯ä»¥å°†ç¬¬ä¸€æ®µä»£ç å•ç‹¬æŠ½å‡ºæ¥ï¼Œä½œä¸ºå•ç‹¬çš„ Publisherï¼Œä»è€Œå®ç°æ›´å¥½çš„åˆ†ç¦»"></a>18.4. æ¥ä¸‹æ¥ï¼Œå¯ä»¥å°†ç¬¬ä¸€æ®µä»£ç å•ç‹¬æŠ½å‡ºæ¥ï¼Œä½œä¸ºå•ç‹¬çš„ Publisherï¼Œä»è€Œå®ç°æ›´å¥½çš„åˆ†ç¦»</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äº‹ä»¶çš„å‘å¸ƒè€…ï¼Œæš´éœ²äº†ä¸€ä¸ªå« BiYe çš„äº‹ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Teacher</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Action BiYe;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> t1 = <span class="keyword">new</span> Thread(() =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (DateTime.Now.Second % <span class="number">10</span> == <span class="number">5</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    BiYe();</span><br><span class="line">                &#125;</span><br><span class="line">                Thread.Sleep(<span class="number">100</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t1.Start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨è€…ï¼Œåªéœ€è¦è®¢é˜…ï¼Œå®Œå…¨ä¸éœ€è¦å…³å¿ƒå‘å¸ƒè€…æ˜¯æ€ä¹ˆå®ç°çš„å†…åœ¨é€»è¾‘</span></span><br><span class="line"><span class="comment">// å®Œç¾çš„è§£è€¦åˆ (åˆ†ç¦»)</span></span><br><span class="line"><span class="keyword">var</span> t = <span class="keyword">new</span> Teacher();</span><br><span class="line">t.BiYe += (s, e) =&gt; Console.WriteLine(<span class="string">&quot;å›å®¶åƒé¥­&quot;</span>);</span><br><span class="line">t.BiYe += (s, e) =&gt; Console.WriteLine(<span class="string">&quot;å›å®¶æŠ±å¨ƒ&quot;</span>);</span><br><span class="line">t.Start();</span><br></pre></td></tr></table></figure>

<h3 id="18-5-é€šè¿‡ä¸Šè¿°å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°äº‹ä»¶æ˜¯é€šè¿‡å§”æ‰˜å®ç°çš„ï¼Œä½†è¿˜æ˜¯æœ‰äº›ç¼ºç‚¹"><a href="#18-5-é€šè¿‡ä¸Šè¿°å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°äº‹ä»¶æ˜¯é€šè¿‡å§”æ‰˜å®ç°çš„ï¼Œä½†è¿˜æ˜¯æœ‰äº›ç¼ºç‚¹" class="headerlink" title="18.5. é€šè¿‡ä¸Šè¿°å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°äº‹ä»¶æ˜¯é€šè¿‡å§”æ‰˜å®ç°çš„ï¼Œä½†è¿˜æ˜¯æœ‰äº›ç¼ºç‚¹"></a>18.5. é€šè¿‡ä¸Šè¿°å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°äº‹ä»¶æ˜¯é€šè¿‡å§”æ‰˜å®ç°çš„ï¼Œä½†è¿˜æ˜¯æœ‰äº›ç¼ºç‚¹</h3><ul>
<li>Action ç­‰åå­—ä¸å¤Ÿç›´è§‚ï¼Œæ²¡æ³•åšåˆ°æœ›æ–‡ç”Ÿä¹‰</li>
<li>æŒ‰é“ç†ï¼Œè®¢é˜…è€…æ²¡æœ‰æƒåŠ›åœ¨å¤–éƒ¨å»æ“ä½œ BiYe çš„æ‰§è¡Œã€‚ä½†ç°åœ¨çš„æƒé™æ§åˆ¶å®Œå…¨åšä¸åˆ°è¿™æ ·çš„é™åˆ¶</li>
</ul>
<p>å› æ­¤ï¼ŒC# æä¾›äº†æ ‡å‡†çš„ event å…³é”®è¯å’Œ EventHandler å§”æ‰˜ï¼Œè§£å†³ä¸Šè¿°ç—›ç‚¹:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Teacher</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">event</span> EventHandler BiYe;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> t1 = <span class="keyword">new</span> Thread(() =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (DateTime.Now.Second % <span class="number">10</span> == <span class="number">5</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    BiYe.Invoke(<span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                Thread.Sleep(<span class="number">100</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t1.Start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°çš„äº‹ä»¶å£°æ˜ï¼Œå¯ä»¥æ‰©å±•ä¸ºå±æ€§:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> EventHandler _biye;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">event</span> EventHandler BiYe;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">add</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;å¯ä»¥æ·»åŠ æ›´å¤šè‡ªå·±çš„é€»è¾‘&quot;</span>);</span><br><span class="line">        _biye += <span class="keyword">value</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">remove</span></span><br><span class="line">    &#123;</span><br><span class="line">        _biye -= <span class="keyword">value</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="18-6-æ¥ä¸‹æ¥ï¼Œè¦è€ƒè™‘çš„æ˜¯ï¼Œèƒ½ä¸èƒ½åœ¨äº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼Œä¼ é€’ä¸€äº›å‚æ•°"><a href="#18-6-æ¥ä¸‹æ¥ï¼Œè¦è€ƒè™‘çš„æ˜¯ï¼Œèƒ½ä¸èƒ½åœ¨äº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼Œä¼ é€’ä¸€äº›å‚æ•°" class="headerlink" title="18.6. æ¥ä¸‹æ¥ï¼Œè¦è€ƒè™‘çš„æ˜¯ï¼Œèƒ½ä¸èƒ½åœ¨äº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼Œä¼ é€’ä¸€äº›å‚æ•°"></a>18.6. æ¥ä¸‹æ¥ï¼Œè¦è€ƒè™‘çš„æ˜¯ï¼Œèƒ½ä¸èƒ½åœ¨äº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼Œä¼ é€’ä¸€äº›å‚æ•°</h3><p>EventHandler ä¸¤ä¸ªå‚æ•°:</p>
<ul>
<li>object senderï¼Œç”¨æ¥è¡¨ç¤ºè°æ˜¯è®¢é˜…è€…</li>
<li>EventArgs argsï¼Œç”¨æ¥ä¼ é€’ä¸€äº›å‚æ•°</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">public class Teacher</span><br><span class="line">&#123;</span><br><span class="line">    public event EventHandler BiYe;</span><br><span class="line"></span><br><span class="line">    public void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        var t1 = new Thread(() =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            while (true)</span><br><span class="line">            &#123;</span><br><span class="line">                if (DateTime.Now.Second % 10 == 5)</span><br><span class="line">                &#123;</span><br><span class="line">                    // BiYe(this, new MyEventArgs(5));</span><br><span class="line">                    BiYe.Invoke(this, new MyEventArgs(5));</span><br><span class="line">                &#125;</span><br><span class="line">                Thread.Sleep(100);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t1.Start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class MyEventArgs : EventArgs</span><br><span class="line">&#123;</span><br><span class="line">    public MyEventArgs(int canshu)</span><br><span class="line">    &#123;</span><br><span class="line">        Canshu = canshu;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int Canshu &#123; get; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="19-å¼‚å¸¸-Exception"><a href="#19-å¼‚å¸¸-Exception" class="headerlink" title="19. å¼‚å¸¸ (Exception)"></a>19. å¼‚å¸¸ (Exception)</h2><h3 id="19-1-ä¼ ç»Ÿæ–¹å¼"><a href="#19-1-ä¼ ç»Ÿæ–¹å¼" class="headerlink" title="19.1. ä¼ ç»Ÿæ–¹å¼"></a>19.1. ä¼ ç»Ÿæ–¹å¼</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸å¤Ÿç›´è§‚ï¼Œå•¥æ˜¯ intï¼Œåˆ†åˆ«æœ‰å•¥å«ä¹‰</span></span><br><span class="line"><span class="comment">// ä»£ç å˜å•°å—¦äº†ï¼Œä¸ç®€æ´äº†</span></span><br><span class="line"><span class="comment">// ç¼–ç éš¾åº¦å˜å¤§äº†ï¼Œé”™è¯¯çš„å¤„ç†ï¼Œå¹²æ‰°ä¸»å¹²é€»è¾‘</span></span><br><span class="line"><span class="comment">// è°ƒç”¨è¿™éœ€è¦çŸ¥é“å®šä¹‰è€…ï¼Œæ¯ä¸ªé”™è¯¯é€»è¾‘çš„å«ä¹‰</span></span><br><span class="line"><span class="comment">// é”™è¯¯çš„å¤„ç†ï¼Œä¸æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œæ‰€ä»¥å®¹æ˜“éšè— BUGï¼Œå¾ˆéš¾æ’æŸ¥</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Kuaijiang</span> (<span class="params"><span class="built_in">string</span> gender</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (gender == <span class="string">&quot;ç”·&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;ä½ çœŸå¸…!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (gender == <span class="string">&quot;å¥³&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;èƒ½åŠ ä½ å¾®ä¿¡å—?&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">111</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="19-2-é€šè¿‡-Exception-æä¾›-è§£è€¦åˆ-çš„å¤„ç†æ–¹å¼"><a href="#19-2-é€šè¿‡-Exception-æä¾›-è§£è€¦åˆ-çš„å¤„ç†æ–¹å¼" class="headerlink" title="19.2. é€šè¿‡ Exception æä¾› è§£è€¦åˆ çš„å¤„ç†æ–¹å¼"></a>19.2. é€šè¿‡ Exception æä¾› <strong>è§£è€¦åˆ</strong> çš„å¤„ç†æ–¹å¼</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            Kuaijiang(<span class="string">&quot;å¥³å­©å„¿&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(GenderTooLongException ex)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;æ€ä¹ˆæçš„ï¼Œè¿™éƒ½èƒ½é”™ï¼Ÿ&quot;</span> + ex.Message);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;è°ƒç”¨å¤±è´¥: &quot;</span> + ex.Message);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Console.WriteLine(<span class="string">&quot;åšå…¶ä»–äº‹æƒ…&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Kuaijiang</span> (<span class="params"><span class="built_in">string</span> gender</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (gender.Length &gt; <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GenderTooLongException(<span class="string">&quot;æ€§åˆ«æ€ä¹ˆå¯èƒ½å¤§çº¦2?&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (gender != <span class="string">&quot;ç”·&quot;</span> &amp;&amp; gender != <span class="string">&quot;å¥³&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Exception ex = <span class="keyword">new</span> Exception(<span class="string">&quot;æ€§åˆ«é”™è¯¯&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> ex;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (gender == <span class="string">&quot;ç”·&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;ä½ çœŸå¸…!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (gender == <span class="string">&quot;å¥³&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;èƒ½åŠ ä½ å¾®ä¿¡å—?&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">GenderTooLongException</span> : <span class="title">Exception</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GenderTooLongException</span>(<span class="params"><span class="built_in">string</span> message</span>) : <span class="title">base</span>(<span class="params">message</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="19-3-å¼‚å¸¸çš„åµŒå¥—ï¼Œä»¥åŠ-finally"><a href="#19-3-å¼‚å¸¸çš„åµŒå¥—ï¼Œä»¥åŠ-finally" class="headerlink" title="19.3. å¼‚å¸¸çš„åµŒå¥—ï¼Œä»¥åŠ finally"></a>19.3. å¼‚å¸¸çš„åµŒå¥—ï¼Œä»¥åŠ finally</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">SampleOfException1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">static</span> List&lt;<span class="built_in">string</span>&gt; validGenders = <span class="keyword">new</span>() &#123; <span class="string">&quot;ç”·&quot;</span>, <span class="string">&quot;å¥³&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                å¤¸å¥–(<span class="string">&quot;å¥³å­©å„¿&quot;</span>);</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;1111&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span>(GenderTooLongException ex)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;æ€ä¹ˆæçš„ï¼Œè¿™éƒ½èƒ½é”™ï¼Ÿ&quot;</span> + ex.Message);</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;22222&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span></span><br><span class="line">                &#123;</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;4444&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">finally</span></span><br><span class="line">                &#123;</span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;666&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;è°ƒç”¨å¤±è´¥: &quot;</span> + ex.Message);</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;555&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">finally</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;3333&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//try</span></span><br><span class="line">            <span class="comment">//&#123;</span></span><br><span class="line">            <span class="comment">//    Kuaijiang(&quot;å¥³2&quot;);</span></span><br><span class="line">            <span class="comment">//&#125;</span></span><br><span class="line">            <span class="comment">//catch</span></span><br><span class="line">            <span class="comment">//&#123;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//&#125;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">void</span> å¤¸å¥– (<span class="built_in">string</span>  gender)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                Kuaijiang(gender);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;[çˆ¸çˆ¸] å“ˆå“ˆï¼Œå‡ºé”™äº†å§&quot;</span>);</span><br><span class="line">                <span class="keyword">throw</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">finally</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;[çˆ¸çˆ¸] æˆ‘å¤„ç†å®Œäº†!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Kuaijiang</span> (<span class="params"><span class="built_in">string</span> gender</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (gender.Length &gt; <span class="number">2</span>)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> GenderTooLongException(<span class="string">&quot;æ€§åˆ«æ€ä¹ˆå¯èƒ½å¤§çº¦2?&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!validGenders.Contains(gender))</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;æ€§åˆ«é”™è¯¯&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (gender == <span class="string">&quot;ç”·&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;ä½ çœŸå¸…!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (gender == <span class="string">&quot;å¥³&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;èƒ½åŠ ä½ å¾®ä¿¡å—?&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">GenderTooLongException</span> : <span class="title">Exception</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">GenderTooLongException</span>(<span class="params"><span class="built_in">string</span> message</span>) : <span class="title">base</span>(<span class="params">message</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="20-åå°„å’Œç‰¹æ€§-Reflection-x2F-Attribute"><a href="#20-åå°„å’Œç‰¹æ€§-Reflection-x2F-Attribute" class="headerlink" title="20. åå°„å’Œç‰¹æ€§ (Reflection&#x2F;Attribute)"></a>20. åå°„å’Œç‰¹æ€§ (Reflection&#x2F;Attribute)</h2><h3 id="20-1-åå°„-Reflection"><a href="#20-1-åå°„-Reflection" class="headerlink" title="20.1. åå°„ (Reflection)"></a>20.1. åå°„ (Reflection)</h3><ul>
<li><p>åå°„å°±æ˜¯è¿è¡Œæ—¶æŸ¥çœ‹ç¨‹åºé›† (Assembly) å…ƒæ•°æ® (metadata) çš„è¡Œä¸º</p>
</li>
<li><p>å…ƒæ•°æ®ï¼Œå°±æ˜¯ç¨‹åºé›†æ‰€åŒ…å«çš„æ‰€æœ‰çš„ç±»å‹ã€å±æ€§ã€å‚æ•°ç­‰æ•°æ®</p>
</li>
<li><p>C# é€šè¿‡ <code>System.Reflection</code> è¿™ä¸ªå‘½åç©ºé—´ä¸‹çš„ç±»ï¼Œç»™å‡ºäº†åå°„çš„å®ç°</p>
</li>
<li><p>ä¸ºäº†èƒ½å¤Ÿå®ç°åå°„ï¼Œè¿è¡Œæ—¶åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œä¼šä¸ºæ¯ä¸€ä¸ª Class åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Type</span><br></pre></td></tr></table></figure>

<p>ç±»å‹çš„å¯¹è±¡</p>
<ul>
<li>typeof</li>
<li>GetType</li>
<li>assembly.GetTypes()</li>
</ul>
</li>
<li><p>ç±» <code>Assembly</code> ä¸­æä¾›äº†åŠ è½½ç¨‹åºé›†å’Œæ“ä½œå…ƒæ•°æ®çš„ç›¸å…³æ–¹æ³•</p>
</li>
<li><p>å¯ä»¥é€šè¿‡è¾…åŠ©ç±» <code>Activator</code> å¿«é€Ÿåˆ›å»ºä¸€ä¸ªå®ä¾‹</p>
</li>
</ul>
<p>æ­£å¤§å…‰æ˜çš„ç±»å‹ä½¿ç”¨æ–¹å¼:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Student</span> &#123;&#125;</span><br><span class="line"><span class="comment">// var typeofStudent = new Type(Student);</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> Student();</span><br><span class="line"><span class="keyword">var</span> s2 = <span class="keyword">new</span> Student();</span><br><span class="line"><span class="keyword">var</span> s3 = <span class="keyword">new</span> Student();</span><br><span class="line"><span class="keyword">var</span> s4 = <span class="keyword">new</span> Student();</span><br><span class="line"></span><br><span class="line">s1.SayHello();</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º Assembly çš„è‹¥å¹²æ–¹æ³•:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ass1 = Assembly.Load(<span class="string">&quot;DAL&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> ass2 = Assembly.LoadFile(<span class="string">@&quot;e:\Model.dll&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> ass3 = Assembly.LoadFrom(<span class="string">&quot;DAL&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> ass4 = Assembly.LoadFrom(<span class="string">@&quot;e:\Model.dll&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> ass5 = Assembly.GetExecutingAssembly();</span><br><span class="line"></span><br><span class="line">Type[] types = ass1.GetTypes();</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> type <span class="keyword">in</span> types)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;Class: <span class="subst">&#123;type&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">    MethodInfo[] methods = type.GetMethods();</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> m <span class="keyword">in</span> methods)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(m);</span><br><span class="line">    &#125;</span><br><span class="line">    Console.WriteLine();</span><br><span class="line">    Console.WriteLine();</span><br><span class="line">    Console.WriteLine();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è·å– Type çš„è‹¥å¹²æ–¹æ³•:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> i = <span class="number">0</span>;</span><br><span class="line">Type type1 = i.GetType();</span><br><span class="line"></span><br><span class="line">Student s = <span class="keyword">new</span> Student();</span><br><span class="line">Type type2 = s.GetType();</span><br><span class="line"></span><br><span class="line">Type type3 = <span class="keyword">typeof</span>(Student);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ass = Assembly.GetExecutingAssembly();</span><br><span class="line">Type type4 = ass.GetTypes()[<span class="number">0</span>];</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡åå°„çš„æ–¹å¼ï¼ŒåŠ¨æ€è°ƒç”¨æ–¹æ³•çš„è¿‡ç¨‹:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ass = Assembly.GetExecutingAssembly();</span><br><span class="line"><span class="built_in">object</span> o = ass.CreateInstance(<span class="string">&quot;SampleOfReflection.X&quot;</span>);</span><br><span class="line">MethodInfo m = o.GetType().GetMethod(<span class="string">&quot;SayHello&quot;</span>);</span><br><span class="line">m.Invoke(o, <span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<h3 id="20-2-ä¾‹å­-ToModelList"><a href="#20-2-ä¾‹å­-ToModelList" class="headerlink" title="20.2. [ä¾‹å­] ToModelList"></a>20.2. [ä¾‹å­] ToModelList</h3><p>ç‰ˆæœ¬ 1:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="title">List</span>&lt;<span class="title">T</span>&gt; <span class="title">ToModelList</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="keyword">this</span> DataTable dt</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">        dt.Rows.Cast&lt;DataRow&gt;()</span><br><span class="line">        .Select(r =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            T t = (T) Activator.CreateInstance(<span class="keyword">typeof</span>(T));</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="function">PropertyInfo p <span class="keyword">in</span> <span class="title">typeof</span>(<span class="params">T</span>).<span class="title">GetProperties</span>())</span></span><br><span class="line">            &#123;</span><br><span class="line">                p.SetValue(t, r[p.Name.ToLower()]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        &#125;)</span><br><span class="line">        .ToList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç‰ˆæœ¬ 2:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="title">List</span>&lt;<span class="title">T</span>&gt; <span class="title">ToModelList2</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="keyword">this</span> DataTable dt</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    List&lt;T&gt; lst = (List&lt;T&gt;)Activator</span><br><span class="line">        .CreateInstance(<span class="keyword">typeof</span>(List&lt;&gt;).MakeGenericType(<span class="keyword">typeof</span>(T)));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (DataRow r <span class="keyword">in</span> dt.Rows)</span><br><span class="line">    &#123;</span><br><span class="line">        T t = (T)Activator.CreateInstance(<span class="keyword">typeof</span>(T));</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="function">PropertyInfo p <span class="keyword">in</span> <span class="title">typeof</span>(<span class="params">T</span>).<span class="title">GetProperties</span>())</span></span><br><span class="line">        &#123;</span><br><span class="line">            p.SetValue(t, r[p.Name.ToLower()]);</span><br><span class="line">        &#125;</span><br><span class="line">        lst.GetType().GetMethod(<span class="string">&quot;Add&quot;</span>).Invoke(lst, <span class="keyword">new</span> <span class="built_in">object</span>[] &#123; t &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> lst;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¯”è¾ƒåŸç‰ˆ:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Group&gt; <span class="title">ToModelList</span>(<span class="params">DataTable dt</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> list = <span class="keyword">new</span> List&lt;Group&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (DataRow r <span class="keyword">in</span> dt.Rows)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> g = <span class="keyword">new</span> Group</span><br><span class="line">        &#123;</span><br><span class="line">            Gno = (<span class="built_in">int</span>)r[<span class="string">&quot;gno&quot;</span>],</span><br><span class="line">            Name = (<span class="built_in">string</span>)r[<span class="string">&quot;name&quot;</span>],</span><br><span class="line">            Cs = (<span class="built_in">int</span>)r[<span class="string">&quot;cs&quot;</span>],</span><br><span class="line">            Fs = (<span class="built_in">int</span>)r[<span class="string">&quot;fs&quot;</span>]</span><br><span class="line">        &#125;;</span><br><span class="line">        list.Add(g);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="20-3-ç‰¹æ€§-Attribute"><a href="#20-3-ç‰¹æ€§-Attribute" class="headerlink" title="20.3. ç‰¹æ€§ (Attribute)"></a>20.3. ç‰¹æ€§ (Attribute)</h3><ul>
<li>ç‰¹æ€§æ˜¯å‘ç¨‹åºé›†æ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰å…ƒæ•°æ®çš„æ–¹å¼</li>
<li>åŸºæœ¬ä½¿ç”¨è¿‡ç¨‹: [å®šä¹‰] â€“ æ·»åŠ åˆ° [ç›®æ ‡ (target)] â€“ [æ¶ˆè´¹ (consumer)]</li>
<li>å®šä¹‰ç‰¹æ€§ï¼Œåªéœ€è¦ç»§æ‰¿ Attribute å³å¯ã€‚ç±»çš„å‘½åä»¥ Attribute ç»“å°¾ï¼Œå¦‚ MyIgnoreAttribute</li>
<li>ç‰¹æ€§çš„æ¶ˆè´¹ï¼Œéœ€è¦ä½¿ç”¨åå°„çš„æ–¹å¼ (type.GetCustomerAttribute)</li>
<li>ç‰¹æ€§åªæœ‰è¢«æ¶ˆè´¹æ‰å…·å¤‡å…¶å­˜åœ¨çš„æ„ä¹‰ã€‚å…¶æ„ä¹‰æ˜¯åœ¨æ¶ˆè´¹çš„æ—¶å€™ï¼Œä½¿ç”¨è€…èµ‹äºˆçš„</li>
<li>ç‰¹æ€§å°±åƒäººç”Ÿï¼Œå®šä¸€ä¸ªå°ç›®æ ‡ï¼Œç„¶åå»å®ç°å®ƒ</li>
</ul>
<h4 id="20-3-1-ç‰¹æ€§å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»"><a href="#20-3-1-ç‰¹æ€§å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»" class="headerlink" title="20.3.1. ç‰¹æ€§å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»"></a>20.3.1. ç‰¹æ€§å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»</h4><p><strong>æœ€å¥½</strong> æŒ‰ç…§ä¸€å®šçš„å‘½åè§„èŒƒæ¥å‘½å (å½“ç„¶ï¼Œä½ ä¸æŒ‰ç…§å‘½åè§„èŒƒï¼Œä¹Ÿæ‹¿ä½ æ²¡åŠæ³•):</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">RainAttribute</span> : <span class="title">Attribute</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>ç‰¹æ–°æœ¬èº«æ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰çš„ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å°†å…¶æ”¾åˆ°å…¶ä»–çš„åœ°æ–¹ã€‚ ç¨‹åºåœ¨ç¼–è¯‘è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¼šè®°å½•è¿™äº›ç‰¹æ€§ (å…ƒæ•°æ®ä¸­ä¼šä¿ç•™ç‰¹æ€§çš„ä¿¡æ¯)ã€‚</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">Rain</span>]</span><br><span class="line">[<span class="meta">RainAttribute</span>]</span><br><span class="line"><span class="keyword">class</span> <span class="title">Xxx</span> &#123;&#125;  <span class="comment">// - Type - åå°„ - é¢å¤–çš„ä¿¡æ¯ï¼Œè¿™ä¸ªç±»ä¸Šæœ‰ä¸ª RainAttribute</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Yyy</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Rain</span>]</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">A</span>()</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="20-3-2-é€šè¿‡åå°„å¾—åˆ°å®ƒçš„å®ä¾‹ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨äº†"><a href="#20-3-2-é€šè¿‡åå°„å¾—åˆ°å®ƒçš„å®ä¾‹ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨äº†" class="headerlink" title="20.3.2. é€šè¿‡åå°„å¾—åˆ°å®ƒçš„å®ä¾‹ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨äº†"></a>20.3.2. é€šè¿‡åå°„å¾—åˆ°å®ƒçš„å®ä¾‹ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨äº†</h4><p>åœ¨ä½¿ç”¨åå°„æ–¹å¼ï¼Œå¤„ç†ç›¸å…³é€»è¾‘çš„æ—¶å€™ï¼Œå°±å¯ä»¥å€Ÿé¢˜å‘æŒ¥ã€æŒ‡é¹¿ä¸ºé©¬äº†:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rt = type.GetCustomerAttribute&lt;RainAttribute&gt;();</span><br><span class="line"><span class="comment">// æ—¢ç„¶ä¸Šé¢æœ‰è¿™ä¸ªï¼Œé‚£ä¹ˆçš„è¯ï¼Œè¯´æ˜è¿™ä¸ªç±»æ˜¯ä¸èƒ½è¢«...çš„ï¼Œèƒ½è¢«...çš„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (rt) ä¸å®ä¾‹åŒ–;</span><br><span class="line"><span class="keyword">if</span> (rt) å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œè®°å½•æ—¥å¿—;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span>/ è·å–æ–¹æ³•ä¸Šé¢çš„ç‰¹æ€§</span></span><br><span class="line"><span class="keyword">var</span> mType = yType.GetMethod(<span class="string">&quot;A&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> rt2 = mType.GetCustomerAttribute&lt;RainAttribute&gt;();</span><br></pre></td></tr></table></figure>

<h2 id="21-å¼‚æ­¥ç¼–ç¨‹"><a href="#21-å¼‚æ­¥ç¼–ç¨‹" class="headerlink" title="21. å¼‚æ­¥ç¼–ç¨‹"></a>21. å¼‚æ­¥ç¼–ç¨‹</h2><h3 id="21-1-Process"><a href="#21-1-Process" class="headerlink" title="21.1. Process"></a>21.1. Process</h3><ul>
<li>ç‚¹å‡»æ‰“å¼€ç¨‹åºï¼Œä¼šè‡ªåŠ¨åˆ›å»ºè¿›ç¨‹</li>
<li>é€šè¿‡ä»£ç çš„å½¢å¼ï¼Œåˆ›å»ºè¿›è¡Œ</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Process np = Process.Start(<span class="string">&quot;notepad.exe&quot;</span>);</span><br><span class="line"></span><br><span class="line">np.Kill();</span><br><span class="line">np.CloseMainWindow();</span><br></pre></td></tr></table></figure>

<h3 id="21-2-Thread"><a href="#21-2-Thread" class="headerlink" title="21.2. Thread"></a>21.2. Thread</h3><p>C# 1.0 ä¸­åŠ å…¥çš„ã€‚</p>
<p>åŸºæœ¬è¯­æ³•:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Thread t = <span class="keyword">new</span> Thread(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">t.Start();</span><br><span class="line">Console.WriteLine(<span class="string">&quot;world&quot;</span>);</span><br><span class="line"></span><br><span class="line">Thread tc = Thread.CurrentThread;</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;t.ManagedThreadId&#125;</span> / <span class="subst">&#123;t.Name&#125;</span> / <span class="subst">&#123;t.IsAlive&#125;</span> / <span class="subst">&#123;t.IsBackground&#125;</span>&quot;</span>);</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;tc.ManagedThreadId&#125;</span> / <span class="subst">&#123;tc.Name&#125;</span> / <span class="subst">&#123;tc.IsAlive&#125;</span> / <span class="subst">&#123;tc.IsBackground&#125;</span>&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ä¾‹å­:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Thread t = <span class="keyword">new</span> Thread(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.Write(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">t.Start();</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    Console.Write(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Console.WriteLine();</span><br></pre></td></tr></table></figure>

<p>çº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«æ•°æ®:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">bool</span> isFinished = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    Thread t1 = <span class="keyword">new</span> Thread(() =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (!isFinished) &#123; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    Thread t2 = <span class="keyword">new</span> Thread(() =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        isFinished = <span class="literal">true</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    t1.Start();</span><br><span class="line">    t2.Start();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.Write(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çº¿ç¨‹æ˜¯ä¸æ˜¯ä¸€å®šèƒ½è®©ä»»åŠ¡å˜å¿«:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Stopwatch sw = <span class="keyword">new</span> Stopwatch();</span><br><span class="line">sw.Start();</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000000</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> j = <span class="number">111110</span>;</span><br><span class="line">    Math.Pow(j, j);</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(sw.Elapsed);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Stopwatch sw = <span class="keyword">new</span> Stopwatch();</span><br><span class="line">sw.Start();</span><br><span class="line">Thread[] ts = <span class="keyword">new</span> Thread[<span class="number">10000000</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000000</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> t = <span class="keyword">new</span> Thread(() =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">int</span> j = <span class="number">111110</span>;</span><br><span class="line">            Math.Pow(j, j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    ts[i] = t;</span><br><span class="line">    t.Start();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> t <span class="keyword">in</span> ts) t.Join();</span><br><span class="line">Console.WriteLine(sw.Elapsed);</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºå¾ˆå¤šçº¿ç¨‹ï¼š</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> t = <span class="keyword">new</span> Thread(() =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        Thread.Sleep(<span class="number">2222222</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    t.Start();</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;...&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="21-3-ThreadPool"><a href="#21-3-ThreadPool" class="headerlink" title="21.3. ThreadPool"></a>21.3. ThreadPool</h3><p>C# 2.0 å‡ºç°çº¿ç¨‹æ± ã€‚(IoC&#x2F;DI)</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ThreadPool.QueueUserWorkItem(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;world&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="21-4-TPL-Task-Parallel-Libary"><a href="#21-4-TPL-Task-Parallel-Libary" class="headerlink" title="21.4. TPL (Task-Parallel Libary)"></a>21.4. TPL (Task-Parallel Libary)</h3><p>C# 3&#x2F;4 ç‰ˆæœ¬ä¸­ï¼Œå‡ºç°äº†æ›´é«˜ä¸€å±‚çš„æŠ½è±¡:</p>
<ul>
<li>Thread æ˜¯ä¸€ç§æ˜‚è´µçš„èµ„æºï¼Œåˆ›å»ºå’Œé”€æ¯å’Œç»´æŠ¤éœ€è¦æ—¶é—´ï¼Œè€Œä¸”éœ€è¦ç©ºé—´ (1M)</li>
<li>å› æ­¤ï¼Œå……åˆ†åˆ©ç”¨ Thread çš„æ–¹å¼ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ª Pool æ¥åå¤ä½¿ç”¨</li>
<li>ä½†æ˜¯é€šè¿‡ Pool çš„æ–¹å¼ï¼Œä¸èƒ½å¤Ÿå……åˆ†å±è”½çº¿ç¨‹çš„æ“ä½œç»†èŠ‚ï¼Œä½†æ˜¯ Pool æä¾›çš„ API è¿‡äºç®€é™‹</li>
<li>å› æ­¤ï¼Œé€šè¿‡è¿›ä¸€æ­¥æŠ½è±¡ï¼Œä½¿ç”¨ Task æ¦‚å¿µæ¥æš´éœ²çº¿ç¨‹éœ€è¦å®Œæˆçš„å·¥ä½œã€‚ Task äº¤ç»™èƒŒåçš„ Pool ä¹‹åï¼Œé€šè¿‡ä¸€å®šçš„çº¿ç¨‹è°ƒåº¦æœºåˆ¶ï¼Œä¼šä½¿ç”¨ Pool æä¾›çš„æŸä¸ªçº¿ç¨‹ï¼Œ å»æ‰§è¡Œ Task ä¸­çš„é€»è¾‘ã€‚</li>
<li>Task å¯¹è±¡ç”¨æ¥è¡¨ç¤ºåŒ…å«äº†å¼‚æ­¥é€»è¾‘ï¼Œä»¥åŠå¼‚æ­¥çš„æ‰§è¡Œç»“æœçš„å¯¹è±¡ã€‚Task å¯ä»¥ç»„åˆã€‚ æˆ‘ä»¬å¯ä»¥å°†å¤§ä»»åŠ¡ï¼Œåˆ†æˆè‹¥å¹²å°ä»»åŠ¡ï¼Œå°ä»»åŠ¡å®Œæˆä¹‹åç»„åˆæˆå¤§ä»»åŠ¡ã€‚</li>
</ul>
<h4 id="21-4-1-Task-Run"><a href="#21-4-1-Task-Run" class="headerlink" title="21.4.1. Task.Run"></a>21.4.1. Task.Run</h4><p>åŸºæœ¬ä½¿ç”¨:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Task t = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.Write(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Task.WaitAll(t1, t2);</span></span><br><span class="line"><span class="comment">//Task.WaitAny(t1, t2);</span></span><br><span class="line"><span class="comment">//t1.Wait(); // é˜»å¡å½“å‰çº¿ç¨‹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    Console.Write(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¸¦è¿”å›å€¼çš„ä½¿ç”¨:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Promise Style</span></span><br><span class="line">Task&lt;<span class="built_in">string</span>&gt; t = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        sb.Append(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Task.FromResult(sb.ToString());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(t.Result); <span class="comment">// ç­‰å¾…ä»»åŠ¡å®Œæˆï¼Œé˜»å¡å½“å‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    Console.Write(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç®€åŒ–:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Task&lt;<span class="built_in">string</span>&gt; t = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        sb.Append(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sb.ToString(); <span class="comment">// this one</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    Console.Write(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Console.WriteLine(t.Result); <span class="comment">// ç­‰å¾…ä»»åŠ¡å®Œæˆï¼Œé˜»å¡å½“å‰</span></span><br></pre></td></tr></table></figure>

<p>å¸¦ CancellationToken çš„ Task.Run:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cts = <span class="keyword">new</span> CancellationTokenSource();</span><br><span class="line">cts.CancelAfter(<span class="number">1000</span>);</span><br><span class="line">cts.Token.Register(() =&gt; Console.WriteLine(<span class="string">&quot;jieshule&quot;</span>));</span><br><span class="line"></span><br><span class="line">Task t = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Task t = Task.Run(() =&gt;</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     for (int i = 0; i &lt; 10000; i++)</span></span><br><span class="line">    <span class="comment">//     &#123;</span></span><br><span class="line">    <span class="comment">//         cts.Token.ThrowIfCancellationRequested();</span></span><br><span class="line">    <span class="comment">//         Console.Write(&quot;O&quot;);</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">// &#125;, cts.Token);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//while (!cts.Token.IsCancellationRequested &amp;&amp; i++ &lt; 10000)</span></span><br><span class="line">    <span class="comment">//&#123; </span></span><br><span class="line">    <span class="comment">//    Console.Write(&quot;O&quot;);</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        cts.Token.ThrowIfCancellationRequested();</span><br><span class="line">        Console.Write(<span class="string">&quot;O&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">while</span> (i++ &lt; <span class="number">1000</span>);</span><br><span class="line">&#125;, cts.Token);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">5</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cts.Cancel();</span><br><span class="line">    &#125;</span><br><span class="line">    Console.Write(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="21-4-2-å…¶ä»–åˆ›å»ºä»»åŠ¡çš„æ–¹å¼"><a href="#21-4-2-å…¶ä»–åˆ›å»ºä»»åŠ¡çš„æ–¹å¼" class="headerlink" title="21.4.2. å…¶ä»–åˆ›å»ºä»»åŠ¡çš„æ–¹å¼"></a>21.4.2. å…¶ä»–åˆ›å»ºä»»åŠ¡çš„æ–¹å¼</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Task t = <span class="keyword">new</span> TaskFactory().StartNew(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.Write(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    Console.Write(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">Task t = <span class="keyword">new</span> Task(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.Write(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, TaskCreationOptions.LongRunning);</span><br><span class="line">t.Start();</span><br><span class="line">Task t = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.Write(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Task.Run(() =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        Console.Write(<span class="string">&quot;%&quot;</span>);</span><br><span class="line">        Task.Run(() =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(<span class="string">&quot;$&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="21-4-3-ä»»åŠ¡åä½œ"><a href="#21-4-3-ä»»åŠ¡åä½œ" class="headerlink" title="21.4.3. ä»»åŠ¡åä½œ"></a>21.4.3. ä»»åŠ¡åä½œ</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Task t1 = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;æ‹¿æ‰«æŠŠ&quot;</span>);</span><br><span class="line">    Task t2 = Task.Run(() =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æ‰«åœ°&quot;</span>);</span><br><span class="line">        Task t3 = Task.Run(() =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;é›†åˆ&quot;</span>);</span><br><span class="line">            Task t4 = Task.Run(() =&gt;</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;åƒé¥­&quot;</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">t1.Wait();</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ ContinueWith ç®€åŒ–:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;æ‹¿æ‰«æŠŠ&quot;</span>);</span><br><span class="line">&#125;).ContinueWith((s) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;æ‰«åœ°&quot;</span>);</span><br><span class="line">&#125;).ContinueWith((s) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;é›†åˆ&quot;</span>);</span><br><span class="line">&#125;).ContinueWith((s) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;åƒé¥­&quot;</span>);</span><br><span class="line">&#125;).Wait();</span><br></pre></td></tr></table></figure>

<h3 id="21-5-TAL-Task-based-Asyncronize-Pattern"><a href="#21-5-TAL-Task-based-Asyncronize-Pattern" class="headerlink" title="21.5. TAL (Task-based Asyncronize Pattern)"></a>21.5. TAL (Task-based Asyncronize Pattern)</h3><p>C# 5 ä¸­ï¼Œå‡ºç°äº† async&#x2F;await å…³é”®è¯:</p>
<ul>
<li><p>å¼‚æ­¥æ–¹æ³•</p>
<p>ï¼Œéœ€è¦ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">async</span><br></pre></td></tr></table></figure>

<p>æ¥ä¿®é¥°</p>
<ul>
<li>è¿”å›å€¼å¿…é¡»æ˜¯ Task æˆ–è€… Task <code>&lt;T&gt;</code> (æœ‰äº›æƒ…å†µä¸‹å¯ä»¥è¿”å› void),</li>
<li>å‚æ•°ä¸èƒ½æ˜¯ ref&#x2F;out ç±»å‹,</li>
<li>æ–¹æ³•åï¼ŒæŒ‰ç…§çº¦å®šï¼Œæœ€å¥½æ˜¯ä»¥ Async ç»“å°¾</li>
</ul>
</li>
<li><p>&#96;&#96;&#96;<br>await</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  å…³é”®è¯ï¼Œåªèƒ½ç”¨äº async ä¿®é¥°çš„æ–¹æ³•å†…:</span><br><span class="line"></span><br><span class="line">  - await å…³é”®è¯åé¢è·Ÿç€çš„æ˜¯ awaitable ç±»å‹ (å®ç°äº† GetAwaiter æ–¹æ³•çš„ç±»å‹) çš„å¯¹è±¡</span><br><span class="line">  - æˆ‘ä»¬ä¸€èˆ¬æ¥è¯´ï¼Œæ²¡æœ‰å¿…è¦æ‰‹åŠ¨åˆ›å»º awaitable å¯¹è±¡ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ Task</span><br><span class="line">  - await ä¼šæ£€æŸ¥åé¢çš„ awaitable å¯¹è±¡çš„çŠ¶æ€:</span><br><span class="line">    - å¦‚æœå®ƒå·²ç»å®Œæˆï¼Œé‚£ä¹ˆæ‹¿åˆ°è¿”å›ç»“æœä¹‹åç»§ç»­</span><br><span class="line">    - å¦‚æœæ²¡æœ‰å®Œæˆï¼Œå°†å½“å‰å¼‚æ­¥æ–¹æ³• **æŒ‚èµ·**ï¼Œç„¶åè¿”å›è°ƒç”¨è¿™ä¸ªå¼‚æ­¥æ–¹æ³•çš„æ–¹æ³•ç»§ç»­æ‰§è¡Œã€‚ å¦‚æœåç»­ awaitable çŠ¶æ€å˜æ›´ä¸ºå®Œæˆçš„è¯ï¼Œå¼‚æ­¥æ–¹æ³•å°†ä¼šè¢« **æ¢å¤**ï¼Œå¹¶ç»§ç»­æ‰§è¡Œæ¥ä¸‹æ¥çš„é€»è¾‘</span><br><span class="line">- å¼‚æ­¥æ–¹æ³•çš„è°ƒç”¨ï¼Œæœ¬èº«ä¸ä¼šåˆ›å»ºä»»ä½•çº¿ç¨‹çš„</span><br><span class="line"></span><br><span class="line">```C#</span><br><span class="line">static async Task&lt;int&gt; GetUrlContentLengthAsync()</span><br><span class="line">&#123;</span><br><span class="line">    var client = new HttpClient();</span><br><span class="line"></span><br><span class="line">    Task&lt;string&gt; getStringTask =</span><br><span class="line">        client.GetStringAsync(&quot;https://docs.microsoft.com/dotnet&quot;);</span><br><span class="line"></span><br><span class="line">    DoIndependentWork();</span><br><span class="line"></span><br><span class="line">    string contents = await getStringTask; // é­”æ³•ä¹‹æºã€‚å¦‚æœä»»åŠ¡æ²¡ç»“æŸï¼ŒæŠŠæ–¹æ³•æŒ‚èµ·æ¥</span><br><span class="line"></span><br><span class="line">    string cbaidu = await client.GetStringAsync(&quot;https://www.baidu.com&quot;);</span><br><span class="line">    Console.WriteLine($&quot;ç™¾åº¦çš„è®¿é—®ç»“æŸ: &#123;cbaidu.Length&#125;&quot;);</span><br><span class="line"></span><br><span class="line">    string cbing = await client.GetStringAsync(&quot;https://bing.com&quot;);</span><br><span class="line">    Console.WriteLine($&quot;bingçš„è®¿é—®ç»“æŸ: &#123;cbing.Length&#125;&quot;);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(&quot;Finished.&quot;);</span><br><span class="line"></span><br><span class="line">    return contents.Length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static async Task Main()</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(&quot;111&quot;);</span><br><span class="line">    Task&lt;int&gt; t = GetUrlContentLengthAsync();</span><br><span class="line">    Console.WriteLine(&quot;222&quot;);</span><br><span class="line">    Console.WriteLine(await t); // Console.WriteLine(t.Result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="21-6-Parallel"><a href="#21-6-Parallel" class="headerlink" title="21.6. Parallel"></a>21.6. Parallel</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//for (int i = 0; i &lt; 1000; i++)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//    Console.WriteLine(i);</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Task.WaitAll(</span></span><br><span class="line"><span class="comment">//    Enumerable.Range(0, 1000)</span></span><br><span class="line"><span class="comment">//        .Select(n =&gt; Task.Run(() =&gt; Console.WriteLine(n)))</span></span><br><span class="line"><span class="comment">//        .ToArray()</span></span><br><span class="line"><span class="comment">//        );</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Parallel.For(0, 1000, (n) =&gt;</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//    Console.WriteLine(n);</span></span><br><span class="line"><span class="comment">//&#125;);</span></span><br><span class="line"></span><br><span class="line">List&lt;<span class="built_in">int</span>&gt; numbers = Enumerable.Range(<span class="number">0</span>, <span class="number">1000</span>).ToList();</span><br><span class="line"><span class="comment">//foreach (var n in numbers) Console.WriteLine(n);</span></span><br><span class="line"><span class="comment">//Parallel.ForEach(numbers, (n) =&gt; Console.WriteLine(n));</span></span><br><span class="line"></span><br><span class="line">Parallel.Invoke(</span><br><span class="line">    () =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">double</span> ii = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Task.Delay(<span class="number">10</span>).Wait();</span><br><span class="line">            ii += Math.Pow(i, <span class="keyword">new</span> Random().Next(<span class="number">50</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;Task.CurrentId&#125;</span> è®¡ç®—å®Œæ¯•: <span class="subst">&#123;ii&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    () =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Task.Delay(<span class="number">10</span>).Wait();</span><br><span class="line">            <span class="built_in">double</span> ii = Math.Pow(i, i * i + <span class="number">3</span>) - <span class="number">1000</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;Task.CurrentId&#125;</span> è®¡ç®—å®Œæ¯•&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    () =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Task.Delay(<span class="number">10</span>).Wait();</span><br><span class="line">            <span class="built_in">double</span> ii = Math.Pow(i, i * i) / <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;Task.CurrentId&#125;</span> è®¡ç®—å®Œæ¯•&quot;</span>);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="21-7-ä»»åŠ¡çš„åŒæ­¥å’Œåä½œ"><a href="#21-7-ä»»åŠ¡çš„åŒæ­¥å’Œåä½œ" class="headerlink" title="21.7. ä»»åŠ¡çš„åŒæ­¥å’Œåä½œ"></a>21.7. ä»»åŠ¡çš„åŒæ­¥å’Œåä½œ</h3><h4 id="21-7-1-Monitor-Enter-x2F-Exit"><a href="#21-7-1-Monitor-Enter-x2F-Exit" class="headerlink" title="21.7.1. Monitor.Enter&#x2F;Exit"></a>21.7.1. Monitor.Enter&#x2F;Exit</h4><p>é”çš„åŸºæœ¬ä½¿ç”¨:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. åˆ›å»ºé”</span></span><br><span class="line"><span class="built_in">object</span> o = <span class="keyword">new</span> <span class="built_in">object</span>(); <span class="comment">// å°†å…¶å½“æˆä¸€æŠŠé”ï¼Œæœ€å¥½å°±æ˜¯ objectã€‚å°¤å…¶ä¸è¦ä½¿ç”¨ this</span></span><br><span class="line"></span><br><span class="line">Task.Run(xxx);</span><br><span class="line">Task.Run(xxx);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">xxx</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 2. æŠ¢å¤ºé”</span></span><br><span class="line">    Monitor.Enter(o); <span class="comment">// å¦‚æœæŠ¢ä¸åˆ°ï¼Œé‚£ä¹ˆç­‰ (é˜»å¡)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. æ‰§è¡Œå…³é”®ä»£ç </span></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;æ‰§è¡Œå…³é”®åŒºåŸŸçš„ä»£ç &quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. é‡Šæ”¾é”</span></span><br><span class="line">    Monitor.Exit(o);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ›´åŠ å¥å£®ä¸€ç‚¹çš„å†™æ³•:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. åˆ›å»ºé”</span></span><br><span class="line"><span class="built_in">object</span> o = <span class="keyword">new</span> <span class="built_in">object</span>(); <span class="comment">// å°†å…¶å½“æˆä¸€æŠŠé”ï¼Œæœ€å¥½å°±æ˜¯ objectã€‚å°¤å…¶ä¸è¦ä½¿ç”¨ this</span></span><br><span class="line"></span><br><span class="line">Task.Run(xxx);</span><br><span class="line">Task.Run(xxx);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">xxx</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 2. æŠ¢å¤ºé”</span></span><br><span class="line">    Monitor.Enter(o); <span class="comment">// å¦‚æœæŠ¢ä¸åˆ°ï¼Œé‚£ä¹ˆç­‰ (é˜»å¡)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 3. æ‰§è¡Œå…³é”®ä»£ç </span></span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æ‰§è¡Œå…³é”®åŒºåŸŸçš„ä»£ç &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">finally</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 4. é‡Šæ”¾é”</span></span><br><span class="line">        Monitor.Exit(o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä¸æƒ³ç­‰ (æˆ‘åªèƒ½ç­‰è‹¥å¹²æ—¶é—´):</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. åˆ›å»ºé”</span></span><br><span class="line"><span class="built_in">object</span> o = <span class="keyword">new</span> <span class="built_in">object</span>();</span><br><span class="line"></span><br><span class="line">Task.Run(xxx);</span><br><span class="line">Task.Run(xxx);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">xxx</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 2. æŠ¢å¤ºé”</span></span><br><span class="line">    <span class="built_in">bool</span> isTaken = Monitor.TryEnter(o); <span class="comment">// æˆ‘ç­‰ä¸åˆ°ï¼Œå°±æ‹‰å€’ (éé˜»å¡)</span></span><br><span class="line">    <span class="built_in">bool</span> isTaken = Monitor.TryEnter(o, <span class="number">666</span>); <span class="comment">// æˆ‘åªèƒ½ç­‰è¿™ä¹ˆä¹…</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. åˆ¤æ–­æœ‰æ²¡æœ‰æ‹¿åˆ°é”</span></span><br><span class="line">    <span class="keyword">if</span> (isTaken)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 4. æ‰§è¡Œå…³é”®ä»£ç </span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot;æ‰§è¡Œå…³é”®åŒºåŸŸçš„ä»£ç &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 5. é‡Šæ”¾é”</span></span><br><span class="line">            Monitor.Exit(o);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦å¤–ï¼Œä¸€å®šè¦é¿å…æ­»é”çš„äº§ç”Ÿ:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">object</span> lock1 = <span class="keyword">new</span>();</span><br><span class="line"><span class="built_in">object</span> lock2 = <span class="keyword">new</span>();</span><br><span class="line"></span><br><span class="line">Task t1 = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    Monitor.Enter(lock1);</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;å¼€å§‹&quot;</span>);</span><br><span class="line">    Task.Delay(<span class="number">2000</span>).Wait();</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;ç»“æŸ&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Monitor.Enter(lock2);</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;å…¶ä»–äº‹æƒ…&quot;</span>);</span><br><span class="line">    Monitor.Exit(lock2);</span><br><span class="line"></span><br><span class="line">    Monitor.Exit(lock1);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Task t2 = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    Monitor.Enter(lock2);</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;My...&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Monitor.Enter(lock1);</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;start&quot;</span>);</span><br><span class="line">    Task.Delay(<span class="number">1500</span>).Wait();</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;end&quot;</span>);</span><br><span class="line">    Monitor.Exit(lock1);</span><br><span class="line"></span><br><span class="line">    Monitor.Exit(lock2);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Task.WaitAll(t1, t2);</span><br><span class="line">Console.WriteLine(<span class="string">&quot;å¥½äº†&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="21-7-2-lock"><a href="#21-7-2-lock" class="headerlink" title="21.7.2. lock"></a>21.7.2. lock</h4><p>æ˜¯ Monitor è¯­æ³•ç³–ã€‚èƒœåœ¨ç®€å•ï¼Œè´¥åœ¨ä¸å¤Ÿçµæ´»:</p>
<ul>
<li>lock çš„è¡Œä¸ºæ˜¯ï¼Œå¦‚æœè·å–ä¸åˆ°é”ï¼Œå°±ç­‰å¾…</li>
<li>é”çš„äº‰ç”¨ä¼šå ç”¨èµ„æºï¼Œæ‹–æ…¢é€Ÿåº¦</li>
<li>å› æ­¤ï¼Œä¸€å®šè¦æ§åˆ¶å¥½é”çš„èŒƒå›´ (é¢—ç²’)</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">object</span> o = <span class="keyword">new</span> ();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">xxx</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">lock</span>(o) <span class="comment">// ç­‰å¾…</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;æˆ‘æ˜¯å…³é”®åŒºåŸŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="21-7-3-ManualResetEventSlim"><a href="#21-7-3-ManualResetEventSlim" class="headerlink" title="21.7.3. ManualResetEventSlim"></a>21.7.3. ManualResetEventSlim</h4><p>å¤šä»»åŠ¡çš„ç®€å•ååŒã€‚äº‹ä»¶æœºåˆ¶ã€‚</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ev1 = <span class="keyword">new</span> ManualResetEventSlim();</span><br><span class="line"><span class="keyword">var</span> ev2 = <span class="keyword">new</span> ManualResetEventSlim();</span><br><span class="line"></span><br><span class="line">Task t1 = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;æˆ‘æ¥åˆ°æ•™å®¤&quot;</span>);</span><br><span class="line">    ev2.Wait();</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;æˆ‘å¼€å§‹è®²è¯¾&quot;</span>);</span><br><span class="line">    ev1.Set();</span><br><span class="line">&#125;);</span><br><span class="line">Task t2 = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;ä½ ä»¬æ¥åˆ°æ•™å®¤&quot;</span>);</span><br><span class="line">    ev2.Set();</span><br><span class="line">    ev1.Wait();</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;ä½ ä»¬å¼€å§‹å¬è¯¾&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Task.WaitAll(t1, t2);</span><br><span class="line">Console.WriteLine(<span class="string">&quot;ä¸‹è¯¾&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="21-7-4-Interlock"><a href="#21-7-4-Interlock" class="headerlink" title="21.7.4. Interlock"></a>21.7.4. Interlock</h4><p>å³ä½¿ i++ è¿™æ ·çš„ä»£ç ï¼Œåœ¨ CPU çš„è§’åº¦ï¼Œä¹Ÿä¸æ˜¯åŸå­æ€§çš„ (ä»å†…å­˜ä¸­æ‹¿å–ã€è®¡ç®—ã€å†™å…¥åˆ°å†…å­˜):</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> money = <span class="number">1000000</span>;</span><br><span class="line"></span><br><span class="line">Task t1 = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        money++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">Task t2 = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        money--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">Task.WaitAll(t1, t2);</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;ç°åœ¨æˆ‘æœ‰é’±: <span class="subst">&#123;money&#125;</span>&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>é‡åˆ°èµ„æºäº‰ç”¨å‡ºç°çš„é—®é¢˜ï¼ŒåŸºæœ¬æ€è·¯å°±æ˜¯ä¸Šé”:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">object</span> _lock = <span class="keyword">new</span>();</span><br><span class="line"><span class="built_in">int</span> money = <span class="number">1000000</span>;</span><br><span class="line"></span><br><span class="line">Task t1 = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">lock</span> (_lock)</span><br><span class="line">        &#123;</span><br><span class="line">            money++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">Task t2 = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">lock</span>(_lock)</span><br><span class="line">        &#123;</span><br><span class="line">            money--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Task.WaitAll(t1, t2);</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;ç°åœ¨æˆ‘æœ‰é’±: <span class="subst">&#123;money&#125;</span>&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Interlock ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå®ƒæ¯”ä½¿ç”¨ä¸Šé”çš„æ–¹å¼ï¼Œæ›´å¿«ã€æ›´ç®€å•:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">object</span> _lock = <span class="keyword">new</span>();</span><br><span class="line"><span class="built_in">int</span> money = <span class="number">1000000000</span>;</span><br><span class="line"></span><br><span class="line">Task t1 = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Interlocked.Increment(<span class="keyword">ref</span> money);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">Task t2 = Task.Run(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Interlocked.Decrement(<span class="keyword">ref</span> money);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Task.WaitAll(t1, t2);</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;ç°åœ¨æˆ‘æœ‰é’±: <span class="subst">&#123;money&#125;</span>&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="21-7-5-Semaphore"><a href="#21-7-5-Semaphore" class="headerlink" title="21.7.5. Semaphore"></a>21.7.5. Semaphore</h4><p>å¯ä»¥çœ‹ä½œæ˜¯ Monitor æ–¹å¼çš„å¢å¼ºç‰ˆã€‚å¯ä»¥æ§åˆ¶åŒä¸€æ—¶åˆ»é€šè¿‡æ ¸å¿ƒä»£ç åŒºåŸŸçš„ä»»åŠ¡æ•°é‡:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Semaphore sem = <span class="keyword">new</span> Semaphore(<span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> random = <span class="keyword">new</span> Random();</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DoSomething</span>(<span class="params"><span class="built_in">int</span> n</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (sem.WaitOne(<span class="number">1000</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;n&#125;</span>: --- æ­å–œæˆ‘æˆåŠŸæ‹¿é” :)&quot;</span>);</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;n&#125;</span>: æˆ‘å¼€å§‹åšäº‹å’¯&quot;</span>);</span><br><span class="line">            Task.Delay(random.Next(<span class="number">2000</span>) + <span class="number">1000</span>).Wait(); <span class="comment">// æ¨¡æ‹Ÿåšäº†ç‚¹äº‹</span></span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;n&#125;</span>: æˆ‘åšå®Œå’¯&quot;</span>);</span><br><span class="line">            sem.Release();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;n&#125;</span>: --- æˆ‘æ‹¿é”å¤±è´¥äº† :(&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//List&lt;Task&gt; tasks = new();</span></span><br><span class="line"><span class="comment">//for (int i = 0; i &lt; 10; i++)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//    var task = Task.Run(() =&gt; DoSomething(i));</span></span><br><span class="line"><span class="comment">//    tasks.Add(task);</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tasks = Enumerable.Range(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">    .Select(n =&gt; Task.Run(() =&gt; DoSomething(n)));</span><br><span class="line">Task.WaitAll(tasks.ToArray());</span><br></pre></td></tr></table></figure>

<h4 id="21-7-6-CountdownEvent"><a href="#21-7-6-CountdownEvent" class="headerlink" title="21.7.6. CountdownEvent"></a>21.7.6. CountdownEvent</h4><p>çœ‹ä½œæ˜¯ ManualResetEventSlim çš„å¢å¼ºç‰ˆã€‚</p>
<p>é›†é½ 7 é¢—é¾™ç ï¼Œå¬å”¤ç¥é¾™:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cde = <span class="keyword">new</span> CountdownEvent(<span class="number">7</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> random = <span class="keyword">new</span> Random();</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SeekLongZhu</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;Task.CurrentId&#125;</span> å¼€å§‹å¯»æ‰¾...&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (cde.CurrentCount &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Task.Delay(<span class="number">200</span>).Wait();</span><br><span class="line">        <span class="keyword">if</span> (random.Next(<span class="number">100</span>) == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cde.Signal();</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;Task.CurrentId&#125;</span> æ‰¾åˆ°ä¸€é¢—é¾™ç &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tasks = Enumerable.Range(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">    .Select(n =&gt; Task.Run(SeekLongZhu));</span><br><span class="line"></span><br><span class="line">Task.WaitAll(tasks.ToArray());</span><br><span class="line"></span><br><span class="line">cde.Wait();</span><br><span class="line">Console.WriteLine(<span class="string">&quot;ä¸ƒé¢—é¾™ç é›†é½ï¼Œå¼€å§‹å¬å”¤ç¥é¾™&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="21-8-å…¶ä»–å‡ ç§å¼‚æ­¥æ¨¡å¼"><a href="#21-8-å…¶ä»–å‡ ç§å¼‚æ­¥æ¨¡å¼" class="headerlink" title="21.8. å…¶ä»–å‡ ç§å¼‚æ­¥æ¨¡å¼"></a>21.8. å…¶ä»–å‡ ç§å¼‚æ­¥æ¨¡å¼</h3><h4 id="21-8-1-BackgroundWorker"><a href="#21-8-1-BackgroundWorker" class="headerlink" title="21.8.1. BackgroundWorker"></a>21.8.1. BackgroundWorker</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//button1.Click += (s, e) =&gt;</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//    label111.Text = &quot;ä»»åŠ¡è¿›è¡Œä¸­...&quot;;</span></span><br><span class="line"><span class="comment">//    Thread.Sleep(10000);</span></span><br><span class="line"><span class="comment">//    label111.Text = &quot;ä»»åŠ¡å·²å®Œæˆ!&quot;;</span></span><br><span class="line"><span class="comment">//&#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//button1.Click += (s, e) =&gt;</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//    label111.Text = &quot;ä»»åŠ¡è¿›è¡Œä¸­...&quot;;</span></span><br><span class="line"><span class="comment">//    Task.Run(() =&gt;</span></span><br><span class="line"><span class="comment">//    &#123;</span></span><br><span class="line"><span class="comment">//        Thread.Sleep(10000);</span></span><br><span class="line"><span class="comment">//        label111.Text = &quot;ä»»åŠ¡å·²å®Œæˆ!&quot;;</span></span><br><span class="line"><span class="comment">//    &#125;);</span></span><br><span class="line"><span class="comment">//&#125;;</span></span><br><span class="line"></span><br><span class="line">button1.Click += (s, e) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> bgw = <span class="keyword">new</span> BackgroundWorker();</span><br><span class="line">    bgw.DoWork += (s, e) =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        label111.Text = <span class="string">&quot;ä»»åŠ¡è¿›è¡Œä¸­...&quot;</span>;</span><br><span class="line">        Thread.Sleep(<span class="number">10000</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    bgw.RunWorkerCompleted += (s, e) =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        label111.Text = <span class="string">&quot;ä»»åŠ¡å·²å®Œæˆ!&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    bgw.RunWorkerAsync();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="21-8-2-System-Threading-Timer"><a href="#21-8-2-System-Threading-Timer" class="headerlink" title="21.8.2. System.Threading.Timer"></a>21.8.2. System.Threading.Timer</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">button1.Click += (s, e) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> timer = <span class="keyword">new</span> System.Threading.Timer((o) =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        label111.Text += <span class="string">&quot;+&quot;</span>;</span><br><span class="line">        Thread.Sleep(<span class="number">1000</span>);</span><br><span class="line">    &#125;, <span class="literal">null</span>, <span class="number">5000</span>, <span class="number">2000</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å¯¹æ¯”ä¸€ä¸‹ Winform ç‰ˆæœ¬çš„ Timerï¼Œå®ƒæ˜¯å±€éƒ¨é˜»å¡:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> timer = <span class="keyword">new</span> System.Windows.Forms.Timer();</span><br><span class="line">timer.Interval = <span class="number">3000</span>;</span><br><span class="line">timer.Tick += (s, e) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    label111.Text += <span class="string">&quot;+&quot;</span>;</span><br><span class="line">    Thread.Sleep(<span class="number">2000</span>); <span class="comment">// åœ¨å½“å‰çº¿ç¨‹ä¸­ï¼Œå µ</span></span><br><span class="line">&#125;;</span><br><span class="line">button1.Click += (s, e) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    timer.Start();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="22-IO-x2F-Stream"><a href="#22-IO-x2F-Stream" class="headerlink" title="22. IO&#x2F;Stream"></a>22. IO&#x2F;Stream</h2><p>é©±åŠ¨å™¨ã€æ–‡ä»¶å¤¹ã€æ–‡ä»¶çš„åŸºæœ¬æ“ä½œ:</p>
<ul>
<li><p>é™æ€çš„ <code>Path</code> ç±»ï¼Œç”¨æ¥å¤„ç†è·¯å¾„ (è·¯å¾„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²)</p>
</li>
<li><p>å¤„ç†é©±åŠ¨å™¨ï¼Œä½¿ç”¨ <code>DriveInfo</code></p>
</li>
<li><p>å¤„ç†æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Œä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FileSystemInfo</span><br></pre></td></tr></table></figure>

<p>(æŠ½è±¡ç±»)ï¼Œå®ç°ç±»:</p>
<ul>
<li>æ–‡ä»¶å¤¹ï¼Œä½¿ç”¨ <code>DirectoryInfo</code>ã€‚é™æ€çš„ <code>Directory</code></li>
<li>æ–‡ä»¶ï¼Œä½¿ç”¨ <code>FileInfo</code>ã€‚é™æ€çš„ <code>File</code></li>
</ul>
</li>
</ul>
<p>æ–‡ä»¶å†…å®¹çš„è¯»å†™ (Stream):</p>
<ul>
<li>æŠ½è±¡çš„ <code>Stream</code> è¡¨ç¤ºæµï¼Œå®ƒæ˜¯æ‰€æœ‰åº•å±‚æµçš„åŸºç±» (åŸºäº byte)</li>
<li><code>FileStream</code> ç”¨æ¥è¯»å†™æ–‡ä»¶çš„å†…å®¹</li>
<li><code>MemoryStream</code> ç”¨æ¥å°†æŸäº›å†…å®¹æŒ‰ç…§æµçš„æ–¹å¼å†™åˆ°å†…å­˜ä¸­ (ä»å†…å­˜ä¸­è¯»å–)</li>
<li><code>NetworkStream</code> ä»ç½‘ç»œä¸­è¿›è¡Œè¯»å†™</li>
<li><code>GZipStream</code> ç”¨æ¥è¿›è¡Œå‹ç¼©ã€è§£å‹çš„</li>
</ul>
<p>é€šè¿‡ä¸åŒçš„è·Ÿè¯»å†™ç›¸å…³çš„è¾…åŠ©ç±» (Reader&#x2F;Writer) ç®€åŒ–äº†å¯¹ä¸Šè¿°æµçš„ä½¿ç”¨:</p>
<ul>
<li><p>æŠ½è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TextReader/TextWriter</span><br></pre></td></tr></table></figure>

<p>ï¼Œè¡¨ç¤ºä»æµä¸­è¯»å–è‹¥å¹²å­—ç¬¦ (åŸºäº char)</p>
<ul>
<li><code>StreamReader/StreamWriter</code> ç”¨æ¥åŒ…è£…åº•å±‚æµï¼Œå¢åŠ åŸºäºå­—ç¬¦è¯»å–çš„èƒ½åŠ›</li>
<li><code>StringReader/StringWriter</code> ç”¨æ¥ä»å­—ç¬¦ä¸²ä¸­è¯»å†™</li>
</ul>
</li>
<li><p><code>BinaryReader/BinaryWriter</code> ç”¨æ¥è¯»å†™ç°æˆçš„ç±»å‹</p>
</li>
<li><p><code>XmlReader/XmlWriter</code> ä¸“é—¨ç”¨æ¥å¤„ç† xml æ–‡ä»¶</p>
</li>
</ul>
<p>å…¶ä»–çš„ä¸€äº›æµè·Ÿç›¸å…³çš„ç±»:</p>
<ul>
<li><code>ZipArchive/DeflateStream</code></li>
<li><code>MemoryMappedFiles</code></li>
<li><code>Pipes</code> ç®¡é“æµ</li>
</ul>
<h3 id="22-1-Path"><a href="#22-1-Path" class="headerlink" title="22.1. Path"></a>22.1. Path</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fn = <span class="string">@&quot;E:\Workdir\Chengji\Chengji\Program.cs&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> s1 = Path.ChangeExtension(fn, <span class="string">&quot;java&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> d1 = <span class="string">@&quot;E:\ddd\&quot;</span>;</span><br><span class="line">            <span class="built_in">string</span> n1 = <span class="string">@&quot;aaa.txt&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> s2 = Path.Combine(d1, n1);</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> b1 = Path.EndsInDirectorySeparator(d1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s3 = Path.GetDirectoryName(fn);</span><br><span class="line"><span class="keyword">var</span> s4 = Path.GetExtension(fn);</span><br><span class="line"><span class="keyword">var</span> s5 = Path.GetFileName(fn);</span><br><span class="line"><span class="keyword">var</span> s6 = Path.GetFileNameWithoutExtension(fn);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s7 = Path.GetFullPath(<span class="string">&quot;xxx.txt&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> s8 = Path.GetFullPath(fn);</span><br><span class="line"><span class="keyword">var</span> s9 = Path.GetRandomFileName();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;s9&#125;</span>&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="22-2-Driver"><a href="#22-2-Driver" class="headerlink" title="22.2. Driver"></a>22.2. Driver</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DriveInfo[] drives = DriveInfo.GetDrives();</span><br><span class="line"><span class="keyword">foreach</span> (DriveInfo di <span class="keyword">in</span> drives)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;di.Name&#125;</span>, <span class="subst">&#123;di.DriveType&#125;</span>, <span class="subst">&#123;di.DriveFormat&#125;</span>, <span class="subst">&#123;di.TotalSize&#125;</span>, <span class="subst">&#123;di.AvailableFreeSpace&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="22-3-Directory"><a href="#22-3-Directory" class="headerlink" title="22.3. Directory"></a>22.3. Directory</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="string">@&quot;e:\demo1\hello&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> d2 = <span class="string">@&quot;e:\demo1\world&quot;</span>;</span><br><span class="line"></span><br><span class="line">Directory.CreateDirectory(d1);</span><br><span class="line">Directory.CreateDirectory(d2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Directory.Delete(Directory.GetParent(d).FullName);</span></span><br><span class="line"><span class="comment">//Directory.Delete(Directory.GetParent(d).FullName, true);</span></span><br><span class="line"><span class="comment">//Directory.Move(d2, d1);</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> f <span class="keyword">in</span> Directory.GetDirectories(<span class="string">@&quot;e:\Workdir&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> f <span class="keyword">in</span> Directory.GetFiles(<span class="string">@&quot;e:\Workdir&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">IEnumerable&lt;<span class="built_in">string</span>&gt; e1 = Directory.EnumerateFiles(d2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s1 = Directory.GetCreationTime(d1);</span><br><span class="line"><span class="keyword">var</span> s2 = Directory.GetCurrentDirectory();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b1 = Directory.Exists(d2);</span><br><span class="line">Directory.SetCreationTime(<span class="string">@&quot;e:\Video&quot;</span>, DateTime.Now);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(s2);</span><br></pre></td></tr></table></figure>

<h3 id="22-4-File"><a href="#22-4-File" class="headerlink" title="22.4. File"></a>22.4. File</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fn = <span class="string">@&quot;E:\Workdir\Chengji\Chengji\Program.cs&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//File.Exists(fn);</span></span><br><span class="line"><span class="comment">//File.Delete(fn);</span></span><br><span class="line"><span class="comment">//File.Move(fn, &quot;xxx&quot;);</span></span><br><span class="line"><span class="comment">//File.Copy(fn, &quot;xxx&quot;);</span></span><br><span class="line"><span class="comment">//File.Encrypt(fn);</span></span><br><span class="line"><span class="comment">//File.Decrypt(fn);</span></span><br><span class="line"></span><br><span class="line">File.GetCreationTime(fn);</span><br><span class="line">Console.WriteLine(File.GetAttributes(fn));</span><br></pre></td></tr></table></figure>

<h3 id="22-5-Stream"><a href="#22-5-Stream" class="headerlink" title="22.5. Stream"></a>22.5. Stream</h3><h4 id="22-5-1-FileSteam"><a href="#22-5-1-FileSteam" class="headerlink" title="22.5.1. FileSteam"></a>22.5.1. FileSteam</h4><p>ç”¨å®Œè¦é‡Šæ”¾; ä½¿ç”¨ ReadByte è¯»å–ä¸€ä¸ªå­—èŠ‚:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fn = <span class="string">@&quot;E:\Workdir\Chengji\Chengji\Program.cs&quot;</span>;</span><br><span class="line"></span><br><span class="line">FileStream stream = <span class="keyword">new</span> FileStream(fn, FileMode.Open);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;stream.CanRead&#125;</span>, <span class="subst">&#123;stream.CanWrite&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> b = stream.ReadByte();</span><br><span class="line">    Console.Write(<span class="string">$&quot;<span class="subst">&#123;b:x&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine();</span><br><span class="line"></span><br><span class="line">stream.Seek(<span class="number">5</span>, SeekOrigin.Begin);</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;stream.ReadByte():x&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">stream.Dispose();</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ using ç®¡ç†èµ„æº &#x2F; ä½¿ç”¨ Read è¿›è¡Œæ‰¹é‡è¯»å–:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fn = <span class="string">@&quot;E:\Workdir\Chengji\Chengji\Program.cs&quot;</span>;</span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> stream = <span class="keyword">new</span> FileStream(fn, FileMode.Open))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// byte[] bs = stream.Read(10);</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">byte</span>[] buf = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">10</span>];</span><br><span class="line">    <span class="built_in">int</span> n = stream.Read(buf, <span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;è¯»å–æˆåŠŸäº† <span class="subst">&#123;n&#125;</span> ä¸ª&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.Write(<span class="string">$&quot;<span class="subst">&#123;buf[i]:x&#125;</span>-&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¨æ–‡è¯»å–:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fn = <span class="string">@&quot;E:\Workdir\Chengji\Chengji\Program.cs&quot;</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">var</span> stream = <span class="keyword">new</span> FileStream(fn, FileMode.Open);</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> n;</span><br><span class="line"><span class="built_in">byte</span>[] buf = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">10</span>]; <span class="comment">// ç¼“å†²æ•°ç»„</span></span><br><span class="line"><span class="keyword">while</span> ((n = stream.Read(buf)) &gt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    PrintBuffer(buf, n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PrintBuffer</span>(<span class="params"><span class="built_in">byte</span>[] buf, <span class="built_in">int</span> limit</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; limit; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.Write(<span class="string">$&quot;<span class="subst">&#123;buf[i]:x&#125;</span>-&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¼‚æ­¥è¯»å–:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fn = <span class="string">@&quot;E:\Workdir\Chengji\Chengji\Program.cs&quot;</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">var</span> stream = <span class="keyword">new</span> FileStream(fn, FileMode.Open);</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> n;</span><br><span class="line"><span class="built_in">byte</span>[] buf = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">1000000</span>];</span><br><span class="line"><span class="built_in">int</span> len = <span class="keyword">await</span> stream.ReadAsync(buf);</span><br></pre></td></tr></table></figure>

<p>å†™:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fn = <span class="string">@&quot;E:\Workdir\Chengji\Chengji\Program.cs&quot;</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">var</span> stream = <span class="keyword">new</span> FileStream(fn, FileMode.Open);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€å¼€å§‹çš„ä½ç½®</span></span><br><span class="line"><span class="comment">// è¦†ç›–</span></span><br><span class="line">stream.WriteByte(<span class="number">255</span>);</span><br><span class="line">stream.WriteByte(<span class="number">255</span>);</span><br><span class="line">stream.WriteByte(<span class="number">255</span>);</span><br><span class="line">stream.WriteByte(<span class="number">255</span>);</span><br><span class="line">stream.Flush();</span><br><span class="line"></span><br><span class="line">stream.Seek(<span class="number">100</span>, SeekOrigin.Begin);</span><br><span class="line"><span class="keyword">var</span> ba1 = Encoding.UTF8.GetBytes(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">stream.Write(ba1, <span class="number">0</span>, ba1.Length);</span><br><span class="line">stream.Flush();</span><br></pre></td></tr></table></figure>

<p>ä¸°å¯Œå¤šå½©çš„æ„é€ å‚æ•°:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fn = <span class="string">@&quot;E:\Workdir\Chengji\Chengji\Program222.cs&quot;</span>;</span><br><span class="line"><span class="comment">//using var stream = new FileStream(fn, FileMode.OpenOrCreate);</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">var</span> stream = <span class="keyword">new</span> FileStream(fn,</span><br><span class="line">                                  FileMode.OpenOrCreate,</span><br><span class="line">                                  FileAccess.Write,</span><br><span class="line">                                  FileShare.ReadWrite,</span><br><span class="line">                                  <span class="number">200</span>,</span><br><span class="line">                                  FileOptions.DeleteOnClose);</span><br><span class="line"></span><br><span class="line">stream.WriteByte(<span class="number">255</span>);</span><br><span class="line">stream.WriteByte(<span class="number">0x65</span>);</span><br></pre></td></tr></table></figure>

<p>åœ¨ File ä¸­å­˜åœ¨è‹¥å¹²åˆ›å»ºæµçš„å¿«æ·æ–¹å¼:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fn = <span class="string">@&quot;E:\Workdir\Chengji\Chengji\Program222.cs&quot;</span>;</span><br><span class="line"><span class="comment">//using var stream = new FileStream(fn, FileMode.Open, FileAccess.Read);</span></span><br><span class="line"><span class="comment">//using var stream = File.Open(fn, FileMode.Open);</span></span><br><span class="line"><span class="comment">//using var stream = File.OpenRead(fn);</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">var</span> stream = File.OpenWrite(fn);</span><br></pre></td></tr></table></figure>

<h4 id="22-5-2-MemoryStream"><a href="#22-5-2-MemoryStream" class="headerlink" title="22.5.2. MemoryStream"></a>22.5.2. MemoryStream</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MemoryStream s = <span class="keyword">new</span> MemoryStream();</span><br><span class="line"><span class="built_in">byte</span>[] bs1 = Encoding.UTF8.GetBytes(<span class="string">&quot;ä¸­å›½&quot;</span>);</span><br><span class="line"><span class="built_in">byte</span>[] bs2 = Encoding.UTF8.GetBytes(<span class="string">&quot;yyds&quot;</span>);</span><br><span class="line">s.Write(bs1, <span class="number">0</span>, bs1.Length);</span><br><span class="line">s.Write(bs2, <span class="number">0</span>, bs2.Length);</span><br><span class="line">s.ToArray();</span><br></pre></td></tr></table></figure>

<h4 id="22-5-3-NetworkStream"><a href="#22-5-3-NetworkStream" class="headerlink" title="22.5.3. NetworkStream"></a>22.5.3. NetworkStream</h4><p>Socket!!!</p>
<h3 id="22-6-Reader-x2F-Writer"><a href="#22-6-Reader-x2F-Writer" class="headerlink" title="22.6. Reader&#x2F;Writer"></a>22.6. Reader&#x2F;Writer</h3><h4 id="22-6-1-StreamReader-x2F-StreamWriter"><a href="#22-6-1-StreamReader-x2F-StreamWriter" class="headerlink" title="22.6.1. StreamReader&#x2F;StreamWriter"></a>22.6.1. StreamReader&#x2F;StreamWriter</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fn = <span class="string">@&quot;E:\Workdir\Chengji\Chengji\Program.cs&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> s = File.OpenRead(fn);</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">var</span> reader = <span class="keyword">new</span> StreamReader(s);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Console.WriteLine(reader.ReadLine()); </span></span><br><span class="line"><span class="comment">//Console.WriteLine(reader.ReadLine()); </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//reader.Peek();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Console.WriteLine(reader.ReadToEnd());</span></span><br><span class="line"></span><br><span class="line">reader.Read();</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ç›´æ¥ä¼ å…¥æ–‡ä»¶å:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fn = <span class="string">@&quot;E:\Workdir\Chengji\Chengji\Program.cs&quot;</span>;</span><br><span class="line"><span class="comment">// using var reader = new StreamReader(File.OpenRead(fn));</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">var</span> reader = <span class="keyword">new</span> StreamReader(fn);</span><br></pre></td></tr></table></figure>

<p>åœ¨ File ä¸­æä¾›äº†å¤§é‡çš„å¿«æ·ä½¿ç”¨:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fn = <span class="string">@&quot;E:\Workdir\Chengji\Chengji\Program.cs&quot;</span>;</span><br><span class="line"><span class="keyword">using</span> StreamReader sr = File.OpenText(fn);</span><br><span class="line"><span class="keyword">using</span> StreamWriter sw1 = File.AppendText(fn);</span><br><span class="line"><span class="keyword">using</span> StreamWriter sw2 = File.CreateText(fn);</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> s1 = File.ReadAllText(fn);</span><br><span class="line"><span class="built_in">string</span>[] ar = File.ReadAllLines(fn);</span><br><span class="line">File.WriteAllText(fn, <span class="string">&quot;dkjskdjfskdfjds&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="22-6-2-StringReader-x2F-StringWriter"><a href="#22-6-2-StringReader-x2F-StringWriter" class="headerlink" title="22.6.2. StringReader&#x2F;StringWriter"></a>22.6.2. StringReader&#x2F;StringWriter</h4><p>ä½¿ç”¨åœºæ™¯: xxxxx</p>
<p>ä¼˜åŠ¿åŠ£åŠ¿: xxxxx</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reader = <span class="keyword">new</span> StringReader(<span class="string">&quot;hello, world&quot;</span>);</span><br><span class="line"><span class="comment">//Console.WriteLine(reader.Read());</span></span><br><span class="line"><span class="comment">//Console.WriteLine(reader.ReadToEnd());</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> writer = <span class="keyword">new</span> StringWriter();</span><br><span class="line"><span class="comment">//writer.WriteLine(&quot;hello&quot;);</span></span><br><span class="line"><span class="comment">//writer.WriteLine(&quot;world&quot;);</span></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    writer.WriteLine(i);</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(writer.ToString());</span><br></pre></td></tr></table></figure>

<h4 id="22-6-3-BinaryReader-x2F-BinaryWriter"><a href="#22-6-3-BinaryReader-x2F-BinaryWriter" class="headerlink" title="22.6.3. BinaryReader&#x2F;BinaryWriter"></a>22.6.3. BinaryReader&#x2F;BinaryWriter</h4><p>BinaryWriter:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fn = <span class="string">@&quot;E:\x11111.bin&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> writer = <span class="keyword">new</span> BinaryWriter(File.OpenWrite(fn));</span><br><span class="line">writer.Write(<span class="number">123</span>);</span><br><span class="line">writer.Write(<span class="literal">true</span>);</span><br><span class="line">writer.Write(<span class="string">&#x27;X&#x27;</span>);</span><br><span class="line">writer.Write(<span class="number">33.3</span>);</span><br><span class="line">writer.Flush();</span><br><span class="line"><span class="keyword">return</span> writer;</span><br></pre></td></tr></table></figure>

<p>BinaryReader:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fn = <span class="string">@&quot;E:\x11111.bin&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> reader = <span class="keyword">new</span> BinaryReader(File.OpenRead(fn));</span><br><span class="line"><span class="built_in">int</span> i = reader.ReadInt32();</span><br><span class="line"><span class="built_in">bool</span> b = reader.ReadBoolean();</span><br><span class="line"><span class="built_in">char</span> c = reader.ReadChar();</span><br><span class="line">Console.WriteLine(c);</span><br></pre></td></tr></table></figure>

<h4 id="22-6-4-XmlReader-x2F-XmlWriter"><a href="#22-6-4-XmlReader-x2F-XmlWriter" class="headerlink" title="22.6.4. XmlReader&#x2F;XmlWriter"></a>22.6.4. XmlReader&#x2F;XmlWriter</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = <span class="string">@&quot;e:\hello.xml&quot;</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">var</span> xw = XmlWriter.Create(File.OpenWrite(fn), <span class="keyword">new</span> XmlWriterSettings &#123; Indent = <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br><span class="line">List&lt;<span class="built_in">string</span>&gt; books = <span class="keyword">new</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;æˆ˜äº‰ä¸å’Œå¹³&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ‚²æƒ¨çš„ä¸–ç•Œ&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä¾›è´§å•†æ‰“å¼€&quot;</span>,</span><br><span class="line">    <span class="string">&quot;jQuery&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Csharp&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xw.WriteStartDocument();</span><br><span class="line">xw.WriteStartElement(<span class="string">&quot;book&quot;</span>);</span><br><span class="line">xw.WriteComment(<span class="string">&quot;æˆ‘ä¹Ÿä¸çŸ¥é“&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> book <span class="keyword">in</span> books)</span><br><span class="line">&#123;</span><br><span class="line">    xw.WriteElementString(<span class="string">&quot;name&quot;</span>, book);</span><br><span class="line">&#125;</span><br><span class="line">xw.WriteEndElement();</span><br><span class="line">xw.Flush();</span><br></pre></td></tr></table></figure>

<h3 id="22-7-FileSystemWatching"><a href="#22-7-FileSystemWatching" class="headerlink" title="22.7. FileSystemWatching"></a>22.7. FileSystemWatching</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dn = <span class="string">@&quot;e:\Tmp&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> watcher = <span class="keyword">new</span> FileSystemWatcher</span><br><span class="line">&#123;</span><br><span class="line">    Path = dn,</span><br><span class="line">    IncludeSubdirectories = <span class="literal">true</span>,</span><br><span class="line">    EnableRaisingEvents = <span class="literal">true</span></span><br><span class="line">&#125;;</span><br><span class="line">watcher.Changed += (s, e) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;æœ‰ä¸œè¥¿å‘ç”Ÿäº†å˜åŒ–: <span class="subst">&#123;e.Name&#125;</span>, <span class="subst">&#123;e.ChangeType&#125;</span>&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">watcher.Created += (s, e) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;åˆ›å»ºäº†ä¸€ç‚¹ä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘ä¹Ÿä¸çŸ¥éƒ½ã€‚å¯èƒ½æ˜¯ç—…æ¯’æŠŠ...&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">Console.ReadKey();</span><br></pre></td></tr></table></figure>

<h2 id="23-Socket"><a href="#23-Socket" class="headerlink" title="23. Socket"></a>23. Socket</h2><h3 id="23-1-OSI-æ¨¡å‹"><a href="#23-1-OSI-æ¨¡å‹" class="headerlink" title="23.1. OSI æ¨¡å‹"></a>23.1. OSI æ¨¡å‹</h3><ul>
<li>è®¡ç®—æœºç½‘ç»œåˆšèµ·æ­¥çš„é˜¶æ®µï¼Œå¾ˆå¤šç§æœ‰åè®® (Protocol) å…ˆåå‡ºç°</li>
<li>åé¢ ISO (å›½é™…æ ‡å‡†ç»„ç»‡) å‡ºé¢æ¨å‡ºäº† OSI (Open System Interconnection) åè®®<ul>
<li>åˆ†ä¸º 7 å±‚ï¼Œæ¯æ¬¡éƒ½æä¾›å•ç‹¬çš„æœåŠ¡ï¼Œå±‚ä¸å±‚ä¹‹é—´ç´§å¯†åˆä½œ</li>
<li>å¤§è€Œå…¨ï¼Œä»åº•å±‚çš„ç½‘çº¿æ¥å£ï¼Œåˆ°é«˜å±‚çš„åº”ç”¨åè®®ï¼Œæ— æ‰€ä¸åŒ…</li>
<li>ç‡å…ˆæå‡ºäº†æœåŠ¡ã€åˆ†å±‚ã€åè®®ã€ä¹‹ç±»çš„æ¦‚å¿µ</li>
</ul>
</li>
</ul>
<p><img src="http://yaoqisan.local:7373/html/dotnet/img/osi-1.png" alt="osi-1.png"></p>
<p>ä½†æ˜¯:</p>
<ul>
<li>å®ƒå¤ªå¤æ‚äº† (<a target="_blank" rel="noopener" href="http://yaoqisan.local:7373/html/dotnet/img/tcpip-111.png">å¤§è€Œå…¨çš„ OSI æ¨¡å‹å›¾ç‰‡</a>)</li>
<li>åˆ°ç°åœ¨ä¸ºæ­¢, Windows æ“ä½œç³»ç»Ÿä¹Ÿæ²¡æœ‰å®Œå…¨å®ç° OSI åè®®</li>
<li>åè€Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå›´ç»•ç€ TCP å’Œ IP è¿™ä¸¤ç§åè®®ï¼Œè¡ç”Ÿå‡ºäº† TCP&#x2F;IP Protocol Stack (åè®®æ ˆ) çš„æ¦‚å¿µï¼Œå¹¶ä¸”è¢«å¹¿æ³›ä½¿ç”¨</li>
<li>TCP&#x2F;IP åè®®æ ˆæ…¢æ…¢å°±æˆä¸ºäº†äº‹å®ä¸Šçš„æ ‡å‡†ï¼›ä½†æ˜¯å­¦ä¹ çš„æ—¶å€™ï¼Œç†è®ºä¸Šè¿˜æ˜¯ä»¥ OSI ä¸ºåŸºå‡†</li>
<li>TCP&#x2F;IP å‡ºç°åœ¨ OSI æ¨¡å‹ä¹‹å‰ï¼Œä½†æ˜¯åé¢ OSI å‡ºç°ä¹‹åï¼ŒTCP&#x2F;IP å€Ÿé‰´äº†å…¶ä¸­å¾ˆå¤šæƒ³æ³•ï¼ŒåŒ…æ‹¬åˆ†å±‚</li>
<li>æ­£å› ä¸ºå¦‚æ­¤ï¼ŒOSI æ¨¡å‹ï¼Œç°åœ¨å˜æˆäº† <strong>å‚è€ƒ</strong> æ¨¡å‹</li>
</ul>
<h3 id="23-2-TCP-x2F-IP-åè®®æ ˆ"><a href="#23-2-TCP-x2F-IP-åè®®æ ˆ" class="headerlink" title="23.2. TCP&#x2F;IP åè®®æ ˆ"></a>23.2. TCP&#x2F;IP åè®®æ ˆ</h3><p><img src="http://yaoqisan.local:7373/html/dotnet/img/tcpipstack.png" alt="tcpipstack.png"></p>
<p><img src="http://yaoqisan.local:7373/html/dotnet/img/tcpip-2222.png" alt="tcpip-2222.png"></p>
<p><img src="http://yaoqisan.local:7373/html/dotnet/img/tcpip-3332.png" alt="tcpip-3332.png"></p>
<h3 id="23-3-Uri-x2F-UriBuilder"><a href="#23-3-Uri-x2F-UriBuilder" class="headerlink" title="23.3. Uri&#x2F;UriBuilder"></a>23.3. Uri&#x2F;UriBuilder</h3><p>URI (Uniform Resource Identifier), ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦:</p>
<ul>
<li>url: Uniform Resource Locator, ç»Ÿä¸€èµ„æºå®šä½å™¨</li>
<li>urn: Uniform Resource Name, ç»Ÿä¸€èµ„æºåç§°</li>
</ul>
<p>ç¤ºä¾‹:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ftp:<span class="comment">//ftp.is.co.za/rfc/rfc1808.txt (also a URL because of the protocol)</span></span><br><span class="line">http:<span class="comment">//www.ietf.org/rfc/rfc2396.txt (also a URL because of the protocol)</span></span><br><span class="line">ldap:<span class="comment">//[2001:db8::7]/c=GB?objectClass?one (also a URL because of the protocol)</span></span><br><span class="line">mailto:John.Doe@example.com (also a URL because of the protocol)</span><br><span class="line">news:comp.infosystems.www.servers.unix (also a URL because of the protocol)</span><br><span class="line">tel:+<span class="number">1</span><span class="number">-816</span><span class="number">-555</span><span class="number">-1212</span></span><br><span class="line">telnet:<span class="comment">//192.0.2.16:80/ (also a URL because of the protocol)</span></span><br><span class="line">urn:oasis:names:specification:docbook:dtd:xml:<span class="number">4.1</span><span class="number">.2</span></span><br></pre></td></tr></table></figure>

<p>Uri ç”¨äºç»“æ„åŒ– URL åœ°å€:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€ä¸ªå®Œæ•´çš„ URL åœ°å€åŒ…æ‹¬è‹¥å¹²éƒ¨åˆ†:</span></span><br><span class="line"><span class="comment">//   åè®®://[ç”¨æˆ·å@]åœ°å€[:ç«¯å£]/è·¯å¾„?æŸ¥è¯¢å‚æ•°#æ®µ</span></span><br><span class="line"><span class="comment">//   schema://host:port/path?query#fragment</span></span><br><span class="line"><span class="comment">//   schema://host</span></span><br><span class="line"><span class="comment">//   http://baidu.com</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">&quot;http://wwww.baidu.com:80/aaa/index.html?name=å¼ ä¸‰#333&quot;</span>;</span><br><span class="line">Uri uri = <span class="keyword">new</span> Uri(s);</span><br><span class="line">Console.WriteLine(uri.Host);</span><br><span class="line">Console.WriteLine(uri.Port);</span><br><span class="line">Console.WriteLine(uri.LocalPath);</span><br><span class="line">Console.WriteLine(uri.AbsolutePath);</span><br><span class="line">Console.WriteLine(uri.Query);</span><br><span class="line">Console.WriteLine(uri.Fragment);</span><br><span class="line"></span><br><span class="line">Console.WriteLine();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(Uri.EscapeDataString(s));</span><br><span class="line">Console.WriteLine(Uri.EscapeUriString(s));</span><br><span class="line">Console.WriteLine(Uri.EscapeDataString(<span class="string">&quot;å¼ ä¸‰&quot;</span>));</span><br><span class="line">Console.WriteLine(Uri.UnescapeDataString(<span class="string">&quot;%3d&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>UriBuilder:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ub = <span class="keyword">new</span> UriBuilder();</span><br><span class="line">ub.Scheme = <span class="string">&quot;https&quot;</span>;</span><br><span class="line">ub.Host = <span class="string">&quot;182.23.444.55&quot;</span>;</span><br><span class="line">ub.Port = <span class="number">444</span>;</span><br><span class="line">ub.Path = <span class="string">&quot;/index.html&quot;</span>;</span><br><span class="line">ub.Query = <span class="string">&quot;?name=zhangsan&quot;</span>;</span><br><span class="line">ub.UserName = <span class="string">&quot;admin&quot;</span>;</span><br><span class="line">ub.Password = <span class="string">&quot;admin2&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> uri = ub.Uri;</span><br><span class="line">Console.WriteLine(uri);</span><br></pre></td></tr></table></figure>

<h3 id="23-4-IpAddress-x2F-Dns"><a href="#23-4-IpAddress-x2F-Dns" class="headerlink" title="23.4. IpAddress&#x2F;Dns"></a>23.4. IpAddress&#x2F;Dns</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ipStr = <span class="string">&quot;8.8.8.8&quot;</span>; <span class="comment">// 1.1.1.1 DNS æœåŠ¡å™¨</span></span><br><span class="line"><span class="comment">//IPAddress ip = new IPAddress(ipStr);</span></span><br><span class="line">IPAddress ip = IPAddress.Parse(ipStr);</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;ip.Address&#125;</span>, <span class="subst">&#123;ip.AddressFamily&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">IPAddress[] ips = Dns.GetHostAddresses(<span class="string">&quot;www.baidu.com&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> i <span class="keyword">in</span> ips)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">IPHostEntry ih = Dns.GetHostEntry(<span class="string">&quot;www.bing.com&quot;</span>);</span><br><span class="line">Console.WriteLine(ih.HostName);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> al <span class="keyword">in</span> ih.Aliases)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(al);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="23-5-Socket"><a href="#23-5-Socket" class="headerlink" title="23.5. Socket"></a>23.5. Socket</h3><p>æ’åº§æ¥äº†ã€‚</p>
<h4 id="23-5-1-TCP-vs-UDP"><a href="#23-5-1-TCP-vs-UDP" class="headerlink" title="23.5.1. TCP vs UDP"></a>23.5.1. TCP vs UDP</h4><ul>
<li>TCP (Transmission Control Protocol) ä¼ è¾“æ§åˆ¶åè®®:<ul>
<li>å¯é çš„è¿æ¥</li>
<li>ä¸‰æ¬¡æ¡æ‰‹è·Ÿå››æ¬¡æŒ¥æ‰‹çš„è¿æ¥è·Ÿæ–­å¼€</li>
<li>ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå­˜åœ¨ä¸¢åŒ…çš„è¯</li>
</ul>
</li>
<li>UDP (User Datagram Protocol) ç”¨æˆ·æ•°æ®æŠ¥åè®®:<ul>
<li>ä¸éœ€è¦æ¡æ‰‹ã€æŒ¥æ‰‹ï¼Œç›´æ¥å‘æ•°æ®</li>
<li>å…·å¤‡ä¸å¯é æ€§</li>
<li>ä½†æ˜¯ä¿éšœé€Ÿåº¦</li>
</ul>
</li>
</ul>
<p><img src="http://yaoqisan.local:7373/html/dotnet/img/tcp3333.png" alt="tcp3333.png"></p>
<h4 id="23-5-2-Socket-x2F-TCP"><a href="#23-5-2-Socket-x2F-TCP" class="headerlink" title="23.5.2. Socket&#x2F;TCP"></a>23.5.2. Socket&#x2F;TCP</h4><ul>
<li>TCP&#x2F;IP åè®®æ ˆæ˜¯ç”±æ“ä½œç³»ç»Ÿ (å†…æ ¸) å®ç°çš„</li>
<li>Socket æ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„é¢å‘ TCP&#x2F;IP åè®®ç¼–ç¨‹çš„æ¥å£</li>
<li>C# ä¸­ï¼Œä½¿ç”¨ <code>Socket</code> å¯¹è±¡ï¼Œæ¥å®Œæˆå¯¹ç³»ç»Ÿ API è°ƒç”¨</li>
</ul>
<h5 id="23-5-2-1-åŸºæœ¬è¯­æ³•"><a href="#23-5-2-1-åŸºæœ¬è¯­æ³•" class="headerlink" title="23.5.2.1. åŸºæœ¬è¯­æ³•"></a>23.5.2.1. åŸºæœ¬è¯­æ³•</h5><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TCP ç¼–ç¨‹ä¸‰æ¿æ–§:</span></span><br><span class="line"><span class="comment">//  1. bind (ç»‘å®š)</span></span><br><span class="line"><span class="comment">//  2. listen (ç›‘å¬)</span></span><br><span class="line"><span class="comment">//  3. accept (æ¥å—)</span></span><br><span class="line"></span><br><span class="line">Socket server = <span class="keyword">new</span> Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);</span><br><span class="line"><span class="comment">// ç»‘å®šç›‘å¬æ¥è‡ªå“ªäº› IP åœ°å€çš„è¯·æ±‚ï¼Œç›‘å¬å“ªä¸ªç«¯å£ (1024)</span></span><br><span class="line">server.Bind(<span class="keyword">new</span> IPEndPoint(IPAddress.Any, <span class="number">16789</span>));</span><br><span class="line"><span class="comment">// å¼€å§‹ç›‘å¬</span></span><br><span class="line">server.Listen();</span><br><span class="line"><span class="comment">// ç­‰å¾…æ¥è‡ªç”¨æˆ·çš„è¯·æ±‚</span></span><br><span class="line">Socket s = server.Accept();</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;æ¥å—åˆ°ä¸€ä¸ªç”¨æˆ·çš„è¯·æ±‚ <span class="subst">&#123;s&#125;</span>&quot;</span>);</span><br></pre></td></tr></table></figure>

<h5 id="23-5-2-2-ç®€å•çš„-HTTP-æœåŠ¡å™¨"><a href="#23-5-2-2-ç®€å•çš„-HTTP-æœåŠ¡å™¨" class="headerlink" title="23.5.2.2. ç®€å•çš„ HTTP æœåŠ¡å™¨"></a>23.5.2.2. ç®€å•çš„ HTTP æœåŠ¡å™¨</h5><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Socket server = <span class="keyword">new</span> Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);</span><br><span class="line"><span class="comment">// ç»‘å®šç›‘å¬æ¥è‡ªå“ªäº› IP åœ°å€çš„è¯·æ±‚ï¼Œç›‘å¬å“ªä¸ªç«¯å£ (1024)</span></span><br><span class="line">server.Bind(<span class="keyword">new</span> IPEndPoint(IPAddress.Any, <span class="number">16780</span>));</span><br><span class="line"><span class="comment">// å¼€å§‹ç›‘å¬</span></span><br><span class="line">server.Listen(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ç­‰å¾…æ¥è‡ªç”¨æˆ·çš„è¯·æ±‚</span></span><br><span class="line">    Socket s = server.Accept();</span><br><span class="line">    Task.Run(() =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;-------- ç¬¬ <span class="subst">&#123;++count&#125;</span> ä¸ªè¯·æ±‚ --------\n\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ•°æ®çš„è¯»å–</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">byte</span>[] buf = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">1020000</span>];</span><br><span class="line">        <span class="built_in">int</span> n = s.Receive(buf);</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;æ¥å—åˆ°ä¸€ä¸ªç”¨æˆ·çš„è¯·æ±‚ <span class="subst">&#123;s&#125;</span>&quot;</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;å®ƒå‘é€çš„æ•°æ®æ˜¯ <span class="subst">&#123;Encoding.UTF8.GetString(buf, <span class="number">0</span>, n)&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å“åº”å†…å®¹</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> content = <span class="string">&quot;hello, world&quot;</span>;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        sb.Append(<span class="string">&quot;HTTP/1.1 200 OK\n&quot;</span>);</span><br><span class="line">        sb.Append(<span class="string">$&quot;Content-Type: <span class="subst">&#123;content.Length&#125;</span>\n&quot;</span>);</span><br><span class="line">        sb.Append(<span class="string">&quot;Content-Type: text/html; charset=utf-8\n&quot;</span>);</span><br><span class="line">        sb.Append(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">        sb.Append(content);</span><br><span class="line"></span><br><span class="line">        s.Send(Encoding.UTF8.GetBytes(sb.ToString()));</span><br><span class="line"></span><br><span class="line">        s.Shutdown(SocketShutdown.Both);</span><br><span class="line">        s.Close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="23-5-2-3-ç®€å•çš„å®¢æˆ·ç«¯å®ç°"><a href="#23-5-2-3-ç®€å•çš„å®¢æˆ·ç«¯å®ç°" class="headerlink" title="23.5.2.3. ç®€å•çš„å®¢æˆ·ç«¯å®ç°"></a>23.5.2.3. ç®€å•çš„å®¢æˆ·ç«¯å®ç°</h5><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Socket socket = <span class="keyword">new</span> Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);</span><br><span class="line"></span><br><span class="line">socket.Connect(IPAddress.Loopback, <span class="number">16780</span>);</span><br><span class="line"></span><br><span class="line">socket.Send(Encoding.UTF8.GetBytes(<span class="string">&quot;hello&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">byte</span>[] res = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">1024</span>];</span><br><span class="line"><span class="built_in">int</span> n = socket.Receive(res);</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;æˆ‘å¾—åˆ°çš„å“åº”å†…å®¹æ˜¯ <span class="subst">&#123;Encoding.UTF8.GetString(res)&#125;</span>&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="23-5-3-Socket-x2F-UDP"><a href="#23-5-3-Socket-x2F-UDP" class="headerlink" title="23.5.3. Socket&#x2F;UDP"></a>23.5.3. Socket&#x2F;UDP</h4><p>Sender:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);</span><br><span class="line"></span><br><span class="line">while (true)</span><br><span class="line">&#123;</span><br><span class="line">    Console.Write(&quot;è¯·è¾“å…¥ä½ è¦å‘é€çš„å†…å®¹: &quot;);</span><br><span class="line">    string content = Console.ReadLine();</span><br><span class="line">    socket.SendTo(Encoding.UTF8.GetBytes(content), new IPEndPoint(IPAddress.Loopback, 9897));</span><br><span class="line">    Console.WriteLine(&quot;å‘é€æˆåŠŸ!&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Receiver:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);</span><br><span class="line">socket.Bind(new IPEndPoint(IPAddress.Any, 9897));</span><br><span class="line"></span><br><span class="line">Console.WriteLine(&quot;åˆ›å»ºæˆåŠŸï¼Œå‡†å¤‡å·¥ä½œ...&quot;);</span><br><span class="line"></span><br><span class="line">byte[] buf = new byte[10023];</span><br><span class="line">var ep = (EndPoint) new IPEndPoint(IPAddress.Any, 9897);</span><br><span class="line">while (true)</span><br><span class="line">&#123;</span><br><span class="line">    int n = socket.ReceiveFrom(buf, ref ep);</span><br><span class="line">    Console.WriteLine($&quot;æ¥æ”¶åˆ°æ¥è‡ª &#123;(ep as IPEndPoint).Address&#125; çš„ä¿¡æ¯:&quot;);</span><br><span class="line">    Console.WriteLine(Encoding.UTF8.GetString(buf, 0, n));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="23-5-4-é€šè¿‡-NetworkStream-ç®€åŒ–å¯¹-Socket-è¯»å†™çš„æ“ä½œ"><a href="#23-5-4-é€šè¿‡-NetworkStream-ç®€åŒ–å¯¹-Socket-è¯»å†™çš„æ“ä½œ" class="headerlink" title="23.5.4. é€šè¿‡ NetworkStream ç®€åŒ–å¯¹ Socket è¯»å†™çš„æ“ä½œ"></a>23.5.4. é€šè¿‡ NetworkStream ç®€åŒ–å¯¹ Socket è¯»å†™çš„æ“ä½œ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">using var s = new NetworkStream(socket);</span><br><span class="line"></span><br><span class="line">var sr = new StreamReader(s);</span><br><span class="line">Console.WriteLine($&quot;æˆ‘æ¥æ”¶åˆ°äº†æ•°æ®: &#123;sr.ReadToEnd()&#125;&quot;);</span><br><span class="line"></span><br><span class="line">var sw = new StreamWriter(s);</span><br><span class="line">sw.WriteLine(&quot;hello, world&quot;);</span><br></pre></td></tr></table></figure>

<h4 id="23-5-5-é£é¸½-x2F-FeiQ"><a href="#23-5-5-é£é¸½-x2F-FeiQ" class="headerlink" title="23.5.5. é£é¸½&#x2F;FeiQ"></a>23.5.5. é£é¸½&#x2F;FeiQ</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ufe_1/article/details/47170615">https://blog.csdn.net/ufe_1/article/details/47170615</a></p>
<h3 id="23-6-TcpClient-x2F-TcpListener"><a href="#23-6-TcpClient-x2F-TcpListener" class="headerlink" title="23.6. TcpClient&#x2F;TcpListener"></a>23.6. TcpClient&#x2F;TcpListener</h3><p>æœåŠ¡å™¨ç«¯:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var listener = new TcpListener(IPAddress.Any, 8899);</span><br><span class="line">listener.Start();</span><br><span class="line"></span><br><span class="line">while (true)</span><br><span class="line">&#123;</span><br><span class="line">    TcpClient tc = listener.AcceptTcpClient();</span><br><span class="line">    Task.Run(() =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(&quot;---&quot;);</span><br><span class="line">        while (true)</span><br><span class="line">        &#123;</span><br><span class="line">            var reader = new StreamReader(tc.GetStream());</span><br><span class="line">            Console.WriteLine($&quot;æ¥æ”¶åˆ°äº†ä¿¡æ¯: &#123;reader.ReadLine()&#125;&quot;);</span><br><span class="line">            Task.Delay(1000).Wait();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var tc = new TcpClient();</span><br><span class="line">tc.Connect(IPAddress.Loopback, 8899);</span><br><span class="line">using var sw = new StreamWriter(tc.GetStream());</span><br><span class="line">while (true)</span><br><span class="line">&#123;</span><br><span class="line">    Console.Write(&quot;å†…å®¹: &quot;);</span><br><span class="line">    string c = Console.ReadLine();</span><br><span class="line"></span><br><span class="line">    sw.WriteLine(c);</span><br><span class="line">    sw.Flush();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="23-7-UdpClient"><a href="#23-7-UdpClient" class="headerlink" title="23.7. UdpClient"></a>23.7. UdpClient</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var uc = new UdpClient();</span><br><span class="line">var s = Encoding.UTF8.GetBytes(&quot;hello&quot;);</span><br><span class="line">uc.Send(s, s.Length, new IPEndPoint(IPAddress.Loopback, 4344));</span><br></pre></td></tr></table></figure>

<h3 id="23-8-HttpClient-x2F-HttpListener"><a href="#23-8-HttpClient-x2F-HttpListener" class="headerlink" title="23.8. HttpClient&#x2F;HttpListener"></a>23.8. HttpClient&#x2F;HttpListener</h3><h4 id="23-8-1-HttpListener"><a href="#23-8-1-HttpListener" class="headerlink" title="23.8.1. HttpListener"></a>23.8.1. HttpListener</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">var root = &quot;e:/myhtml/&quot;;</span><br><span class="line"></span><br><span class="line">var webServer = new HttpListener();</span><br><span class="line">webServer.Prefixes.Add(&quot;http://localhost:8099/&quot;);</span><br><span class="line">webServer.Start();</span><br><span class="line"></span><br><span class="line">while (true)</span><br><span class="line">&#123;</span><br><span class="line">    HttpListenerContext context = webServer.GetContext();</span><br><span class="line"></span><br><span class="line">    Task.Run(() =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        var req = context.Request;</span><br><span class="line">        var resp = context.Response;</span><br><span class="line"></span><br><span class="line">        Console.WriteLine(req.RemoteEndPoint.Address);</span><br><span class="line">        using (var sw = new StreamWriter(resp.OutputStream))</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            var path = req.Url.LocalPath;</span><br><span class="line">            var fullPath = Path.Combine(root, path.Substring(1));</span><br><span class="line">            Console.WriteLine(fullPath);</span><br><span class="line">            if (Path.GetExtension(path) == &quot;.html&quot;)</span><br><span class="line">            &#123;</span><br><span class="line">                if (File.Exists(fullPath))</span><br><span class="line">                &#123;</span><br><span class="line">                    var content = File.ReadAllText(fullPath);</span><br><span class="line">                    Console.WriteLine(content);</span><br><span class="line">                    sw.WriteLine(content);</span><br><span class="line">                &#125;</span><br><span class="line">                else</span><br><span class="line">                &#123;</span><br><span class="line">                    resp.ContentType = &quot;text/html; charset=\&quot;utf-8\&quot;&quot;;</span><br><span class="line">                    sw.WriteLine(&quot;æ²¡æœ‰æ‰¾åˆ°ç½‘é¡µ&quot;);</span><br><span class="line">                    resp.StatusCode = 404;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        resp.Close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="23-8-2-HttpWebRequest-x2F-WebClient-x2F-HttpClient"><a href="#23-8-2-HttpWebRequest-x2F-WebClient-x2F-HttpClient" class="headerlink" title="23.8.2. HttpWebRequest&#x2F;WebClient&#x2F;HttpClient"></a>23.8.2. HttpWebRequest&#x2F;WebClient&#x2F;HttpClient</h4><h2 id="24-Database"><a href="#24-Database" class="headerlink" title="24. Database"></a>24. Database</h2><h3 id="24-1-ADO-NET"><a href="#24-1-ADO-NET" class="headerlink" title="24.1. ADO.NET"></a>24.1. ADO.NET</h3><h4 id="24-1-1-SqlConnection-x2F-SqlCommand-x2F-SqlDataReader"><a href="#24-1-1-SqlConnection-x2F-SqlCommand-x2F-SqlDataReader" class="headerlink" title="24.1.1. SqlConnection &#x2F; SqlCommand &#x2F; SqlDataReader"></a>24.1.1. SqlConnection &#x2F; SqlCommand &#x2F; SqlDataReader</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">static void Main()</span><br><span class="line">&#123;</span><br><span class="line">    // ç¬¬ä¸€æ­¥: åˆ›å»ºè¿æ¥</span><br><span class="line">    //using var conn = new SqlConnection(&quot;server=localhost;database=lagou;uid=sa;pwd=sa&quot;);</span><br><span class="line">    //using var conn = new SqlConnection(&quot;server=.;database=lagou;uid=sa;pwd=sa&quot;);</span><br><span class="line">    using var conn = new SqlConnection(&quot;server=.;database=lagou;integrated security=SSPI&quot;);</span><br><span class="line"></span><br><span class="line">    // ç¬¬äºŒæ­¥: ç»„ç»‡æŸ¥è¯¢è¯­å¥</span><br><span class="line">    var command = new SqlCommand(&quot;select top 5 position, city, salary_min from lagou_position&quot;, conn);</span><br><span class="line"></span><br><span class="line">    // ç¬¬ä¸‰æ­¥: æ‰“å¼€æ•°æ®åº“ï¼Œå‡†å¤‡æŸ¥è¯¢</span><br><span class="line">    conn.Open();</span><br><span class="line"></span><br><span class="line">    // ç¬¬å››æ­¥: æŸ¥è¯¢</span><br><span class="line">    SqlDataReader reader = command.ExecuteReader();</span><br><span class="line">    while (reader.Read())</span><br><span class="line">    &#123;</span><br><span class="line">        var position = reader[0];</span><br><span class="line">        var city = reader[1];</span><br><span class="line">        var salary = reader[2];</span><br><span class="line">        Console.WriteLine($&quot;&#123;position&#125;: &#123;city&#125;/&#123;salary&#125;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="24-1-2-ExecuteScalar-x2F-SQL-Injection-x2F-Parameters"><a href="#24-1-2-ExecuteScalar-x2F-SQL-Injection-x2F-Parameters" class="headerlink" title="24.1.2. ExecuteScalar &#x2F; SQL Injection &#x2F; Parameters"></a>24.1.2. ExecuteScalar &#x2F; SQL Injection &#x2F; Parameters</h4><p>åœ¨ç æµ·ï¼ŒSalary_min æœ€é«˜çš„ C# å²—ä½çš„ Salary_max æ˜¯å¤šå°‘:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">class Program</span><br><span class="line">&#123;</span><br><span class="line">    static void Main()</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(GetSalayMaxFromCity(&quot;ç æµ·&quot;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static void è¿™å°±æ˜¯SQLæ³¨å…¥é—®é¢˜()</span><br><span class="line">    &#123;</span><br><span class="line">        var city = &quot;ç æµ·&#x27;;drop table lagou_position;select * from lagou_position where 1=&#x27;&quot;;</span><br><span class="line">        var sql0 = $&quot;select * from lagou_position where city = &#x27;&#123;city&#125;&#x27;&quot;;</span><br><span class="line">        Console.WriteLine(sql0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static double GetSalayMaxFromCity(string city)</span><br><span class="line">    &#123;</span><br><span class="line">        // ç¬¬ä¸€æ­¥: åˆ›å»ºè¿æ¥</span><br><span class="line">        using var conn = new SqlConnection(&quot;server=.;database=lagou;uid=sa;pwd=sa&quot;);</span><br><span class="line"></span><br><span class="line">        // ç¬¬äºŒæ­¥: ç»„ç»‡è¯­å¥</span><br><span class="line">        var sql = $&quot;select top 1 salary_max from lagou_position where city = &#x27;&#123;city&#125;&#x27; and (position like &#x27;%c#%&#x27; or position like &#x27;%.net%&#x27;) order by salary_min desc&quot;;</span><br><span class="line">        var command = new SqlCommand(sql, conn);</span><br><span class="line"></span><br><span class="line">        // ç¬¬ä¸‰æ­¥: æ‰“å¼€æ•°æ®åº“</span><br><span class="line">        conn.Open();</span><br><span class="line"></span><br><span class="line">        // ç¬¬å››æ­¥: æŸ¥è¯¢</span><br><span class="line">        double salaryMax = (double)command.ExecuteScalar();</span><br><span class="line"></span><br><span class="line">        return salaryMax;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§£å†³ SQL æ³¨å…¥ï¼Œæœ€æœ´ç´ çš„æ–¹å¼ï¼Œæ˜¯å¯¹ä¼ å…¥çš„å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œæ›¿æ¢:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// ä½†æ˜¯è¦æ³¨æ„ï¼Œè¿™ç§æ–¹å¼ç»å¯¹ä¸å¯èƒ½ 100% é˜²æ­¢æ³¨å…¥</span><br><span class="line">city = city.Replace(&#x27;-&#x27;, &#x27;ã€&#x27;);</span><br><span class="line">city = city.Replace(&#x27;\&#x27;&#x27;, &#x27;â€™&#x27;);</span><br></pre></td></tr></table></figure>

<p>Parameters å¯ä»¥ a) ç®€åŒ–ä»£ç  b) é˜²æ­¢ SQL æ³¨å…¥:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">class Program</span><br><span class="line">&#123;</span><br><span class="line">    static void Main()</span><br><span class="line">    &#123;</span><br><span class="line">        GetSalayMaxFromCity(&quot;ç æµ·&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static void è¿™å°±æ˜¯SQLæ³¨å…¥é—®é¢˜()</span><br><span class="line">    &#123;</span><br><span class="line">        var city = &quot;ç æµ·&#x27;;drop table lagou_position;select * from lagou_position where 1=&#x27;&quot;;</span><br><span class="line"></span><br><span class="line">        var sql0 = $&quot;select * from lagou_position where city = &#x27;&#123;city&#125;&#x27;&quot;;</span><br><span class="line">        Console.WriteLine(sql0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static void GetSalayMaxFromCity(string city)</span><br><span class="line">    &#123;</span><br><span class="line">        // ç¬¬ä¸€æ­¥: åˆ›å»ºè¿æ¥</span><br><span class="line">        using var conn = new SqlConnection(&quot;server=.;database=lagou;uid=sa;pwd=sa&quot;);</span><br><span class="line"></span><br><span class="line">        // ç¬¬äºŒæ­¥: ç»„ç»‡è¯­å¥</span><br><span class="line">        var command = new SqlCommand(&quot;select top 5 city, position from lagou_position where city=@xxx and salary_min &gt; @aaa&quot;, conn);</span><br><span class="line"></span><br><span class="line">        //command.Parameters.AddWithValue(&quot;xxx&quot;, city); // ç»‘å®šåˆ°äº† xxx ä½ç½®</span><br><span class="line">        //command.Parameters.AddWithValue(&quot;aaa&quot;, 20);</span><br><span class="line"></span><br><span class="line">        command.Parameters.AddRange(new[]</span><br><span class="line">        &#123;</span><br><span class="line">            new SqlParameter(&quot;xxx&quot;, SqlDbType.VarChar) &#123;Value = city&#125;,</span><br><span class="line">            new SqlParameter(&quot;aaa&quot;, SqlDbType.Int) &#123;Value = 20&#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //command.Parameters.Add(&quot;xxx&quot;, SqlDbType.VarChar);</span><br><span class="line">        //command.Parameters[&quot;xxx&quot;].Value = city;</span><br><span class="line"></span><br><span class="line">        //var param = new SqlParameter(&quot;xxx&quot;, SqlDbType.VarChar);</span><br><span class="line">        //param.Value = city;</span><br><span class="line">        //command.Parameters.Add(param);</span><br><span class="line"></span><br><span class="line">        //command.Parameters.Add(new SqlParameter(&quot;xxx&quot;, SqlDbType.VarChar) &#123;Value = city&#125;);</span><br><span class="line"></span><br><span class="line">        // ç¬¬ä¸‰æ­¥: æ‰“å¼€æ•°æ®åº“</span><br><span class="line">        conn.Open();</span><br><span class="line"></span><br><span class="line">        // ç¬¬å››æ­¥: æŸ¥è¯¢</span><br><span class="line">        using var reader = command.ExecuteReader();</span><br><span class="line">        while (reader.Read())</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine($&quot;-- &#123;reader[0]&#125;: &#123;reader[&quot;position&quot;]&#125;&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="24-1-3-SqlDataReader-vs-SqlDataAdapter-x2F-DataTable"><a href="#24-1-3-SqlDataReader-vs-SqlDataAdapter-x2F-DataTable" class="headerlink" title="24.1.3. SqlDataReader vs SqlDataAdapter&#x2F;DataTable"></a>24.1.3. SqlDataReader vs SqlDataAdapter&#x2F;DataTable</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    using var conn = DbHelper.GetConnection();</span><br><span class="line">    var command = new SqlCommand(&quot;select * from students&quot;, conn);</span><br><span class="line">    using var reader = command.ExecuteReader();</span><br><span class="line"></span><br><span class="line">    DataTable dataTable = new DataTable();</span><br><span class="line">    dataTable.Load(reader);</span><br><span class="line"></span><br><span class="line">    foreach (DataRow row in dataTable.Rows)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine($&quot;&#123;row[0]&#125;:&#123;row[1]&#125;:&#123;row[2]&#125;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    DataTable dataTable = new DataTable();</span><br><span class="line"></span><br><span class="line">    using var conn = DbHelper.GetConnection();</span><br><span class="line">    var adapter = new SqlDataAdapter(&quot;select name, tiwen_cishu, tiwen_fenshu from students where gid = @gid&quot;, conn);</span><br><span class="line">    adapter.SelectCommand.Parameters.AddWithValue(&quot;gid&quot;, 2);</span><br><span class="line">    adapter.Fill(dataTable);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="24-2-ç¤ºä¾‹æ•°æ®åº“"><a href="#24-2-ç¤ºä¾‹æ•°æ®åº“" class="headerlink" title="24.2. ç¤ºä¾‹æ•°æ®åº“"></a>24.2. ç¤ºä¾‹æ•°æ®åº“</h3><ul>
<li>Sakila: <a target="_blank" rel="noopener" href="https://github.com/ivanceras/sakila">https://github.com/ivanceras/sakila</a></li>
<li>Northwind&#x2F;AdventureWorks: <a target="_blank" rel="noopener" href="https://github.com/Microsoft/sql-server-samples">https://github.com/Microsoft/sql-server-samples</a></li>
<li>ç”Ÿæˆç¤ºä¾‹æ•°æ®åº“: <a target="_blank" rel="noopener" href="https://mockaroo.com/">https://mockaroo.com/</a></li>
</ul>
<h2 id="25-BCL-Base-Class-Library-åŸºç¡€ç±»åº“"><a href="#25-BCL-Base-Class-Library-åŸºç¡€ç±»åº“" class="headerlink" title="25. BCL (Base-Class Library) åŸºç¡€ç±»åº“"></a>25. BCL (Base-Class Library) åŸºç¡€ç±»åº“</h2><h3 id="25-1-Console-x2F-æ§åˆ¶å°"><a href="#25-1-Console-x2F-æ§åˆ¶å°" class="headerlink" title="25.1. Console&#x2F;æ§åˆ¶å°"></a>25.1. Console&#x2F;æ§åˆ¶å°</h3><p>ç›¸å…³æ–¹æ³•å’Œå±æ€§:</p>
<ul>
<li>Console.Write&#x2F;WriteLineï¼Œç”¨æ¥å‘æ§åˆ¶å°è¾“å‡ºå†…å®¹</li>
<li>Console.Clearï¼Œç”¨æ¥æ¸…ç©ºå±å¹•å†…å®¹</li>
<li>Console.ForegroundColor&#x2F;BackgroudColor&#x2F;ResetColorï¼Œç”¨æ¥è®¾ç½®æ§åˆ¶å°é¢œè‰²</li>
<li>Console.ReadLineï¼Œç”¨æ¥ä»æ§åˆ¶å°è¯»å–ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²</li>
<li>Console.ReadKeyï¼Œç”¨æ¥è¯»å–æŒ‰é”®ï¼Œè¿”å›ä¸€ä¸ª ConsoleKeyInfo å¯¹è±¡</li>
<li>Console.Beepï¼Œç”¨æ¥è®©æ§åˆ¶å°å‘å‡ºå£°éŸ³</li>
</ul>
<p>ç›¸å…³ç±»å’Œç»“æ„:</p>
<ul>
<li>Console</li>
<li>ConsoleColor</li>
<li>ConsoleKey&#x2F;ConsoleKeyInfo</li>
</ul>
<p>ç¤ºä¾‹:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"> 1: Console.WriteLine();</span><br><span class="line"> 2: while (true) // é€šè¿‡ while å¾ªç¯å¯ä»¥å®ç°ä¸æ–­è¾“å…¥ä¸æ–­çœ‹åˆ°è¾“å…¥ç»“æœçš„è¿‡ç¨‹</span><br><span class="line"> 3: &#123;</span><br><span class="line"> 4:     // ReadKey æ˜¯å¾®è½¯å°è£…åœ¨ Console é‡Œçš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ¥è¯»å–æ§åˆ¶å°ä¸Šçš„æŒ‰é”®</span><br><span class="line"> 5:     // æˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒå®ƒæ€ä¹ˆå®ç°çš„ï¼Œæˆ‘ä»¬åªéœ€è¦å…³å¿ƒå®ƒå¦‚ä½•ä½¿ç”¨</span><br><span class="line"> 6:     // å¾®è½¯åœ¨å®ç°é‡Œï¼Œå°†æˆ‘ä»¬æŒ‰ä¸‹çš„é”®çš„ä¿¡æ¯ï¼Œå°è£…åˆ°äº†ä¸€ä¸ªå« ConsoleKeyInfo çš„æ•°æ®åŒ…é‡Œ (å®ä¾‹å¯¹è±¡)</span><br><span class="line"> 7:     // è°ƒç”¨ ReadKey ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡è¿™ä¸ªå®ä¾‹å¯¹è±¡ key æ‰€æä¾›çš„å¯è®¿é—®æ¥å£åˆ¤æ–­æŒ‰é”®ä¿¡æ¯äº†</span><br><span class="line"> 8:     ConsoleKeyInfo key = Console.ReadKey(true); // true çš„æ„æ€æ˜¯ï¼Œä¸åœ¨å±å¹•ä¸Šæ˜¾ç¤ºé”®å…¥çš„å­—ç¬¦</span><br><span class="line"> 9:     if (key.Key == ConsoleKey.D1)</span><br><span class="line">10:     &#123;</span><br><span class="line">11:         Console.WriteLine(&quot;æ‚¨è¾“å…¥äº†ä¸€ä¸ª 1&quot;);</span><br><span class="line">12:     &#125;</span><br><span class="line">13:     else if (key.Key == ConsoleKey.S)</span><br><span class="line">14:     &#123;</span><br><span class="line">15:         Console.Beep(); // Beep æ˜¯å¾®è½¯å®ç°åœ¨ Console é‡Œçš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ¥è®©æ§åˆ¶å°å‘å‡ºå£°éŸ³</span><br><span class="line">16:     &#125;</span><br><span class="line">17:     else if (key.KeyChar == &#x27;d&#x27;)</span><br><span class="line">18:     &#123;</span><br><span class="line">19:         Console.Beep(600, 200); // Beep æ–¹æ³•æ˜¯é‡è½½çš„ï¼Œå®ƒå¯ä»¥æºå¸¦å‚æ•°</span><br><span class="line">20:     &#125;</span><br><span class="line">21:     else if (key.KeyChar == &#x27;f&#x27;)</span><br><span class="line">22:     &#123;</span><br><span class="line">23:         Console.Beep(200, 200);</span><br><span class="line">24:     &#125;</span><br><span class="line">25:     else if (key.Key == ConsoleKey.Enter)</span><br><span class="line">26:     &#123;</span><br><span class="line">27:         break;</span><br><span class="line">28:     &#125;</span><br><span class="line">29:     else</span><br><span class="line">30:     &#123;</span><br><span class="line">31:         Console.WriteLine($&quot;key: &#123;key&#125;, keyChar: &#123;key.KeyChar&#125;, key: &#123;key.Key&#125;&quot;);</span><br><span class="line">32:     &#125;</span><br><span class="line">33: &#125;</span><br></pre></td></tr></table></figure>

<h3 id="25-2-Random-x2F-Thread"><a href="#25-2-Random-x2F-Thread" class="headerlink" title="25.2. Random&#x2F;Thread"></a>25.2. Random&#x2F;Thread</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">ConsoleColor[] colors = new ConsoleColor[]</span><br><span class="line">&#123;</span><br><span class="line">    ConsoleColor.Red, ConsoleColor.Green, ConsoleColor.Yellow</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int i = 0;</span><br><span class="line">while (true)</span><br><span class="line">&#123;</span><br><span class="line">    // Console.WriteLine(&quot;hello &#123;0&#125;&quot;, DateTime.Now);</span><br><span class="line">    // var timer = new Timer(null, TimeSpan(1), TimeSpan(2));</span><br><span class="line">    Thread.Sleep(1000); // é¢˜å¤–è¯ï¼Œè¿™ä¸ª 1000 æ¯«ç§’å¹¶ä¸æ˜¯éå¸¸å‡†ç¡®</span><br><span class="line">    // Task.Delay(1000).Wait();</span><br><span class="line"></span><br><span class="line">    //Console.WriteLine(colors[i]);</span><br><span class="line">    //i = i + 1;</span><br><span class="line">    //if (i == 3) i = 0;</span><br><span class="line"></span><br><span class="line">    //Console.WriteLine(colors[i]);</span><br><span class="line">    //i = (i + 1) % 3;</span><br><span class="line"></span><br><span class="line">    //Console.WriteLine(colors[(i++) % 3]);</span><br><span class="line"></span><br><span class="line">    System.Random random = new System.Random();</span><br><span class="line">    int r = random.Next(colors.Length); // Next(3): 0, 1, 2</span><br><span class="line">    Console.WriteLine(colors[r]);</span><br><span class="line"></span><br><span class="line">    Console.Clear(); // æ¸…ç©ºå±å¹•</span><br><span class="line">    Console.ResetColor(); // é‡ç½®é¢œè‰²</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="25-3-IDisposable-x2F-èµ„æº"><a href="#25-3-IDisposable-x2F-èµ„æº" class="headerlink" title="25.3. IDisposable&#x2F;èµ„æº"></a>25.3. IDisposable&#x2F;èµ„æº</h3><ul>
<li>èµ„æºï¼Œæ˜¯æŒ‡éœ€è¦åœ¨æ“ä½œç³»ç»Ÿä¸­æ‰“å¼€ï¼Œç”¨å®Œä¹‹åï¼Œéœ€è¦æ‰‹åŠ¨é‡Šæ”¾çš„å¯¹è±¡</li>
<li>ä¸ºä»€ä¹ˆéœ€è¦æ‰‹åŠ¨é‡Šæ”¾å‘¢ï¼Ÿå› ä¸º .NET å¹³å°ä¸æ˜¯ä¸‡èƒ½çš„ã€‚è™½ç„¶ .NET å¹³å°æœ‰åƒåœ¾å›æ”¶å™¨ï¼Œä½ ä¸å†éœ€è¦çš„ å¯¹è±¡ï¼Œå®ƒä¼šè‡ªåŠ¨å¸®ä½ æ¸…ç†æ‰ï¼Œä½†æ˜¯æœ‰äº›ä¸œè¥¿å®ƒæ˜¯æ— æ³•ç¡®å®šä½ åˆ°åº•è¿˜éœ€ä¸éœ€è¦ï¼Œæ‰€ä»¥æ— æ³•å¸®åŠ©ä½ è‡ªåŠ¨å¤„ç†ã€‚ ä½ ä¹Ÿåªèƒ½æ‰‹åŠ¨é‡Šæ”¾æˆ–å…³é—­</li>
<li>å¯¹äºä¸€äº›èµ„æºï¼Œå¿…é¡»è¦æ‰‹åŠ¨é‡Šæ”¾æˆ–å…³é—­</li>
</ul>
<p>å¯¹äºæ™®é€šçš„å¯¹è±¡ï¼Œæ˜¯å¯ä»¥è¢« GC è‡ªåŠ¨å›æ”¶çš„:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// åˆ›å»ºçš„ä»»ä½•å¯¹è±¡ï¼Œéƒ½æ˜¯å¯ä»¥è¢«åƒåœ¾å›æ”¶å™¨ (GC) è‡ªåŠ¨é‡Šæ”¾</span><br><span class="line">// å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦ new ç„¶åä½¿ç”¨å°±å¯ä»¥äº†ï¼Œå…¶ä»–çš„å†…å­˜ç®¡ç†æ— éœ€ä½ å…³å¿ƒ</span><br><span class="line">for (int i = 0; i &lt; 100000000; i++)</span><br><span class="line">&#123;</span><br><span class="line">    var a = new Book(); // åˆ›å»ºå¤šå°‘ä¸ªéƒ½ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ï¼Œç»å¯¹å®‰å…¨</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å¯¹äºä¸€äº›ä¾èµ–ç³»ç»Ÿçš„èµ„æºï¼Œå¿…é¡»è¦æ‰‹åŠ¨é‡Šæ”¾:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">// åƒæ–‡ä»¶è¿™æ ·çš„èµ„æºï¼Œæ‰“å¼€ä¹‹åï¼Œå¿…é¡»è¦æ‰‹åŠ¨é‡Šæ”¾</span><br><span class="line">var fs = File.OpenRead(fileName);</span><br><span class="line">Console.WriteLine(5/0); // ä»£è¡¨ä½¿ç”¨ (2)</span><br><span class="line">fs.Close();             // æ‰‹åŠ¨å…³é—­/é‡Šæ”¾</span><br><span class="line"></span><br><span class="line">// ä¸Šè¿°çš„ä»£ç æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºï¼Œå¦‚æœ (2) å‡ºç°é”™è¯¯çš„è¯ï¼Œé‚£ä¹ˆé‡Šæ”¾çš„è¯­å¥å°±æ— æ³•æ‰§è¡Œ</span><br><span class="line">// ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ finally è¯­æ³•ï¼Œå¯¹æ•´ä¸ªèµ„æºé‡Šæ”¾çš„ä»£ç è¿›è¡Œé‡æ„</span><br><span class="line">FileStream fs = null;</span><br><span class="line">try</span><br><span class="line">&#123;</span><br><span class="line">    fs = File.OpenRead(fileName);</span><br><span class="line">    Console.WriteLine(fs);</span><br><span class="line">    Console.WriteLine(5/0);</span><br><span class="line">    Console.WriteLine(&quot;å…¶ä»–ä½ æ‰€éœ€è¦åšçš„äº‹æƒ…&quot;);</span><br><span class="line">&#125;</span><br><span class="line">finally</span><br><span class="line">&#123;</span><br><span class="line">    if (fs != null)</span><br><span class="line">    &#123;</span><br><span class="line">        try</span><br><span class="line">        &#123;</span><br><span class="line">            fs.Close();</span><br><span class="line">        &#125;</span><br><span class="line">        catch</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(&quot;å…³é—­å¤±è´¥&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¯ä»¥ä½¿ç”¨ using å¯¹ä¸Šè¿°ä»£ç è¿›è¡Œç®€åŒ–</span><br><span class="line">// å¿…é¡»è®© FileStream é‡Œé¢å®ç°ä¸€ä¸ªå« Dispose çš„æ–¹æ³•</span><br><span class="line">// ä¸ºäº†ä¿è¯ä½ å¿…é¡»å®ç°ä¸€ä¸ª Dispose æ–¹æ³•ï¼Œä½ å¿…é¡»è¦å®ç° IDisposable æ¥å£</span><br><span class="line">using (FileStream fs = File.OpenRead(fileName))</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(fs);</span><br><span class="line">    Console.WriteLine(5/0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æœ€æ–°çš„ C# ç‰ˆæœ¬åˆç»™äº†æ–°çš„ç³–</span><br><span class="line">using FileStream fs = File.OpenRead(fileName); // fs åœ¨åé¢ç¢°åˆ° &#125; åï¼Œä¼šè‡ªåŠ¨é‡Šæ”¾</span><br><span class="line">Console.WriteLine(fs);</span><br><span class="line">Console.WriteLine(5/0);</span><br></pre></td></tr></table></figure>

<h3 id="25-4-Stopwatch-x2F-ç§’è¡¨"><a href="#25-4-Stopwatch-x2F-ç§’è¡¨" class="headerlink" title="25.4. Stopwatch&#x2F;ç§’è¡¨"></a>25.4. Stopwatch&#x2F;ç§’è¡¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">using System.Diagnostics;</span><br><span class="line"></span><br><span class="line">Stopwatch sw = new Stopwatch();</span><br><span class="line">sw.Start();</span><br><span class="line">// .....</span><br><span class="line">Console.WriteLine(sw.ElapsedMillionseconds);  // 1111ms</span><br><span class="line">sw.Stop();</span><br></pre></td></tr></table></figure>

<h3 id="25-5-ConfigurationManager-x2F-é…ç½®ç®¡ç†å™¨"><a href="#25-5-ConfigurationManager-x2F-é…ç½®ç®¡ç†å™¨" class="headerlink" title="25.5. ConfigurationManager&#x2F;é…ç½®ç®¡ç†å™¨"></a>25.5. ConfigurationManager&#x2F;é…ç½®ç®¡ç†å™¨</h3><p>é¦–å…ˆï¼Œéœ€è¦å¼•å…¥åŒ…:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet add package System.Configuration.ConfigurationManager</span><br></pre></td></tr></table></figure>

<p>å…¶æ¬¡ï¼Œåœ¨ App.config æˆ– Web.config ä¸­æ·»åŠ ç›¸åº”é…ç½®ä¿¡æ¯:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">  &lt;connectionStrings&gt;</span><br><span class="line">    &lt;clear/&gt;</span><br><span class="line">    &lt;add name=&quot;blogdb&quot; connectionString=&quot;server=.;database=ccc;uid=sa;pwd=sa&quot;/&gt;</span><br><span class="line">  &lt;/connectionStrings&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œåœ¨ç¨‹åºä¸­ä½¿ç”¨:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var dbString = ConfigurationManager.ConnectionStrings[&quot;blogdb&quot;].ConnectionString;</span><br></pre></td></tr></table></figure>

<h3 id="25-6-RegularExpression-x2F-æ­£åˆ™è¡¨è¾¾å¼"><a href="#25-6-RegularExpression-x2F-æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="25.6. RegularExpression&#x2F;æ­£åˆ™è¡¨è¾¾å¼"></a>25.6. RegularExpression&#x2F;æ­£åˆ™è¡¨è¾¾å¼</h3><p><a target="_blank" rel="noopener" href="https://regexlearn.com/">https://regexlearn.com/</a></p>
<p>ç”µè¯å·ç :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^1[3578][0-9]&#123;9&#125;$</span><br></pre></td></tr></table></figure>

<p>é‚®ç®±åœ°å€:</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">^[a-zA-Z][a-zA-Z0<span class="number">-9</span>_]&#123;<span class="number">5</span>,<span class="number">17</span>&#125;@[a-z0<span class="number">-9</span>]+\.(com|net|edu.cn|org)$</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">xxx1</span> (<span class="params"><span class="built_in">string</span> input, <span class="built_in">string</span> regexp</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// var r = new Regex(&quot;^1[3578][0-9]&#123;9&#125;$&quot;);</span></span><br><span class="line">    <span class="keyword">var</span> r = Regex.IsMatch(input, regexp);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">$&quot;<span class="subst">&#123;input&#125;</span>     <span class="subst">&#123;regexp&#125;</span>: <span class="subst">&#123;r&#125;</span>&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">xxx2</span> (<span class="params"><span class="built_in">string</span> input, <span class="built_in">string</span> regexp</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//var m = Regex.Match(input, regexp);</span></span><br><span class="line">    <span class="keyword">var</span> ms = Regex.Matches(input, regexp);</span><br><span class="line">    <span class="keyword">var</span> r = <span class="built_in">string</span>.Join(<span class="string">&quot; &quot;</span>, ms);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">$&quot;<span class="subst">&#123;input&#125;</span>     <span class="subst">&#123;regexp&#125;</span>: <span class="subst">&#123;r&#125;</span>&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">xxx3</span> (<span class="params"><span class="built_in">string</span> input, <span class="built_in">string</span> regexp</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> Regex.Replace(input, regexp, <span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">xxx4</span> ()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> s = <span class="string">&quot;hello   =   , world,  -      where _ , are&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> ws = Regex.Split(s, <span class="string">&quot;[^a-zA-Z]+&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> r = <span class="built_in">string</span>.Join(<span class="string">&quot;!!&quot;</span>, ws);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">$&quot;<span class="subst">&#123;r&#125;</span>&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="26-é—®é¢˜-ä»…ä½œå‚è€ƒ"><a href="#26-é—®é¢˜-ä»…ä½œå‚è€ƒ" class="headerlink" title="26. é—®é¢˜ (ä»…ä½œå‚è€ƒ)"></a>26. é—®é¢˜ (ä»…ä½œå‚è€ƒ)</h2><h3 id="26-1-string-å’Œ-StringBuilder-æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#26-1-string-å’Œ-StringBuilder-æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="26.1. string å’Œ StringBuilder æœ‰ä»€ä¹ˆåŒºåˆ«"></a>26.1. string å’Œ StringBuilder æœ‰ä»€ä¹ˆåŒºåˆ«</h3><ul>
<li>string æ˜¯ä¸€ç§é¢„å®šä¹‰ç±»å‹ï¼Œå®ƒè¡¨è¾¾çš„æ˜¯å­—ç¬¦çš„æœ‰åºç»„åˆ</li>
<li>StringBuilder æ˜¯å®šä¹‰åœ¨ BCL ä¸­çš„ç±»å‹ï¼Œå®ƒä¸»è¦ç”¨æ¥è¿›è¡Œå­—ç¬¦ä¸²çš„æ‹¼æ¥</li>
<li>string æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œæ‹¼æ¥ç­‰æ“ä½œçš„æ—¶å€™ï¼Œæ•ˆç‡ä¼šéå¸¸ä½</li>
<li>StringBuilder æ˜¯å¯å˜çš„ä¸€ç§ç±»å‹ï¼Œæ‰€ä»¥åœ¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ—¶å€™ï¼Œæ•ˆç‡ç›¸å¯¹é«˜å¤šäº†</li>
<li>å› æ­¤ï¼Œåœ¨è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥çš„æ“ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ StringBuilder è¿›è¡Œæ„å»ºï¼Œä»è€Œæå‡æ•ˆç‡</li>
</ul>
<h3 id="26-2-ä»€ä¹ˆæ˜¯æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆç”¨å¤„"><a href="#26-2-ä»€ä¹ˆæ˜¯æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆç”¨å¤„" class="headerlink" title="26.2. ä»€ä¹ˆæ˜¯æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆç”¨å¤„"></a>26.2. ä»€ä¹ˆæ˜¯æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆç”¨å¤„</h3><h3 id="26-3-ä»€ä¹ˆæ˜¯æ¥å£ï¼Œä»€ä¹ˆæ˜¯é¢å‘æ¥å£ç¼–ç¨‹ï¼Œé¢å‘æ¥å£ç¼–ç¨‹æœ‰ä»€ä¹ˆå¥½å¤„"><a href="#26-3-ä»€ä¹ˆæ˜¯æ¥å£ï¼Œä»€ä¹ˆæ˜¯é¢å‘æ¥å£ç¼–ç¨‹ï¼Œé¢å‘æ¥å£ç¼–ç¨‹æœ‰ä»€ä¹ˆå¥½å¤„" class="headerlink" title="26.3. ä»€ä¹ˆæ˜¯æ¥å£ï¼Œä»€ä¹ˆæ˜¯é¢å‘æ¥å£ç¼–ç¨‹ï¼Œé¢å‘æ¥å£ç¼–ç¨‹æœ‰ä»€ä¹ˆå¥½å¤„"></a>26.3. ä»€ä¹ˆæ˜¯æ¥å£ï¼Œä»€ä¹ˆæ˜¯é¢å‘æ¥å£ç¼–ç¨‹ï¼Œé¢å‘æ¥å£ç¼–ç¨‹æœ‰ä»€ä¹ˆå¥½å¤„</h3><h3 id="26-4-ä»€ä¹ˆæ˜¯é™æ€ç±»ï¼Œä»€ä¹ˆæ˜¯å¯†å°ç±»ï¼Œä»€ä¹ˆæ˜¯åˆ†éƒ¨ç±»"><a href="#26-4-ä»€ä¹ˆæ˜¯é™æ€ç±»ï¼Œä»€ä¹ˆæ˜¯å¯†å°ç±»ï¼Œä»€ä¹ˆæ˜¯åˆ†éƒ¨ç±»" class="headerlink" title="26.4. ä»€ä¹ˆæ˜¯é™æ€ç±»ï¼Œä»€ä¹ˆæ˜¯å¯†å°ç±»ï¼Œä»€ä¹ˆæ˜¯åˆ†éƒ¨ç±»"></a>26.4. ä»€ä¹ˆæ˜¯é™æ€ç±»ï¼Œä»€ä¹ˆæ˜¯å¯†å°ç±»ï¼Œä»€ä¹ˆæ˜¯åˆ†éƒ¨ç±»</h3><h3 id="26-5-ä»€ä¹ˆæ˜¯ç±»ï¼Œä»€ä¹ˆæ˜¯å¯¹è±¡ï¼Œå¯¹è±¡çš„å®ä¾‹åŒ–è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„"><a href="#26-5-ä»€ä¹ˆæ˜¯ç±»ï¼Œä»€ä¹ˆæ˜¯å¯¹è±¡ï¼Œå¯¹è±¡çš„å®ä¾‹åŒ–è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„" class="headerlink" title="26.5. ä»€ä¹ˆæ˜¯ç±»ï¼Œä»€ä¹ˆæ˜¯å¯¹è±¡ï¼Œå¯¹è±¡çš„å®ä¾‹åŒ–è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„"></a>26.5. ä»€ä¹ˆæ˜¯ç±»ï¼Œä»€ä¹ˆæ˜¯å¯¹è±¡ï¼Œå¯¹è±¡çš„å®ä¾‹åŒ–è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„</h3><h3 id="26-6-ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œé¢å‘å¯¹è±¡æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„"><a href="#26-6-ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œé¢å‘å¯¹è±¡æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„" class="headerlink" title="26.6. ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œé¢å‘å¯¹è±¡æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„"></a>26.6. ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œé¢å‘å¯¹è±¡æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„</h3><h3 id="26-7-é‡è½½-overload-å’Œ-é‡å†™-override-æœ‰å•¥åŒºåˆ«-15-åˆ†"><a href="#26-7-é‡è½½-overload-å’Œ-é‡å†™-override-æœ‰å•¥åŒºåˆ«-15-åˆ†" class="headerlink" title="26.7. é‡è½½ (overload) å’Œ é‡å†™ (override) æœ‰å•¥åŒºåˆ« (15 åˆ†)"></a>26.7. é‡è½½ (overload) å’Œ é‡å†™ (override) æœ‰å•¥åŒºåˆ« (15 åˆ†)</h3><h3 id="26-8-ä»€ä¹ˆæ˜¯å­—æ®µï¼Œä»€ä¹ˆæ˜¯æ–¹æ³•ï¼Œä»€ä¹ˆæ˜¯å±æ€§ã€‚å±æ€§æœ‰ä»€ä¹ˆå¥½å¤„"><a href="#26-8-ä»€ä¹ˆæ˜¯å­—æ®µï¼Œä»€ä¹ˆæ˜¯æ–¹æ³•ï¼Œä»€ä¹ˆæ˜¯å±æ€§ã€‚å±æ€§æœ‰ä»€ä¹ˆå¥½å¤„" class="headerlink" title="26.8. ä»€ä¹ˆæ˜¯å­—æ®µï¼Œä»€ä¹ˆæ˜¯æ–¹æ³•ï¼Œä»€ä¹ˆæ˜¯å±æ€§ã€‚å±æ€§æœ‰ä»€ä¹ˆå¥½å¤„"></a>26.8. ä»€ä¹ˆæ˜¯å­—æ®µï¼Œä»€ä¹ˆæ˜¯æ–¹æ³•ï¼Œä»€ä¹ˆæ˜¯å±æ€§ã€‚å±æ€§æœ‰ä»€ä¹ˆå¥½å¤„</h3><h3 id="26-9-ä»€ä¹ˆæ˜¯å°è£…ï¼Œä»€ä¹ˆæ˜¯ç»§æ‰¿ï¼Œä»€ä¹ˆæ˜¯å¤šæ€"><a href="#26-9-ä»€ä¹ˆæ˜¯å°è£…ï¼Œä»€ä¹ˆæ˜¯ç»§æ‰¿ï¼Œä»€ä¹ˆæ˜¯å¤šæ€" class="headerlink" title="26.9. ä»€ä¹ˆæ˜¯å°è£…ï¼Œä»€ä¹ˆæ˜¯ç»§æ‰¿ï¼Œä»€ä¹ˆæ˜¯å¤šæ€"></a>26.9. ä»€ä¹ˆæ˜¯å°è£…ï¼Œä»€ä¹ˆæ˜¯ç»§æ‰¿ï¼Œä»€ä¹ˆæ˜¯å¤šæ€</h3><h3 id="26-10-ä»€ä¹ˆæ˜¯è™šæ–¹æ³•ï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨å¤„"><a href="#26-10-ä»€ä¹ˆæ˜¯è™šæ–¹æ³•ï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨å¤„" class="headerlink" title="26.10. ä»€ä¹ˆæ˜¯è™šæ–¹æ³•ï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨å¤„"></a>26.10. ä»€ä¹ˆæ˜¯è™šæ–¹æ³•ï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨å¤„</h3><h3 id="26-11-ä»€ä¹ˆæ˜¯ç»„åˆï¼Œå®ƒè·Ÿç»§æ‰¿æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåˆ†åˆ«ç”¨åœ¨ä»€ä¹ˆåœºæ™¯"><a href="#26-11-ä»€ä¹ˆæ˜¯ç»„åˆï¼Œå®ƒè·Ÿç»§æ‰¿æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåˆ†åˆ«ç”¨åœ¨ä»€ä¹ˆåœºæ™¯" class="headerlink" title="26.11. ä»€ä¹ˆæ˜¯ç»„åˆï¼Œå®ƒè·Ÿç»§æ‰¿æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåˆ†åˆ«ç”¨åœ¨ä»€ä¹ˆåœºæ™¯"></a>26.11. ä»€ä¹ˆæ˜¯ç»„åˆï¼Œå®ƒè·Ÿç»§æ‰¿æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåˆ†åˆ«ç”¨åœ¨ä»€ä¹ˆåœºæ™¯</h3><h3 id="26-12-ä»€ä¹ˆæ˜¯-DRYï¼Œä»£ç å¤ç”¨çš„æ‰‹æ®µæœ‰å“ªäº›"><a href="#26-12-ä»€ä¹ˆæ˜¯-DRYï¼Œä»£ç å¤ç”¨çš„æ‰‹æ®µæœ‰å“ªäº›" class="headerlink" title="26.12. ä»€ä¹ˆæ˜¯ DRYï¼Œä»£ç å¤ç”¨çš„æ‰‹æ®µæœ‰å“ªäº›"></a>26.12. ä»€ä¹ˆæ˜¯ DRYï¼Œä»£ç å¤ç”¨çš„æ‰‹æ®µæœ‰å“ªäº›</h3><h3 id="26-13-Parse-x2F-TryParse-æœ‰å•¥åŒºåˆ«"><a href="#26-13-Parse-x2F-TryParse-æœ‰å•¥åŒºåˆ«" class="headerlink" title="26.13. Parse&#x2F;TryParse æœ‰å•¥åŒºåˆ«"></a>26.13. Parse&#x2F;TryParse æœ‰å•¥åŒºåˆ«</h3><ul>
<li>è¿™ä¸¤ä¸ªéƒ½æ˜¯ç”¨æ¥å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå…¶ä»–ç±»å‹</li>
<li>é‡åˆ°è½¬æ¢å¤±è´¥çš„æ—¶å€™</li>
<li>Parse ä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸</li>
<li>è€Œ TryParseï¼Œä¼šæ ¹æ®æ˜¯å¦è½¬æ¢æˆåŠŸè¿”å› True&#x2F;False, å®ƒä¸ä¼šæŠ›å‡ºå¼‚å¸¸</li>
</ul>
<h3 id="26-14-ä»€ä¹ˆæ˜¯è£…ç®±æ‹†ç®±"><a href="#26-14-ä»€ä¹ˆæ˜¯è£…ç®±æ‹†ç®±" class="headerlink" title="26.14. ä»€ä¹ˆæ˜¯è£…ç®±æ‹†ç®±"></a>26.14. ä»€ä¹ˆæ˜¯è£…ç®±æ‹†ç®±</h3><ul>
<li>è£…ç®±æ˜¯å°†å€¼ç±»å‹è½¬æ¢ä¸º object çš„è¿‡ç¨‹</li>
<li>æ‹†ç®±æ˜¯å°†è£…ç®±åçš„ object è½¬æ¢ä¸ºå¯¹åº”çš„å€¼ç±»å‹çš„è¿‡ç¨‹</li>
</ul>
<h3 id="26-15-ä»€ä¹ˆæ˜¯å€¼ç±»å‹-x2F-å¼•ç”¨ç±»å‹"><a href="#26-15-ä»€ä¹ˆæ˜¯å€¼ç±»å‹-x2F-å¼•ç”¨ç±»å‹" class="headerlink" title="26.15. ä»€ä¹ˆæ˜¯å€¼ç±»å‹&#x2F;å¼•ç”¨ç±»å‹"></a>26.15. ä»€ä¹ˆæ˜¯å€¼ç±»å‹&#x2F;å¼•ç”¨ç±»å‹</h3><ul>
<li>å˜é‡ä½ç½®ä¿å­˜çš„æ˜¯ç±»å‹å®ä¾‹è‡ªèº«ï¼Œè¿™æ ·çš„ç±»å‹å« <strong>å€¼ç±»å‹</strong></li>
<li>å˜é‡ä½ç½®ä¿å­˜çš„æ˜¯ç±»å‹å®ä¾‹çš„å¼•ç”¨ï¼Œè¿™æ ·çš„ç±»å‹å« <strong>å¼•ç”¨ç±»å‹</strong></li>
</ul>
<h3 id="26-16-is-x2F-as-åˆ†åˆ«æ˜¯å¹²å•¥çš„"><a href="#26-16-is-x2F-as-åˆ†åˆ«æ˜¯å¹²å•¥çš„" class="headerlink" title="26.16. is&#x2F;as åˆ†åˆ«æ˜¯å¹²å•¥çš„"></a>26.16. is&#x2F;as åˆ†åˆ«æ˜¯å¹²å•¥çš„</h3><ul>
<li>is ç”¨æ¥åˆ¤æ–­å·¦è¾¹çš„å®ä¾‹æ˜¯å¦æ˜¯å³è¾¹çš„ç±»å‹ã€‚æ˜¯çš„ trueï¼Œä¸æ˜¯çš„è¯ falseã€‚ å®ƒå¸¸ç”¨æ¥è·Ÿæ˜¾å¼è½¬æ¢é…åˆä½¿ç”¨</li>
<li>as å’Œæ˜¾å¼è½¬æ¢ç›¸ä¼¼ï¼Œä½†å®ƒä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœæˆåŠŸè¿”å›è½¬æ¢ç»“æœï¼Œå¤±è´¥è¿”å› null</li>
</ul>
<h2 id="27-ä»£ç ç”Ÿæˆå™¨"><a href="#27-ä»£ç ç”Ÿæˆå™¨" class="headerlink" title="27. ä»£ç ç”Ÿæˆå™¨"></a>27. ä»£ç ç”Ÿæˆå™¨</h2><ul>
<li>åŠ¨è½¯ä»£ç ç”Ÿæˆå™¨</li>
<li>Codematic</li>
</ul>
<p>é“¾æ¥:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/huangguojin/p/5299153.html">https://www.cnblogs.com/huangguojin/p/5299153.html</a></li>
</ul>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C-%E8%AF%AD%E6%B3%95/">C#è¯­æ³•</a></div><div class="post_share"><div class="social-share" data-image="/img/favicon2.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2022/10/23/%E8%93%9D%E5%A5%8F%E4%BA%91%E9%93%BE%E6%8E%A5/" title="è“å¥äº‘é“¾æ¥"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">è“å¥äº‘é“¾æ¥</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/favicon2.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">å è½æ˜Ÿç©ºğŸ’¤</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">5</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/2786964086"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/2786964086" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:2786964086@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2786964086&amp;site=qq&amp;menu=yes" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog-çƒ­çˆ±åˆ†äº«</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#C"><span class="toc-text">C#</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%8E%86%E5%8F%B2"><span class="toc-text">1. å†å²</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%AF%AD%E8%A8%80%E4%B8%8E%E7%B1%BB%E5%9E%8B"><span class="toc-text">2. [è¯­è¨€ä¸ç±»å‹]</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-Main"><span class="toc-text">2.1. Main</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-text">2.2. å‘½åç©ºé—´</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E4%BD%BF%E7%94%A8"><span class="toc-text">2.2.1. ä½¿ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-%E5%AE%9A%E4%B9%89"><span class="toc-text">2.2.2. å®šä¹‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-BCL-x2F-System"><span class="toc-text">2.2.3. BCL&#x2F;System</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E6%A8%A1%E6%9D%BF-vs-%E5%AE%9E%E4%BE%8B"><span class="toc-text">2.3. æ¨¡æ¿ vs å®ä¾‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E5%80%BC%E7%B1%BB%E5%9E%8B-vs-%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-text">2.4. å€¼ç±»å‹ vs å¼•ç”¨ç±»å‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%A2%84%E5%AE%9A%E4%B9%89%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-text">3. é¢„å®šä¹‰æ•°å€¼ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%95%B4%E6%95%B0"><span class="toc-text">3.1. æ•´æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E6%B5%AE%E7%82%B9%E6%95%B0"><span class="toc-text">3.2. æµ®ç‚¹æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-Literate-%E5%AD%97%E9%9D%A2%E9%87%8F%E8%A1%A8%E8%BE%BE"><span class="toc-text">3.3. Literate (å­—é¢é‡è¡¨è¾¾)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E9%A2%84%E5%AE%9A%E4%B9%89-x2F-%E9%9D%9E%E6%95%B0%E5%80%BC%C2%B7%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-text">4. é¢„å®šä¹‰&#x2F;éæ•°å€¼Â·å€¼ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B-char"><span class="toc-text">4.1. å­—ç¬¦ç±»å‹ (char)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B-bool"><span class="toc-text">4.2. å¸ƒå°”ç±»å‹ (bool)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-%E6%9D%A1%E4%BB%B6%E5%88%86%E6%94%AF-%E5%9C%A8%E6%9F%90%E7%A7%8D%E6%9D%A1%E4%BB%B6%E4%B9%8B%E4%B8%8B%EF%BC%8C%E5%81%9A%E6%9F%90%E4%BB%B6%E4%BA%8B"><span class="toc-text">4.2.1. [æ¡ä»¶åˆ†æ”¯] åœ¨æŸç§æ¡ä»¶ä¹‹ä¸‹ï¼ŒåšæŸä»¶äº‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-%E5%BE%AA%E7%8E%AF%E8%BF%AD%E4%BB%A3-%E9%87%8D%E5%A4%8D%E5%81%9A%E6%9F%90%E4%BB%B6%E4%BA%8B"><span class="toc-text">4.2.2. [å¾ªç¯è¿­ä»£] é‡å¤åšæŸä»¶äº‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-3-%E8%AF%AD%E5%8F%A5-Statement-vs-%E8%A1%A8%E8%BE%BE%E5%BC%8F-Expression"><span class="toc-text">4.2.3. è¯­å¥ (Statement) vs è¡¨è¾¾å¼ (Expression)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E9%A2%84%E5%AE%9A%E4%B9%89-x2F-%E9%9D%9E%E6%95%B0%E5%80%BC%C2%B7%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-text">5. é¢„å®šä¹‰&#x2F;éæ•°å€¼Â·å¼•ç”¨ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-string"><span class="toc-text">5.1. string</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">5.1.1. å­—ç¬¦ä¸²çš„åˆå§‹åŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%80%A7-Immutable"><span class="toc-text">5.1.2. å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§ (Immutable)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-2-1-what-amp-why"><span class="toc-text">5.1.2.1. what &amp; why</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-2-2-System-Text-StringBuilder"><span class="toc-text">5.1.2.2. System.Text.StringBuilder</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-2-3-String-Intern-Pool-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B1%A0"><span class="toc-text">5.1.2.3. String Intern Pool (å­—ç¬¦ä¸²æ± )</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-3-API-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-text">5.1.3. [API] åŸºæœ¬æ“ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-4-API-%E6%8B%BC%E6%8E%A5-%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-text">5.1.4. [API] æ‹¼æ¥ + æ ¼å¼åŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-5-API-%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">5.1.5. [API] å­å­—ç¬¦ä¸²</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-6-API-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-text">5.1.6. [API] å­—ç¬¦ä¸²çš„ä¿®æ”¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-7-API-String-%E8%B7%9F-Array-%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="toc-text">5.1.7. [API] String è·Ÿ Array çš„è½¬æ¢</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-object"><span class="toc-text">5.2. object</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-dynamic"><span class="toc-text">5.3. dynamic</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B"><span class="toc-text">6. ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-class"><span class="toc-text">6.1. class</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-interface"><span class="toc-text">6.2. interface</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-delegate"><span class="toc-text">6.3. delegate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-array"><span class="toc-text">6.4. array</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-struct"><span class="toc-text">6.5. struct</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-enum"><span class="toc-text">6.6. enum</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-text">7. ç±»å‹è½¬æ¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E9%9A%90%E5%BC%8F%E8%BD%AC%E6%8D%A2-x2F-%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2"><span class="toc-text">7.1. éšå¼è½¬æ¢&#x2F;å¼ºåˆ¶è½¬æ¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E7%9A%84%E9%9A%90%E5%BC%8F%E5%92%8C%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2"><span class="toc-text">7.2. å¼•ç”¨ç±»å‹çš„éšå¼å’Œå¼ºåˆ¶è½¬æ¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E8%A3%85%E7%AE%B1-x2F-%E6%8B%86%E7%AE%B1-auto-boxing"><span class="toc-text">7.3. è£…ç®±&#x2F;æ‹†ç®± (auto-boxing)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BD%AC%E6%8D%A2%E8%A7%84%E5%88%99"><span class="toc-text">7.4. è‡ªå®šä¹‰è½¬æ¢è§„åˆ™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-%E5%9F%BA%E4%BA%8E-%E5%AD%97%E7%AC%A6%E4%B8%B2-%E4%B9%8B%E9%97%B4%E7%9A%84%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2"><span class="toc-text">7.5. åŸºäº å­—ç¬¦ä¸² ä¹‹é—´çš„äº’ç›¸è½¬æ¢</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-5-1-string-Format"><span class="toc-text">7.5.1. string.Format</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-5-2-type-ToString"><span class="toc-text">7.5.2. type.ToString</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-5-3-type-Parse-x2F-TryParse"><span class="toc-text">7.5.3. type.Parse&#x2F;TryParse</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-5-4-Convert"><span class="toc-text">7.5.4. Convert</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E7%B1%BB-Class"><span class="toc-text">8. ç±» (Class)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E5%AD%97%E6%AE%B5-Field"><span class="toc-text">8.1. å­—æ®µ (Field)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E6%96%B9%E6%B3%95-Method"><span class="toc-text">8.2. æ–¹æ³• (Method)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-1-Basic"><span class="toc-text">8.2.1. Basic</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-2-%E6%96%B9%E6%B3%95%E7%9A%84%E9%87%8D%E8%BD%BD-overload"><span class="toc-text">8.2.2. æ–¹æ³•çš„é‡è½½ (overload)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-3-%E5%8F%82%E6%95%B0-%E5%80%BC%E5%8F%82%E6%95%B0-x2F-ref-x2F-out"><span class="toc-text">8.2.3. å‚æ•° (å€¼å‚æ•°&#x2F;ref&#x2F;out)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-4-out-%E5%8F%82%E6%95%B0-%E7%94%A8%E6%9D%A5%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95%E8%BF%94%E5%9B%9E%E5%A4%9A%E4%B8%AA%E5%80%BC%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-text">8.2.4. out å‚æ•°: ç”¨æ¥æ¨¡æ‹Ÿæ–¹æ³•è¿”å›å¤šä¸ªå€¼çš„åœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-5-%E6%95%B0%E7%BB%84%E5%8F%82%E6%95%B0-params"><span class="toc-text">8.2.5. æ•°ç»„å‚æ•° (params)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-6-%E5%8F%AF%E9%80%89%E5%8F%82%E6%95%B0-x2F-%E5%91%BD%E5%90%8D%E5%8F%82%E6%95%B0"><span class="toc-text">8.2.6. å¯é€‰å‚æ•°&#x2F;å‘½åå‚æ•°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E5%B1%9E%E6%80%A7-Property"><span class="toc-text">8.3. å±æ€§ (Property)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-%E7%B4%A2%E5%BC%95%E5%99%A8-Indexer"><span class="toc-text">8.4. ç´¢å¼•å™¨ (Indexer)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95-x2F-%E6%9E%84%E9%80%A0%E5%99%A8-Constructor"><span class="toc-text">8.5. æ„é€ æ–¹æ³•&#x2F;æ„é€ å™¨ (Constructor)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-5-1-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%8C%96"><span class="toc-text">8.5.1. å¯¹è±¡çš„å®ä¾‹åŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-5-2-%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-text">8.5.2. æ„é€ å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-5-3-%E6%9E%84%E9%80%A0%E5%99%A8%E9%93%BE"><span class="toc-text">8.5.3. æ„é€ å™¨é“¾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-5-4-%E9%9D%99%E6%80%81%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-text">8.5.4. é™æ€æ„é€ å™¨</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-%E6%9E%90%E6%9E%84%E6%96%B9%E6%B3%95-x2F-%E6%9E%90%E6%9E%84%E5%99%A8-Deconstructor"><span class="toc-text">8.6. ææ„æ–¹æ³•&#x2F;ææ„å™¨ (Deconstructor)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-7-%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95-Static"><span class="toc-text">8.7. é™æ€æ–¹æ³• (Static)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-8-%E5%B0%86%E6%95%B0%E6%8D%AE%E8%AE%BE%E7%BD%AE%E4%B8%BA%E4%B8%8D%E5%8F%98%E7%9A%84-const-x2F-readonly"><span class="toc-text">8.8. å°†æ•°æ®è®¾ç½®ä¸ºä¸å˜çš„ (const&#x2F;readonly)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-9-%E7%BB%A7%E6%89%BF-Inheritance"><span class="toc-text">8.9. ç»§æ‰¿ (Inheritance)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-9-1-%E8%99%9A%E6%96%B9%E6%B3%95-virtual-x2F-override"><span class="toc-text">8.9.1. è™šæ–¹æ³• (virtual&#x2F;override)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-9-2-%E6%8A%BD%E8%B1%A1%E6%96%B9%E6%B3%95-abstract"><span class="toc-text">8.9.2. æŠ½è±¡æ–¹æ³• (abstract)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-10-%E5%A4%9A%E6%80%81-Polymorphism"><span class="toc-text">8.10. å¤šæ€ (Polymorphism)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-11-%E9%9D%99%E6%80%81%E7%B1%BB-x2F-static"><span class="toc-text">8.11. é™æ€ç±»&#x2F;static</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-12-%E5%AF%86%E5%B0%81%E7%B1%BB-x2F-sealed"><span class="toc-text">8.12. å¯†å°ç±»&#x2F;sealed</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-13-%E5%88%86%E9%83%A8%E7%B1%BB-x2F-partial"><span class="toc-text">8.13. åˆ†éƒ¨ç±»&#x2F;partial</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-14-%E5%9F%BA%E7%B1%BB-Object"><span class="toc-text">8.14. åŸºç±» Object</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-14-1-ToString"><span class="toc-text">8.14.1. ToString</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-15-%E7%B1%BB%E7%9A%84%E6%89%A9%E5%B1%95%E6%9C%BA%E5%88%B6"><span class="toc-text">8.15. ç±»çš„æ‰©å±•æœºåˆ¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E6%8E%A5%E5%8F%A3-Interface"><span class="toc-text">9. æ¥å£ (Interface)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-IComparable-%E6%8E%A5%E5%8F%A3%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="toc-text">9.1. IComparable æ¥å£ä½¿ç”¨ç¤ºä¾‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E7%BB%93%E6%9E%84%E4%BD%93-Struct"><span class="toc-text">10. ç»“æ„ä½“ (Struct)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%9E%9A%E4%B8%BE-Enum"><span class="toc-text">11. æšä¸¾ (Enum)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">11.1. åŸºæœ¬ä½¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-Flags-TODO"><span class="toc-text">11.2. Flags (TODO)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-%E5%9F%BA%E6%9C%AC-API"><span class="toc-text">11.3. åŸºæœ¬ API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%A7%94%E6%89%98-Delegate"><span class="toc-text">12. å§”æ‰˜ (Delegate)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-%E5%86%99%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95-MyAdd-%EF%BC%8C%E6%B1%82%E5%8F%96-%E8%8B%A5%E5%B9%B2%E6%95%B0-%E7%9A%84%E5%92%8C"><span class="toc-text">12.1. å†™ä¸€ä¸ªæ–¹æ³• MyAdd ï¼Œæ±‚å– è‹¥å¹²æ•° çš„å’Œ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#12-1-1-%E5%8E%9F%E5%A7%8B%E5%86%99%E6%B3%95"><span class="toc-text">12.1.1. åŸå§‹å†™æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-1-2-%E9%80%9A%E8%BF%87%E4%B8%80%E4%B8%AA-Flag-%E6%9D%A5%E9%80%9A%E7%9F%A5-MyAdd-%E8%A6%81%E5%8E%BB%E8%B0%83%E7%94%A8%E4%BB%80%E4%B9%88%E9%80%BB%E8%BE%91"><span class="toc-text">12.1.2. é€šè¿‡ä¸€ä¸ª Flag æ¥é€šçŸ¥ MyAdd è¦å»è°ƒç”¨ä»€ä¹ˆé€»è¾‘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-1-3-%E6%B2%A1%E6%9C%89%E4%B8%AD%E9%97%B4%E5%95%86%E8%B5%9A%E5%B7%AE%E4%BB%B7%EF%BC%8C%E5%80%9F%E5%8A%A9%E7%B1%BB%E5%92%8C%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E4%BC%A0%E9%80%92%E4%B8%8D%E5%90%8C%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">12.1.3. æ²¡æœ‰ä¸­é—´å•†èµšå·®ä»·ï¼Œå€ŸåŠ©ç±»å’Œæ¥å£çš„æ–¹å¼ï¼Œä¼ é€’ä¸åŒçš„æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-1-4-%E6%A8%A1%E6%9D%BF%E4%BB%A3%E7%A0%81%E5%AE%9E%E5%9C%A8%E4%B8%8D%E7%88%BD%EF%BC%8C%E5%A7%94%E6%89%98%E7%B1%BB%E5%9E%8B%E5%87%BA%E7%8E%B0%E6%9D%A5%E6%95%91%E5%9C%BA"><span class="toc-text">12.1.4. æ¨¡æ¿ä»£ç å®åœ¨ä¸çˆ½ï¼Œå§”æ‰˜ç±»å‹å‡ºç°æ¥æ•‘åœº</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">12.2. åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-3-%E5%8C%BF%E5%90%8D%E5%A7%94%E6%89%98"><span class="toc-text">12.3. åŒ¿åå§”æ‰˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-4-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E6%B3%95"><span class="toc-text">12.4. è¡¨è¾¾å¼è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-5-%E5%86%85%E5%BB%BA%E7%9A%84%E5%A7%94%E6%89%98%E7%B1%BB%E5%9E%8B-Action-x2F-Func"><span class="toc-text">12.5. å†…å»ºçš„å§”æ‰˜ç±»å‹ Action&#x2F;Func</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-6-%E5%A4%9A%E6%92%AD%E5%A7%94%E6%89%98"><span class="toc-text">12.6. å¤šæ’­å§”æ‰˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-7-%E7%BB%83%E4%B9%A0-%E5%A6%82%E4%BD%95%E7%AE%80%E5%8C%96%E5%9B%BE%E7%89%87%E7%BB%98%E5%88%B6%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-text">12.7. [ç»ƒä¹ ] å¦‚ä½•ç®€åŒ–å›¾ç‰‡ç»˜åˆ¶çš„ä»£ç </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-8-%E7%BB%83%E4%B9%A0-%E5%A6%82%E4%BD%95%E7%AE%80%E5%8C%96%E8%BE%93%E5%87%BA%E7%A8%8B%E5%BA%8F%E6%89%A7%E8%A1%8C%E6%97%B6%E9%97%B4%E7%9A%84%E9%80%BB%E8%BE%91"><span class="toc-text">12.8. [ç»ƒä¹ ] å¦‚ä½•ç®€åŒ–è¾“å‡ºç¨‹åºæ‰§è¡Œæ—¶é—´çš„é€»è¾‘</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E6%95%B0%E7%BB%84-Array"><span class="toc-text">13. æ•°ç»„ (Array)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-text">13.1. ä¸€ç»´æ•°ç»„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84-Dimensional-Array"><span class="toc-text">13.2. å¤šç»´æ•°ç»„ (Dimensional Array)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-%E4%BA%A4%E9%94%99%E6%95%B0%E7%BB%84-Jagged-Array"><span class="toc-text">13.3. äº¤é”™æ•°ç»„ (Jagged Array)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E5%85%83%E7%BB%84-Tuple-x2F-ValueTuple"><span class="toc-text">14. å…ƒç»„ (Tuple&#x2F;ValueTuple)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-%E9%9B%86%E5%90%88-Collections"><span class="toc-text">15. é›†åˆ (Collections)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-System-Collections"><span class="toc-text">15.1. System.Collections</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#15-1-1-ArrayList"><span class="toc-text">15.1.1. ArrayList</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-1-2-Hashtable"><span class="toc-text">15.1.2. Hashtable</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-1-3-Queue"><span class="toc-text">15.1.3. Queue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-1-4-Stack"><span class="toc-text">15.1.4. Stack</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-1-5-SortedList-x2F-BitArray"><span class="toc-text">15.1.5. SortedList&#x2F;BitArray</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-System-Collections-Generic"><span class="toc-text">15.2. System.Collections.Generic</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#15-2-1-List-lt-T-gt"><span class="toc-text">15.2.1. List &lt;T&gt;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-2-2-Dictionary-lt-TKey-TValue-gt"><span class="toc-text">15.2.2. Dictionary&lt;TKey, TValue&gt;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-2-3-Queue-lt-T-gt"><span class="toc-text">15.2.3. Queue &lt;T&gt;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-2-4-Stack-lt-T-gt"><span class="toc-text">15.2.4. Stack &lt;T&gt;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-2-5-LinkedList-lt-T-gt"><span class="toc-text">15.2.5. LinkedList &lt;T&gt;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-2-6-HashSet-lt-T-gt"><span class="toc-text">15.2.6. HashSet &lt;T&gt;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-2-7-SortedList-x2F-Set-x2F-Dictionary-lt-gt"><span class="toc-text">15.2.7. SortedList&#x2F;Set&#x2F;Dictionary&lt;&gt;</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-3-System-Collections-Immutable"><span class="toc-text">15.3. System.Collections.Immutable</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-IEnumerable-x2F-Linq"><span class="toc-text">16. IEnumerable&#x2F;Linq</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-1-IEnumerable-x2F-IEnumerator-x2F-foreach"><span class="toc-text">16.1. IEnumerable&#x2F;IEnumerator&#x2F;foreach</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-Iterator"><span class="toc-text">16.2. Iterator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-3-Linq"><span class="toc-text">16.3. Linq</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#16-3-1-Method-Syntax"><span class="toc-text">16.3.1. Method Syntax</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16-3-2-Query-Syntax-x2F-Expression"><span class="toc-text">16.3.2. Query Syntax&#x2F;Expression</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-Linq-to-XML"><span class="toc-text">16.4. Linq to XML</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-%E6%B3%9B%E5%9E%8B-Generic"><span class="toc-text">17. æ³›å‹ (Generic)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-1-%E6%96%B9%E6%B3%95%E6%B3%9B%E5%9E%8B"><span class="toc-text">17.1. æ–¹æ³•æ³›å‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-%E4%BA%8B%E4%BB%B6-Event"><span class="toc-text">18. äº‹ä»¶ (Event)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#18-1-%E5%A6%82%E6%9E%9C%E4%BD%BF%E7%94%A8%E4%B8%80%E8%88%AC%E7%9A%84%E5%86%99%E6%B3%95"><span class="toc-text">18.1. å¦‚æœä½¿ç”¨ä¸€èˆ¬çš„å†™æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-%E4%B8%8A%E8%BF%B0%E7%9A%84%E5%86%99%E6%B3%95%E8%99%BD%E7%84%B6%E6%B2%A1%E6%9C%89%E9%94%99%E8%AF%AF%EF%BC%8C%E4%BD%86%E6%98%AF%E5%AD%98%E5%9C%A8%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98"><span class="toc-text">18.2. ä¸Šè¿°çš„å†™æ³•è™½ç„¶æ²¡æœ‰é”™è¯¯ï¼Œä½†æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-%E4%B8%8A%E8%BF%B0%E4%BB%A3%E7%A0%81%E8%99%BD%E7%84%B6%E7%AE%80%E6%B4%81%E4%BA%86%EF%BC%8C%E4%BD%86%E6%98%AF%E6%9D%A1%E4%BB%B6%E5%92%8C%E6%9C%80%E5%90%8E%E8%A6%81%E6%89%A7%E8%A1%8C%E7%9A%84%E9%80%BB%E8%BE%91%E5%86%99%E5%9C%A8%E4%B8%80%E8%B5%B7%EF%BC%8C%E8%80%A6%E5%90%88%E5%BA%A6%E5%A4%AA%E5%A4%A7"><span class="toc-text">18.3. ä¸Šè¿°ä»£ç è™½ç„¶ç®€æ´äº†ï¼Œä½†æ˜¯æ¡ä»¶å’Œæœ€åè¦æ‰§è¡Œçš„é€»è¾‘å†™åœ¨ä¸€èµ·ï¼Œè€¦åˆåº¦å¤ªå¤§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-4-%E6%8E%A5%E4%B8%8B%E6%9D%A5%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%B0%86%E7%AC%AC%E4%B8%80%E6%AE%B5%E4%BB%A3%E7%A0%81%E5%8D%95%E7%8B%AC%E6%8A%BD%E5%87%BA%E6%9D%A5%EF%BC%8C%E4%BD%9C%E4%B8%BA%E5%8D%95%E7%8B%AC%E7%9A%84-Publisher%EF%BC%8C%E4%BB%8E%E8%80%8C%E5%AE%9E%E7%8E%B0%E6%9B%B4%E5%A5%BD%E7%9A%84%E5%88%86%E7%A6%BB"><span class="toc-text">18.4. æ¥ä¸‹æ¥ï¼Œå¯ä»¥å°†ç¬¬ä¸€æ®µä»£ç å•ç‹¬æŠ½å‡ºæ¥ï¼Œä½œä¸ºå•ç‹¬çš„ Publisherï¼Œä»è€Œå®ç°æ›´å¥½çš„åˆ†ç¦»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-5-%E9%80%9A%E8%BF%87%E4%B8%8A%E8%BF%B0%E5%AE%9E%E7%8E%B0%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E4%BA%8B%E4%BB%B6%E6%98%AF%E9%80%9A%E8%BF%87%E5%A7%94%E6%89%98%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%8C%E4%BD%86%E8%BF%98%E6%98%AF%E6%9C%89%E4%BA%9B%E7%BC%BA%E7%82%B9"><span class="toc-text">18.5. é€šè¿‡ä¸Šè¿°å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°äº‹ä»¶æ˜¯é€šè¿‡å§”æ‰˜å®ç°çš„ï¼Œä½†è¿˜æ˜¯æœ‰äº›ç¼ºç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-6-%E6%8E%A5%E4%B8%8B%E6%9D%A5%EF%BC%8C%E8%A6%81%E8%80%83%E8%99%91%E7%9A%84%E6%98%AF%EF%BC%8C%E8%83%BD%E4%B8%8D%E8%83%BD%E5%9C%A8%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E4%BC%A0%E9%80%92%E4%B8%80%E4%BA%9B%E5%8F%82%E6%95%B0"><span class="toc-text">18.6. æ¥ä¸‹æ¥ï¼Œè¦è€ƒè™‘çš„æ˜¯ï¼Œèƒ½ä¸èƒ½åœ¨äº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼Œä¼ é€’ä¸€äº›å‚æ•°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-%E5%BC%82%E5%B8%B8-Exception"><span class="toc-text">19. å¼‚å¸¸ (Exception)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-1-%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F"><span class="toc-text">19.1. ä¼ ç»Ÿæ–¹å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-%E9%80%9A%E8%BF%87-Exception-%E6%8F%90%E4%BE%9B-%E8%A7%A3%E8%80%A6%E5%90%88-%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-text">19.2. é€šè¿‡ Exception æä¾› è§£è€¦åˆ çš„å¤„ç†æ–¹å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-3-%E5%BC%82%E5%B8%B8%E7%9A%84%E5%B5%8C%E5%A5%97%EF%BC%8C%E4%BB%A5%E5%8F%8A-finally"><span class="toc-text">19.3. å¼‚å¸¸çš„åµŒå¥—ï¼Œä»¥åŠ finally</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-%E5%8F%8D%E5%B0%84%E5%92%8C%E7%89%B9%E6%80%A7-Reflection-x2F-Attribute"><span class="toc-text">20. åå°„å’Œç‰¹æ€§ (Reflection&#x2F;Attribute)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#20-1-%E5%8F%8D%E5%B0%84-Reflection"><span class="toc-text">20.1. åå°„ (Reflection)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-2-%E4%BE%8B%E5%AD%90-ToModelList"><span class="toc-text">20.2. [ä¾‹å­] ToModelList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-3-%E7%89%B9%E6%80%A7-Attribute"><span class="toc-text">20.3. ç‰¹æ€§ (Attribute)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#20-3-1-%E7%89%B9%E6%80%A7%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E7%9A%84%E7%B1%BB"><span class="toc-text">20.3.1. ç‰¹æ€§å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#20-3-2-%E9%80%9A%E8%BF%87%E5%8F%8D%E5%B0%84%E5%BE%97%E5%88%B0%E5%AE%83%E7%9A%84%E5%AE%9E%E4%BE%8B%EF%BC%8C%E7%84%B6%E5%90%8E%E5%B0%B1%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E4%BA%86"><span class="toc-text">20.3.2. é€šè¿‡åå°„å¾—åˆ°å®ƒçš„å®ä¾‹ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨äº†</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B"><span class="toc-text">21. å¼‚æ­¥ç¼–ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-1-Process"><span class="toc-text">21.1. Process</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-2-Thread"><span class="toc-text">21.2. Thread</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-3-ThreadPool"><span class="toc-text">21.3. ThreadPool</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-4-TPL-Task-Parallel-Libary"><span class="toc-text">21.4. TPL (Task-Parallel Libary)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#21-4-1-Task-Run"><span class="toc-text">21.4.1. Task.Run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21-4-2-%E5%85%B6%E4%BB%96%E5%88%9B%E5%BB%BA%E4%BB%BB%E5%8A%A1%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-text">21.4.2. å…¶ä»–åˆ›å»ºä»»åŠ¡çš„æ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21-4-3-%E4%BB%BB%E5%8A%A1%E5%8D%8F%E4%BD%9C"><span class="toc-text">21.4.3. ä»»åŠ¡åä½œ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-5-TAL-Task-based-Asyncronize-Pattern"><span class="toc-text">21.5. TAL (Task-based Asyncronize Pattern)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-6-Parallel"><span class="toc-text">21.6. Parallel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-7-%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%90%8C%E6%AD%A5%E5%92%8C%E5%8D%8F%E4%BD%9C"><span class="toc-text">21.7. ä»»åŠ¡çš„åŒæ­¥å’Œåä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#21-7-1-Monitor-Enter-x2F-Exit"><span class="toc-text">21.7.1. Monitor.Enter&#x2F;Exit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21-7-2-lock"><span class="toc-text">21.7.2. lock</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21-7-3-ManualResetEventSlim"><span class="toc-text">21.7.3. ManualResetEventSlim</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21-7-4-Interlock"><span class="toc-text">21.7.4. Interlock</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21-7-5-Semaphore"><span class="toc-text">21.7.5. Semaphore</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21-7-6-CountdownEvent"><span class="toc-text">21.7.6. CountdownEvent</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-8-%E5%85%B6%E4%BB%96%E5%87%A0%E7%A7%8D%E5%BC%82%E6%AD%A5%E6%A8%A1%E5%BC%8F"><span class="toc-text">21.8. å…¶ä»–å‡ ç§å¼‚æ­¥æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#21-8-1-BackgroundWorker"><span class="toc-text">21.8.1. BackgroundWorker</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21-8-2-System-Threading-Timer"><span class="toc-text">21.8.2. System.Threading.Timer</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-IO-x2F-Stream"><span class="toc-text">22. IO&#x2F;Stream</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#22-1-Path"><span class="toc-text">22.1. Path</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-2-Driver"><span class="toc-text">22.2. Driver</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-3-Directory"><span class="toc-text">22.3. Directory</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-4-File"><span class="toc-text">22.4. File</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-5-Stream"><span class="toc-text">22.5. Stream</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#22-5-1-FileSteam"><span class="toc-text">22.5.1. FileSteam</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#22-5-2-MemoryStream"><span class="toc-text">22.5.2. MemoryStream</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#22-5-3-NetworkStream"><span class="toc-text">22.5.3. NetworkStream</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-6-Reader-x2F-Writer"><span class="toc-text">22.6. Reader&#x2F;Writer</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#22-6-1-StreamReader-x2F-StreamWriter"><span class="toc-text">22.6.1. StreamReader&#x2F;StreamWriter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#22-6-2-StringReader-x2F-StringWriter"><span class="toc-text">22.6.2. StringReader&#x2F;StringWriter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#22-6-3-BinaryReader-x2F-BinaryWriter"><span class="toc-text">22.6.3. BinaryReader&#x2F;BinaryWriter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#22-6-4-XmlReader-x2F-XmlWriter"><span class="toc-text">22.6.4. XmlReader&#x2F;XmlWriter</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-7-FileSystemWatching"><span class="toc-text">22.7. FileSystemWatching</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-Socket"><span class="toc-text">23. Socket</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#23-1-OSI-%E6%A8%A1%E5%9E%8B"><span class="toc-text">23.1. OSI æ¨¡å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-2-TCP-x2F-IP-%E5%8D%8F%E8%AE%AE%E6%A0%88"><span class="toc-text">23.2. TCP&#x2F;IP åè®®æ ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-3-Uri-x2F-UriBuilder"><span class="toc-text">23.3. Uri&#x2F;UriBuilder</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-4-IpAddress-x2F-Dns"><span class="toc-text">23.4. IpAddress&#x2F;Dns</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-5-Socket"><span class="toc-text">23.5. Socket</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#23-5-1-TCP-vs-UDP"><span class="toc-text">23.5.1. TCP vs UDP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#23-5-2-Socket-x2F-TCP"><span class="toc-text">23.5.2. Socket&#x2F;TCP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#23-5-2-1-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">23.5.2.1. åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#23-5-2-2-%E7%AE%80%E5%8D%95%E7%9A%84-HTTP-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">23.5.2.2. ç®€å•çš„ HTTP æœåŠ¡å™¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#23-5-2-3-%E7%AE%80%E5%8D%95%E7%9A%84%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%9E%E7%8E%B0"><span class="toc-text">23.5.2.3. ç®€å•çš„å®¢æˆ·ç«¯å®ç°</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#23-5-3-Socket-x2F-UDP"><span class="toc-text">23.5.3. Socket&#x2F;UDP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#23-5-4-%E9%80%9A%E8%BF%87-NetworkStream-%E7%AE%80%E5%8C%96%E5%AF%B9-Socket-%E8%AF%BB%E5%86%99%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-text">23.5.4. é€šè¿‡ NetworkStream ç®€åŒ–å¯¹ Socket è¯»å†™çš„æ“ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#23-5-5-%E9%A3%9E%E9%B8%BD-x2F-FeiQ"><span class="toc-text">23.5.5. é£é¸½&#x2F;FeiQ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-6-TcpClient-x2F-TcpListener"><span class="toc-text">23.6. TcpClient&#x2F;TcpListener</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-7-UdpClient"><span class="toc-text">23.7. UdpClient</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-8-HttpClient-x2F-HttpListener"><span class="toc-text">23.8. HttpClient&#x2F;HttpListener</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#23-8-1-HttpListener"><span class="toc-text">23.8.1. HttpListener</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#23-8-2-HttpWebRequest-x2F-WebClient-x2F-HttpClient"><span class="toc-text">23.8.2. HttpWebRequest&#x2F;WebClient&#x2F;HttpClient</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-Database"><span class="toc-text">24. Database</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#24-1-ADO-NET"><span class="toc-text">24.1. ADO.NET</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#24-1-1-SqlConnection-x2F-SqlCommand-x2F-SqlDataReader"><span class="toc-text">24.1.1. SqlConnection &#x2F; SqlCommand &#x2F; SqlDataReader</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#24-1-2-ExecuteScalar-x2F-SQL-Injection-x2F-Parameters"><span class="toc-text">24.1.2. ExecuteScalar &#x2F; SQL Injection &#x2F; Parameters</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#24-1-3-SqlDataReader-vs-SqlDataAdapter-x2F-DataTable"><span class="toc-text">24.1.3. SqlDataReader vs SqlDataAdapter&#x2F;DataTable</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-2-%E7%A4%BA%E4%BE%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">24.2. ç¤ºä¾‹æ•°æ®åº“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-BCL-Base-Class-Library-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%BA%93"><span class="toc-text">25. BCL (Base-Class Library) åŸºç¡€ç±»åº“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#25-1-Console-x2F-%E6%8E%A7%E5%88%B6%E5%8F%B0"><span class="toc-text">25.1. Console&#x2F;æ§åˆ¶å°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-2-Random-x2F-Thread"><span class="toc-text">25.2. Random&#x2F;Thread</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-3-IDisposable-x2F-%E8%B5%84%E6%BA%90"><span class="toc-text">25.3. IDisposable&#x2F;èµ„æº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-4-Stopwatch-x2F-%E7%A7%92%E8%A1%A8"><span class="toc-text">25.4. Stopwatch&#x2F;ç§’è¡¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-5-ConfigurationManager-x2F-%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E5%99%A8"><span class="toc-text">25.5. ConfigurationManager&#x2F;é…ç½®ç®¡ç†å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-6-RegularExpression-x2F-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">25.6. RegularExpression&#x2F;æ­£åˆ™è¡¨è¾¾å¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#26-%E9%97%AE%E9%A2%98-%E4%BB%85%E4%BD%9C%E5%8F%82%E8%80%83"><span class="toc-text">26. é—®é¢˜ (ä»…ä½œå‚è€ƒ)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#26-1-string-%E5%92%8C-StringBuilder-%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB"><span class="toc-text">26.1. string å’Œ StringBuilder æœ‰ä»€ä¹ˆåŒºåˆ«</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-2-%E4%BB%80%E4%B9%88%E6%98%AF%E6%8A%BD%E8%B1%A1%E7%B1%BB%EF%BC%8C%E6%8A%BD%E8%B1%A1%E7%B1%BB%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%E5%A4%84"><span class="toc-text">26.2. ä»€ä¹ˆæ˜¯æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆç”¨å¤„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-3-%E4%BB%80%E4%B9%88%E6%98%AF%E6%8E%A5%E5%8F%A3%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E7%BC%96%E7%A8%8B%EF%BC%8C%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E7%BC%96%E7%A8%8B%E6%9C%89%E4%BB%80%E4%B9%88%E5%A5%BD%E5%A4%84"><span class="toc-text">26.3. ä»€ä¹ˆæ˜¯æ¥å£ï¼Œä»€ä¹ˆæ˜¯é¢å‘æ¥å£ç¼–ç¨‹ï¼Œé¢å‘æ¥å£ç¼–ç¨‹æœ‰ä»€ä¹ˆå¥½å¤„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-4-%E4%BB%80%E4%B9%88%E6%98%AF%E9%9D%99%E6%80%81%E7%B1%BB%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E5%AF%86%E5%B0%81%E7%B1%BB%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E9%83%A8%E7%B1%BB"><span class="toc-text">26.4. ä»€ä¹ˆæ˜¯é™æ€ç±»ï¼Œä»€ä¹ˆæ˜¯å¯†å°ç±»ï¼Œä»€ä¹ˆæ˜¯åˆ†éƒ¨ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-5-%E4%BB%80%E4%B9%88%E6%98%AF%E7%B1%BB%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%8C%96%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E4%B9%88%E6%A0%B7%E7%9A%84"><span class="toc-text">26.5. ä»€ä¹ˆæ˜¯ç±»ï¼Œä»€ä¹ˆæ˜¯å¯¹è±¡ï¼Œå¯¹è±¡çš„å®ä¾‹åŒ–è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-6-%E4%BB%80%E4%B9%88%E6%98%AF%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%EF%BC%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%9C%89%E4%BB%80%E4%B9%88%E7%89%B9%E7%82%B9%EF%BC%8C%E6%9C%89%E4%BB%80%E4%B9%88%E5%A5%BD%E5%A4%84"><span class="toc-text">26.6. ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œé¢å‘å¯¹è±¡æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-7-%E9%87%8D%E8%BD%BD-overload-%E5%92%8C-%E9%87%8D%E5%86%99-override-%E6%9C%89%E5%95%A5%E5%8C%BA%E5%88%AB-15-%E5%88%86"><span class="toc-text">26.7. é‡è½½ (overload) å’Œ é‡å†™ (override) æœ‰å•¥åŒºåˆ« (15 åˆ†)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-8-%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%97%E6%AE%B5%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E6%96%B9%E6%B3%95%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E5%B1%9E%E6%80%A7%E3%80%82%E5%B1%9E%E6%80%A7%E6%9C%89%E4%BB%80%E4%B9%88%E5%A5%BD%E5%A4%84"><span class="toc-text">26.8. ä»€ä¹ˆæ˜¯å­—æ®µï¼Œä»€ä¹ˆæ˜¯æ–¹æ³•ï¼Œä»€ä¹ˆæ˜¯å±æ€§ã€‚å±æ€§æœ‰ä»€ä¹ˆå¥½å¤„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-9-%E4%BB%80%E4%B9%88%E6%98%AF%E5%B0%81%E8%A3%85%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%A7%E6%89%BF%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%9A%E6%80%81"><span class="toc-text">26.9. ä»€ä¹ˆæ˜¯å°è£…ï¼Œä»€ä¹ˆæ˜¯ç»§æ‰¿ï¼Œä»€ä¹ˆæ˜¯å¤šæ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-10-%E4%BB%80%E4%B9%88%E6%98%AF%E8%99%9A%E6%96%B9%E6%B3%95%EF%BC%8C%E5%AE%83%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%E5%A4%84"><span class="toc-text">26.10. ä»€ä¹ˆæ˜¯è™šæ–¹æ³•ï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨å¤„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-11-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%84%E5%90%88%EF%BC%8C%E5%AE%83%E8%B7%9F%E7%BB%A7%E6%89%BF%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%8C%E5%88%86%E5%88%AB%E7%94%A8%E5%9C%A8%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF"><span class="toc-text">26.11. ä»€ä¹ˆæ˜¯ç»„åˆï¼Œå®ƒè·Ÿç»§æ‰¿æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåˆ†åˆ«ç”¨åœ¨ä»€ä¹ˆåœºæ™¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-12-%E4%BB%80%E4%B9%88%E6%98%AF-DRY%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%A4%8D%E7%94%A8%E7%9A%84%E6%89%8B%E6%AE%B5%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-text">26.12. ä»€ä¹ˆæ˜¯ DRYï¼Œä»£ç å¤ç”¨çš„æ‰‹æ®µæœ‰å“ªäº›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-13-Parse-x2F-TryParse-%E6%9C%89%E5%95%A5%E5%8C%BA%E5%88%AB"><span class="toc-text">26.13. Parse&#x2F;TryParse æœ‰å•¥åŒºåˆ«</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-14-%E4%BB%80%E4%B9%88%E6%98%AF%E8%A3%85%E7%AE%B1%E6%8B%86%E7%AE%B1"><span class="toc-text">26.14. ä»€ä¹ˆæ˜¯è£…ç®±æ‹†ç®±</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-15-%E4%BB%80%E4%B9%88%E6%98%AF%E5%80%BC%E7%B1%BB%E5%9E%8B-x2F-%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-text">26.15. ä»€ä¹ˆæ˜¯å€¼ç±»å‹&#x2F;å¼•ç”¨ç±»å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-16-is-x2F-as-%E5%88%86%E5%88%AB%E6%98%AF%E5%B9%B2%E5%95%A5%E7%9A%84"><span class="toc-text">26.16. is&#x2F;as åˆ†åˆ«æ˜¯å¹²å•¥çš„</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-text">27. ä»£ç ç”Ÿæˆå™¨</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/30/%E6%B4%9B%E9%9B%AA%E5%8A%A9%E6%89%8B/" title="æ´›é›ªåŠ©æ‰‹">æ´›é›ªåŠ©æ‰‹</a><time datetime="2023-03-30T12:36:19.000Z" title="å‘è¡¨äº 2023-03-30 20:36:19">2023-03-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/28/Git%E4%B8%8A%E4%BC%A0%E5%91%BD%E4%BB%A4%E7%AC%A6/" title="Gitä¸Šä¼ å‘½ä»¤ç¬¦">Gitä¸Šä¼ å‘½ä»¤ç¬¦</a><time datetime="2023-03-28T02:06:10.000Z" title="å‘è¡¨äº 2023-03-28 10:06:10">2023-03-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/14/%E5%AE%89%E8%A3%85nodejs-Vue-vue-cli/" title="å®‰è£…nodejs+Vue+vue-cli">å®‰è£…nodejs+Vue+vue-cli</a><time datetime="2023-03-14T01:52:37.000Z" title="å‘è¡¨äº 2023-03-14 09:52:37">2023-03-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/10/WIn10%E6%BF%80%E6%B4%BB/" title="Win10ç‰ˆæœ¬æ¿€æ´»">Win10ç‰ˆæœ¬æ¿€æ´»</a><time datetime="2023-03-10T08:34:41.000Z" title="å‘è¡¨äº 2023-03-10 16:34:41">2023-03-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/10/23/%E7%BB%BF%E8%89%B2%E8%BD%AF%E4%BB%B6%E5%8F%8A%E6%B8%B8%E6%88%8F/" title="ç»¿è‰²è½¯ä»¶åŠæ¸¸æˆ">ç»¿è‰²è½¯ä»¶åŠæ¸¸æˆ</a><time datetime="2022-10-23T12:29:48.000Z" title="å‘è¡¨äº 2022-10-23 20:29:48">2022-10-23</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 By å è½æ˜Ÿç©ºğŸ’¤</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://butterfly.js.org/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>